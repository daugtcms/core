import{E as Tc,P as bi,a as Ri,p as Ic,N as _c,m as oo,M as Lo,b as yc,c as bc,g as Rc,f as wc,d as Ac,e as Oc,h as Sc,S as Dc,T as Cc,i as Lc,j as Mc,k as Pc,L as Nc}from"./tiptap-CBqkXO4f.js";import{P as xc,m as Bc,a as Gc,b as Fc}from"./unocss-B5OAh2yV.js";import"./pdf-TWaREukU.js";(()=>{function e(a,p){var u=Object.keys(a);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(a);p&&(m=m.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),u.push.apply(u,m)}return u}function t(a){for(var p=1;p<arguments.length;p++){var u=arguments[p]!=null?arguments[p]:{};p%2?e(Object(u),!0).forEach(function(m){r(a,m,u[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):e(Object(u)).forEach(function(m){Object.defineProperty(a,m,Object.getOwnPropertyDescriptor(u,m))})}return a}function n(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(p){return typeof p}:n=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},n(a)}function r(a,p,u){return p in a?Object.defineProperty(a,p,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[p]=u,a}function i(){return i=Object.assign||function(a){for(var p=1;p<arguments.length;p++){var u=arguments[p];for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(a[m]=u[m])}return a},i.apply(this,arguments)}function s(a,p){if(a==null)return{};var u={},m=Object.keys(a),b,S;for(S=0;S<m.length;S++)b=m[S],!(p.indexOf(b)>=0)&&(u[b]=a[b]);return u}function o(a,p){if(a==null)return{};var u=s(a,p),m,b;if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(a);for(b=0;b<S.length;b++)m=S[b],!(p.indexOf(m)>=0)&&Object.prototype.propertyIsEnumerable.call(a,m)&&(u[m]=a[m])}return u}var l="1.15.0";function c(a){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(a)}var d=c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),f=c(/Edge/i),g=c(/firefox/i),v=c(/safari/i)&&!c(/chrome/i)&&!c(/android/i),I=c(/iP(ad|od|hone)/i),E=c(/chrome/i)&&c(/android/i),w={capture:!1,passive:!1};function y(a,p,u){a.addEventListener(p,u,!d&&w)}function _(a,p,u){a.removeEventListener(p,u,!d&&w)}function T(a,p){if(p){if(p[0]===">"&&(p=p.substring(1)),a)try{if(a.matches)return a.matches(p);if(a.msMatchesSelector)return a.msMatchesSelector(p);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(p)}catch{return!1}return!1}}function R(a){return a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode}function h(a,p,u,m){if(a){u=u||document;do{if(p!=null&&(p[0]===">"?a.parentNode===u&&T(a,p):T(a,p))||m&&a===u)return a;if(a===u)break}while(a=R(a))}return null}var D=/\s+/g;function A(a,p,u){if(a&&p)if(a.classList)a.classList[u?"add":"remove"](p);else{var m=(" "+a.className+" ").replace(D," ").replace(" "+p+" "," ");a.className=(m+(u?" "+p:"")).replace(D," ")}}function O(a,p,u){var m=a&&a.style;if(m){if(u===void 0)return document.defaultView&&document.defaultView.getComputedStyle?u=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(u=a.currentStyle),p===void 0?u:u[p];!(p in m)&&p.indexOf("webkit")===-1&&(p="-webkit-"+p),m[p]=u+(typeof u=="string"?"":"px")}}function P(a,p){var u="";if(typeof a=="string")u=a;else do{var m=O(a,"transform");m&&m!=="none"&&(u=m+" "+u)}while(!p&&(a=a.parentNode));var b=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return b&&new b(u)}function k(a,p,u){if(a){var m=a.getElementsByTagName(p),b=0,S=m.length;if(u)for(;b<S;b++)u(m[b],b);return m}return[]}function W(){var a=document.scrollingElement;return a||document.documentElement}function x(a,p,u,m,b){if(!(!a.getBoundingClientRect&&a!==window)){var S,M,$,F,K,Z,ne;if(a!==window&&a.parentNode&&a!==W()?(S=a.getBoundingClientRect(),M=S.top,$=S.left,F=S.bottom,K=S.right,Z=S.height,ne=S.width):(M=0,$=0,F=window.innerHeight,K=window.innerWidth,Z=window.innerHeight,ne=window.innerWidth),(p||u)&&a!==window&&(b=b||a.parentNode,!d))do if(b&&b.getBoundingClientRect&&(O(b,"transform")!=="none"||u&&O(b,"position")!=="static")){var Ee=b.getBoundingClientRect();M-=Ee.top+parseInt(O(b,"border-top-width")),$-=Ee.left+parseInt(O(b,"border-left-width")),F=M+S.height,K=$+S.width;break}while(b=b.parentNode);if(m&&a!==window){var se=P(b||a),Le=se&&se.a,pe=se&&se.d;se&&(M/=pe,$/=Le,ne/=Le,Z/=pe,F=M+Z,K=$+ne)}return{top:M,left:$,bottom:F,right:K,width:ne,height:Z}}}function U(a,p,u){for(var m=H(a,!0),b=x(a)[p];m;){var S=x(m)[u],M=void 0;if(M=b>=S,!M)return m;if(m===W())break;m=H(m,!1)}return!1}function j(a,p,u,m){for(var b=0,S=0,M=a.children;S<M.length;){if(M[S].style.display!=="none"&&M[S]!==te.ghost&&(m||M[S]!==te.dragged)&&h(M[S],u.draggable,a,!1)){if(b===p)return M[S];b++}S++}return null}function G(a,p){for(var u=a.lastElementChild;u&&(u===te.ghost||O(u,"display")==="none"||p&&!T(u,p));)u=u.previousElementSibling;return u||null}function X(a,p){var u=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)a.nodeName.toUpperCase()!=="TEMPLATE"&&a!==te.clone&&(!p||T(a,p))&&u++;return u}function L(a){var p=0,u=0,m=W();if(a)do{var b=P(a),S=b.a,M=b.d;p+=a.scrollLeft*S,u+=a.scrollTop*M}while(a!==m&&(a=a.parentNode));return[p,u]}function N(a,p){for(var u in a)if(a.hasOwnProperty(u)){for(var m in p)if(p.hasOwnProperty(m)&&p[m]===a[u][m])return Number(u)}return-1}function H(a,p){if(!a||!a.getBoundingClientRect)return W();var u=a,m=!1;do if(u.clientWidth<u.scrollWidth||u.clientHeight<u.scrollHeight){var b=O(u);if(u.clientWidth<u.scrollWidth&&(b.overflowX=="auto"||b.overflowX=="scroll")||u.clientHeight<u.scrollHeight&&(b.overflowY=="auto"||b.overflowY=="scroll")){if(!u.getBoundingClientRect||u===document.body)return W();if(m||p)return u;m=!0}}while(u=u.parentNode);return W()}function z(a,p){if(a&&p)for(var u in p)p.hasOwnProperty(u)&&(a[u]=p[u]);return a}function J(a,p){return Math.round(a.top)===Math.round(p.top)&&Math.round(a.left)===Math.round(p.left)&&Math.round(a.height)===Math.round(p.height)&&Math.round(a.width)===Math.round(p.width)}var oe;function we(a,p){return function(){if(!oe){var u=arguments,m=this;u.length===1?a.call(m,u[0]):a.apply(m,u),oe=setTimeout(function(){oe=void 0},p)}}}function Ye(){clearTimeout(oe),oe=void 0}function me(a,p,u){a.scrollLeft+=p,a.scrollTop+=u}function Pe(a){var p=window.Polymer,u=window.jQuery||window.Zepto;return p&&p.dom?p.dom(a).cloneNode(!0):u?u(a).clone(!0)[0]:a.cloneNode(!0)}var Q="Sortable"+new Date().getTime();function ge(){var a=[],p;return{captureAnimationState:function(){if(a=[],!!this.options.animation){var u=[].slice.call(this.el.children);u.forEach(function(m){if(!(O(m,"display")==="none"||m===te.ghost)){a.push({target:m,rect:x(m)});var b=t({},a[a.length-1].rect);if(m.thisAnimationDuration){var S=P(m,!0);S&&(b.top-=S.f,b.left-=S.e)}m.fromRect=b}})}},addAnimationState:function(u){a.push(u)},removeAnimationState:function(u){a.splice(N(a,{target:u}),1)},animateAll:function(u){var m=this;if(!this.options.animation){clearTimeout(p),typeof u=="function"&&u();return}var b=!1,S=0;a.forEach(function(M){var $=0,F=M.target,K=F.fromRect,Z=x(F),ne=F.prevFromRect,Ee=F.prevToRect,se=M.rect,Le=P(F,!0);Le&&(Z.top-=Le.f,Z.left-=Le.e),F.toRect=Z,F.thisAnimationDuration&&J(ne,Z)&&!J(K,Z)&&(se.top-Z.top)/(se.left-Z.left)===(K.top-Z.top)/(K.left-Z.left)&&($=Ue(se,ne,Ee,m.options)),J(Z,K)||(F.prevFromRect=K,F.prevToRect=Z,$||($=m.options.animation),m.animate(F,se,Z,$)),$&&(b=!0,S=Math.max(S,$),clearTimeout(F.animationResetTimer),F.animationResetTimer=setTimeout(function(){F.animationTime=0,F.prevFromRect=null,F.fromRect=null,F.prevToRect=null,F.thisAnimationDuration=null},$),F.thisAnimationDuration=$)}),clearTimeout(p),b?p=setTimeout(function(){typeof u=="function"&&u()},S):typeof u=="function"&&u(),a=[]},animate:function(u,m,b,S){if(S){O(u,"transition",""),O(u,"transform","");var M=P(this.el),$=M&&M.a,F=M&&M.d,K=(m.left-b.left)/($||1),Z=(m.top-b.top)/(F||1);u.animatingX=!!K,u.animatingY=!!Z,O(u,"transform","translate3d("+K+"px,"+Z+"px,0)"),this.forRepaintDummy=_e(u),O(u,"transition","transform "+S+"ms"+(this.options.easing?" "+this.options.easing:"")),O(u,"transform","translate3d(0,0,0)"),typeof u.animated=="number"&&clearTimeout(u.animated),u.animated=setTimeout(function(){O(u,"transition",""),O(u,"transform",""),u.animated=!1,u.animatingX=!1,u.animatingY=!1},S)}}}}function _e(a){return a.offsetWidth}function Ue(a,p,u,m){return Math.sqrt(Math.pow(p.top-a.top,2)+Math.pow(p.left-a.left,2))/Math.sqrt(Math.pow(p.top-u.top,2)+Math.pow(p.left-u.left,2))*m.animation}var fe=[],He={initializeByDefault:!0},Tt={mount:function(a){for(var p in He)He.hasOwnProperty(p)&&!(p in a)&&(a[p]=He[p]);fe.forEach(function(u){if(u.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName," more than once")}),fe.push(a)},pluginEvent:function(a,p,u){var m=this;this.eventCanceled=!1,u.cancel=function(){m.eventCanceled=!0};var b=a+"Global";fe.forEach(function(S){p[S.pluginName]&&(p[S.pluginName][b]&&p[S.pluginName][b](t({sortable:p},u)),p.options[S.pluginName]&&p[S.pluginName][a]&&p[S.pluginName][a](t({sortable:p},u)))})},initializePlugins:function(a,p,u,m){fe.forEach(function(M){var $=M.pluginName;if(!(!a.options[$]&&!M.initializeByDefault)){var F=new M(a,p,a.options);F.sortable=a,F.options=a.options,a[$]=F,i(u,F.defaults)}});for(var b in a.options)if(a.options.hasOwnProperty(b)){var S=this.modifyOption(a,b,a.options[b]);typeof S<"u"&&(a.options[b]=S)}},getEventProperties:function(a,p){var u={};return fe.forEach(function(m){typeof m.eventProperties=="function"&&i(u,m.eventProperties.call(p[m.pluginName],a))}),u},modifyOption:function(a,p,u){var m;return fe.forEach(function(b){a[b.pluginName]&&b.optionListeners&&typeof b.optionListeners[p]=="function"&&(m=b.optionListeners[p].call(a[b.pluginName],u))}),m}};function Qt(a){var p=a.sortable,u=a.rootEl,m=a.name,b=a.targetEl,S=a.cloneEl,M=a.toEl,$=a.fromEl,F=a.oldIndex,K=a.newIndex,Z=a.oldDraggableIndex,ne=a.newDraggableIndex,Ee=a.originalEvent,se=a.putSortable,Le=a.extraEventProperties;if(p=p||u&&u[Q],!!p){var pe,Pt=p.options,Ve="on"+m.charAt(0).toUpperCase()+m.substr(1);window.CustomEvent&&!d&&!f?pe=new CustomEvent(m,{bubbles:!0,cancelable:!0}):(pe=document.createEvent("Event"),pe.initEvent(m,!0,!0)),pe.to=M||u,pe.from=$||u,pe.item=b||u,pe.clone=S,pe.oldIndex=F,pe.newIndex=K,pe.oldDraggableIndex=Z,pe.newDraggableIndex=ne,pe.originalEvent=Ee,pe.pullMode=se?se.lastPutMode:void 0;var Nt=t(t({},Le),Tt.getEventProperties(m,p));for(var ke in Nt)pe[ke]=Nt[ke];u&&u.dispatchEvent(pe),Pt[Ve]&&Pt[Ve].call(p,pe)}}var Tn=["evt"],De=function(a,p){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=u.evt,b=o(u,Tn);Tt.pluginEvent.bind(te)(a,p,t({dragEl:V,parentEl:he,ghostEl:re,rootEl:ce,nextEl:Fe,lastDownEl:It,cloneEl:de,cloneHidden:ze,dragStarted:Be,putSortable:Ce,activeSortable:te.active,originalEvent:m,oldIndex:ht,oldDraggableIndex:_t,newIndex:Ne,newDraggableIndex:Je,hideGhostForTarget:us,unhideGhostForTarget:ds,cloneNowHidden:function(){ze=!0},cloneNowShown:function(){ze=!1},dispatchSortableEvent:function(S){ye({sortable:p,name:S,originalEvent:m})}},b))};function ye(a){Qt(t({putSortable:Ce,cloneEl:de,targetEl:V,rootEl:ce,oldIndex:ht,oldDraggableIndex:_t,newIndex:Ne,newDraggableIndex:Je},a))}var V,he,re,ce,Fe,It,de,ze,ht,Ne,_t,Je,In,Ce,Ut=!1,_n=!1,yn=[],C,Y,ee,ue,le,xe,Be,et,Ht,tt=!1,Vt=!1,Lt,ve,Un=[],Zt=!1,Mt=[],pr=typeof document<"u",hr=I,ss=f||d?"cssFloat":"float",rc=pr&&!E&&!I&&"draggable"in document.createElement("div"),as=function(){if(pr){if(d)return!1;var a=document.createElement("x");return a.style.cssText="pointer-events:auto",a.style.pointerEvents==="auto"}}(),ls=function(a,p){var u=O(a),m=parseInt(u.width)-parseInt(u.paddingLeft)-parseInt(u.paddingRight)-parseInt(u.borderLeftWidth)-parseInt(u.borderRightWidth),b=j(a,0,p),S=j(a,1,p),M=b&&O(b),$=S&&O(S),F=M&&parseInt(M.marginLeft)+parseInt(M.marginRight)+x(b).width,K=$&&parseInt($.marginLeft)+parseInt($.marginRight)+x(S).width;if(u.display==="flex")return u.flexDirection==="column"||u.flexDirection==="column-reverse"?"vertical":"horizontal";if(u.display==="grid")return u.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(b&&M.float&&M.float!=="none"){var Z=M.float==="left"?"left":"right";return S&&($.clear==="both"||$.clear===Z)?"vertical":"horizontal"}return b&&(M.display==="block"||M.display==="flex"||M.display==="table"||M.display==="grid"||F>=m&&u[ss]==="none"||S&&u[ss]==="none"&&F+K>m)?"vertical":"horizontal"},ic=function(a,p,u){var m=u?a.left:a.top,b=u?a.right:a.bottom,S=u?a.width:a.height,M=u?p.left:p.top,$=u?p.right:p.bottom,F=u?p.width:p.height;return m===M||b===$||m+S/2===M+F/2},oc=function(a,p){var u;return yn.some(function(m){var b=m[Q].options.emptyInsertThreshold;if(!(!b||G(m))){var S=x(m),M=a>=S.left-b&&a<=S.right+b,$=p>=S.top-b&&p<=S.bottom+b;if(M&&$)return u=m}}),u},cs=function(a){function p(b,S){return function(M,$,F,K){var Z=M.options.group.name&&$.options.group.name&&M.options.group.name===$.options.group.name;if(b==null&&(S||Z))return!0;if(b==null||b===!1)return!1;if(S&&b==="clone")return b;if(typeof b=="function")return p(b(M,$,F,K),S)(M,$,F,K);var ne=(S?M:$).options.group.name;return b===!0||typeof b=="string"&&b===ne||b.join&&b.indexOf(ne)>-1}}var u={},m=a.group;(!m||n(m)!="object")&&(m={name:m}),u.name=m.name,u.checkPull=p(m.pull,!0),u.checkPut=p(m.put),u.revertClone=m.revertClone,a.group=u},us=function(){!as&&re&&O(re,"display","none")},ds=function(){!as&&re&&O(re,"display","")};pr&&!E&&document.addEventListener("click",function(a){if(_n)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),_n=!1,!1},!0);var Jt=function(a){if(V){a=a.touches?a.touches[0]:a;var p=oc(a.clientX,a.clientY);if(p){var u={};for(var m in a)a.hasOwnProperty(m)&&(u[m]=a[m]);u.target=u.rootEl=p,u.preventDefault=void 0,u.stopPropagation=void 0,p[Q]._onDragOver(u)}}},sc=function(a){V&&V.parentNode[Q]._isOutsideThisEl(a.target)};function te(a,p){if(!(a&&a.nodeType&&a.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a,this.options=p=i({},p),a[Q]=this;var u={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ls(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(S,M){S.setData("Text",M.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:te.supportPointer!==!1&&"PointerEvent"in window&&!v,emptyInsertThreshold:5};Tt.initializePlugins(this,a,u);for(var m in u)!(m in p)&&(p[m]=u[m]);cs(p);for(var b in this)b.charAt(0)==="_"&&typeof this[b]=="function"&&(this[b]=this[b].bind(this));this.nativeDraggable=p.forceFallback?!1:rc,this.nativeDraggable&&(this.options.touchStartThreshold=1),p.supportPointer?y(a,"pointerdown",this._onTapStart):(y(a,"mousedown",this._onTapStart),y(a,"touchstart",this._onTapStart)),this.nativeDraggable&&(y(a,"dragover",this),y(a,"dragenter",this)),yn.push(this.el),p.store&&p.store.get&&this.sort(p.store.get(this)||[]),i(this,ge())}te.prototype={constructor:te,_isOutsideThisEl:function(a){!this.el.contains(a)&&a!==this.el&&(et=null)},_getDirection:function(a,p){return typeof this.options.direction=="function"?this.options.direction.call(this,a,p,V):this.options.direction},_onTapStart:function(a){if(a.cancelable){var p=this,u=this.el,m=this.options,b=m.preventOnFilter,S=a.type,M=a.touches&&a.touches[0]||a.pointerType&&a.pointerType==="touch"&&a,$=(M||a).target,F=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||$,K=m.filter;if(hc(u),!V&&!(/mousedown|pointerdown/.test(S)&&a.button!==0||m.disabled)&&!F.isContentEditable&&!(!this.nativeDraggable&&v&&$&&$.tagName.toUpperCase()==="SELECT")&&($=h($,m.draggable,u,!1),!($&&$.animated)&&It!==$)){if(ht=X($),_t=X($,m.draggable),typeof K=="function"){if(K.call(this,a,$,this)){ye({sortable:p,rootEl:F,name:"filter",targetEl:$,toEl:u,fromEl:u}),De("filter",p,{evt:a}),b&&a.cancelable&&a.preventDefault();return}}else if(K&&(K=K.split(",").some(function(Z){if(Z=h(F,Z.trim(),u,!1),Z)return ye({sortable:p,rootEl:Z,name:"filter",targetEl:$,fromEl:u,toEl:u}),De("filter",p,{evt:a}),!0}),K)){b&&a.cancelable&&a.preventDefault();return}m.handle&&!h(F,m.handle,u,!1)||this._prepareDragStart(a,M,$)}}},_prepareDragStart:function(a,p,u){var m=this,b=m.el,S=m.options,M=b.ownerDocument,$;if(u&&!V&&u.parentNode===b){var F=x(u);if(ce=b,V=u,he=V.parentNode,Fe=V.nextSibling,It=u,In=S.group,te.dragged=V,C={target:V,clientX:(p||a).clientX,clientY:(p||a).clientY},le=C.clientX-F.left,xe=C.clientY-F.top,this._lastX=(p||a).clientX,this._lastY=(p||a).clientY,V.style["will-change"]="all",$=function(){if(De("delayEnded",m,{evt:a}),te.eventCanceled){m._onDrop();return}m._disableDelayedDragEvents(),!g&&m.nativeDraggable&&(V.draggable=!0),m._triggerDragStart(a,p),ye({sortable:m,name:"choose",originalEvent:a}),A(V,S.chosenClass,!0)},S.ignore.split(",").forEach(function(K){k(V,K.trim(),xi)}),y(M,"dragover",Jt),y(M,"mousemove",Jt),y(M,"touchmove",Jt),y(M,"mouseup",m._onDrop),y(M,"touchend",m._onDrop),y(M,"touchcancel",m._onDrop),g&&this.nativeDraggable&&(this.options.touchStartThreshold=4,V.draggable=!0),De("delayStart",this,{evt:a}),S.delay&&(!S.delayOnTouchOnly||p)&&(!this.nativeDraggable||!(f||d))){if(te.eventCanceled){this._onDrop();return}y(M,"mouseup",m._disableDelayedDrag),y(M,"touchend",m._disableDelayedDrag),y(M,"touchcancel",m._disableDelayedDrag),y(M,"mousemove",m._delayedDragTouchMoveHandler),y(M,"touchmove",m._delayedDragTouchMoveHandler),S.supportPointer&&y(M,"pointermove",m._delayedDragTouchMoveHandler),m._dragStartTimer=setTimeout($,S.delay)}else $()}},_delayedDragTouchMoveHandler:function(a){var p=a.touches?a.touches[0]:a;Math.max(Math.abs(p.clientX-this._lastX),Math.abs(p.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){V&&xi(V),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;_(a,"mouseup",this._disableDelayedDrag),_(a,"touchend",this._disableDelayedDrag),_(a,"touchcancel",this._disableDelayedDrag),_(a,"mousemove",this._delayedDragTouchMoveHandler),_(a,"touchmove",this._delayedDragTouchMoveHandler),_(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,p){p=p||a.pointerType=="touch"&&a,!this.nativeDraggable||p?this.options.supportPointer?y(document,"pointermove",this._onTouchMove):p?y(document,"touchmove",this._onTouchMove):y(document,"mousemove",this._onTouchMove):(y(V,"dragend",this),y(ce,"dragstart",this._onDragStart));try{document.selection?mr(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(a,p){if(Ut=!1,ce&&V){De("dragStarted",this,{evt:p}),this.nativeDraggable&&y(document,"dragover",sc);var u=this.options;!a&&A(V,u.dragClass,!1),A(V,u.ghostClass,!0),te.active=this,a&&this._appendGhost(),ye({sortable:this,name:"start",originalEvent:p})}else this._nulling()},_emulateDragOver:function(){if(Y){this._lastX=Y.clientX,this._lastY=Y.clientY,us();for(var a=document.elementFromPoint(Y.clientX,Y.clientY),p=a;a&&a.shadowRoot&&(a=a.shadowRoot.elementFromPoint(Y.clientX,Y.clientY),a!==p);)p=a;if(V.parentNode[Q]._isOutsideThisEl(a),p)do{if(p[Q]){var u=void 0;if(u=p[Q]._onDragOver({clientX:Y.clientX,clientY:Y.clientY,target:a,rootEl:p}),u&&!this.options.dragoverBubble)break}a=p}while(p=p.parentNode);ds()}},_onTouchMove:function(a){if(C){var p=this.options,u=p.fallbackTolerance,m=p.fallbackOffset,b=a.touches?a.touches[0]:a,S=re&&P(re,!0),M=re&&S&&S.a,$=re&&S&&S.d,F=hr&&ve&&L(ve),K=(b.clientX-C.clientX+m.x)/(M||1)+(F?F[0]-Un[0]:0)/(M||1),Z=(b.clientY-C.clientY+m.y)/($||1)+(F?F[1]-Un[1]:0)/($||1);if(!te.active&&!Ut){if(u&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<u)return;this._onDragStart(a,!0)}if(re){S?(S.e+=K-(ee||0),S.f+=Z-(ue||0)):S={a:1,b:0,c:0,d:1,e:K,f:Z};var ne="matrix(".concat(S.a,",").concat(S.b,",").concat(S.c,",").concat(S.d,",").concat(S.e,",").concat(S.f,")");O(re,"webkitTransform",ne),O(re,"mozTransform",ne),O(re,"msTransform",ne),O(re,"transform",ne),ee=K,ue=Z,Y=b}a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!re){var a=this.options.fallbackOnBody?document.body:ce,p=x(V,!0,hr,!0,a),u=this.options;if(hr){for(ve=a;O(ve,"position")==="static"&&O(ve,"transform")==="none"&&ve!==document;)ve=ve.parentNode;ve!==document.body&&ve!==document.documentElement?(ve===document&&(ve=W()),p.top+=ve.scrollTop,p.left+=ve.scrollLeft):ve=W(),Un=L(ve)}re=V.cloneNode(!0),A(re,u.ghostClass,!1),A(re,u.fallbackClass,!0),A(re,u.dragClass,!0),O(re,"transition",""),O(re,"transform",""),O(re,"box-sizing","border-box"),O(re,"margin",0),O(re,"top",p.top),O(re,"left",p.left),O(re,"width",p.width),O(re,"height",p.height),O(re,"opacity","0.8"),O(re,"position",hr?"absolute":"fixed"),O(re,"zIndex","100000"),O(re,"pointerEvents","none"),te.ghost=re,a.appendChild(re),O(re,"transform-origin",le/parseInt(re.style.width)*100+"% "+xe/parseInt(re.style.height)*100+"%")}},_onDragStart:function(a,p){var u=this,m=a.dataTransfer,b=u.options;if(De("dragStart",this,{evt:a}),te.eventCanceled){this._onDrop();return}De("setupClone",this),te.eventCanceled||(de=Pe(V),de.removeAttribute("id"),de.draggable=!1,de.style["will-change"]="",this._hideClone(),A(de,this.options.chosenClass,!1),te.clone=de),u.cloneId=mr(function(){De("clone",u),!te.eventCanceled&&(u.options.removeCloneOnHide||ce.insertBefore(de,V),u._hideClone(),ye({sortable:u,name:"clone"}))}),!p&&A(V,b.dragClass,!0),p?(_n=!0,u._loopId=setInterval(u._emulateDragOver,50)):(_(document,"mouseup",u._onDrop),_(document,"touchend",u._onDrop),_(document,"touchcancel",u._onDrop),m&&(m.effectAllowed="move",b.setData&&b.setData.call(u,m,V)),y(document,"drop",u),O(V,"transform","translateZ(0)")),Ut=!0,u._dragStartId=mr(u._dragStarted.bind(u,p,a)),y(document,"selectstart",u),Be=!0,v&&O(document.body,"user-select","none")},_onDragOver:function(a){var p=this.el,u=a.target,m,b,S,M=this.options,$=M.group,F=te.active,K=In===$,Z=M.sort,ne=Ce||F,Ee,se=this,Le=!1;if(Zt)return;function pe($n,Ec){De($n,se,t({evt:a,isOwner:K,axis:Ee?"vertical":"horizontal",revert:S,dragRect:m,targetRect:b,canSort:Z,fromSortable:ne,target:u,completed:Ve,onMove:function(gs,vc){return gr(ce,p,V,m,gs,x(gs),a,vc)},changed:Nt},Ec))}function Pt(){pe("dragOverAnimationCapture"),se.captureAnimationState(),se!==ne&&ne.captureAnimationState()}function Ve($n){return pe("dragOverCompleted",{insertion:$n}),$n&&(K?F._hideClone():F._showClone(se),se!==ne&&(A(V,Ce?Ce.options.ghostClass:F.options.ghostClass,!1),A(V,M.ghostClass,!0)),Ce!==se&&se!==te.active?Ce=se:se===te.active&&Ce&&(Ce=null),ne===se&&(se._ignoreWhileAnimating=u),se.animateAll(function(){pe("dragOverAnimationComplete"),se._ignoreWhileAnimating=null}),se!==ne&&(ne.animateAll(),ne._ignoreWhileAnimating=null)),(u===V&&!V.animated||u===p&&!u.animated)&&(et=null),!M.dragoverBubble&&!a.rootEl&&u!==document&&(V.parentNode[Q]._isOutsideThisEl(a.target),!$n&&Jt(a)),!M.dragoverBubble&&a.stopPropagation&&a.stopPropagation(),Le=!0}function Nt(){Ne=X(V),Je=X(V,M.draggable),ye({sortable:se,name:"change",toEl:p,newIndex:Ne,newDraggableIndex:Je,originalEvent:a})}if(a.preventDefault!==void 0&&a.cancelable&&a.preventDefault(),u=h(u,M.draggable,p,!0),pe("dragOver"),te.eventCanceled)return Le;if(V.contains(a.target)||u.animated&&u.animatingX&&u.animatingY||se._ignoreWhileAnimating===u)return Ve(!1);if(_n=!1,F&&!M.disabled&&(K?Z||(S=he!==ce):Ce===this||(this.lastPutMode=In.checkPull(this,F,V,a))&&$.checkPut(this,F,V,a))){if(Ee=this._getDirection(a,u)==="vertical",m=x(V),pe("dragOverValid"),te.eventCanceled)return Le;if(S)return he=ce,Pt(),this._hideClone(),pe("revert"),te.eventCanceled||(Fe?ce.insertBefore(V,Fe):ce.appendChild(V)),Ve(!0);var ke=G(p,M.draggable);if(!ke||uc(a,Ee,this)&&!ke.animated){if(ke===V)return Ve(!1);if(ke&&p===a.target&&(u=ke),u&&(b=x(u)),gr(ce,p,V,m,u,b,a,!!u)!==!1)return Pt(),ke&&ke.nextSibling?p.insertBefore(V,ke.nextSibling):p.appendChild(V),he=p,Nt(),Ve(!0)}else if(ke&&cc(a,Ee,this)){var en=j(p,0,M,!0);if(en===V)return Ve(!1);if(u=en,b=x(u),gr(ce,p,V,m,u,b,a,!1)!==!1)return Pt(),p.insertBefore(V,en),he=p,Nt(),Ve(!0)}else if(u.parentNode===p){b=x(u);var yt=0,tn,Wn=V.parentNode!==p,bn=!ic(V.animated&&V.toRect||m,u.animated&&u.toRect||b,Ee),nt=Ee?"top":"left",Wt=U(u,"top","top")||U(V,"top","top"),Tr=Wt?Wt.scrollTop:void 0;et!==u&&(tn=b[nt],tt=!1,Vt=!bn&&M.invertSwap||Wn),yt=dc(a,u,b,Ee,bn?1:M.swapThreshold,M.invertedSwapThreshold==null?M.swapThreshold:M.invertedSwapThreshold,Vt,et===u);var xt;if(yt!==0){var Rn=X(V);do Rn-=yt,xt=he.children[Rn];while(xt&&(O(xt,"display")==="none"||xt===re))}if(yt===0||xt===u)return Ve(!1);et=u,Ht=yt;var nn=u.nextElementSibling,$t=!1;$t=yt===1;var rn=gr(ce,p,V,m,u,b,a,$t);if(rn!==!1)return(rn===1||rn===-1)&&($t=rn===1),Zt=!0,setTimeout(lc,30),Pt(),$t&&!nn?p.appendChild(V):u.parentNode.insertBefore(V,$t?nn:u),Wt&&me(Wt,0,Tr-Wt.scrollTop),he=V.parentNode,tn!==void 0&&!Vt&&(Lt=Math.abs(tn-x(u)[nt])),Nt(),Ve(!0)}if(p.contains(V))return Ve(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){_(document,"mousemove",this._onTouchMove),_(document,"touchmove",this._onTouchMove),_(document,"pointermove",this._onTouchMove),_(document,"dragover",Jt),_(document,"mousemove",Jt),_(document,"touchmove",Jt)},_offUpEvents:function(){var a=this.el.ownerDocument;_(a,"mouseup",this._onDrop),_(a,"touchend",this._onDrop),_(a,"pointerup",this._onDrop),_(a,"touchcancel",this._onDrop),_(document,"selectstart",this)},_onDrop:function(a){var p=this.el,u=this.options;if(Ne=X(V),Je=X(V,u.draggable),De("drop",this,{evt:a}),he=V&&V.parentNode,Ne=X(V),Je=X(V,u.draggable),te.eventCanceled){this._nulling();return}Ut=!1,Vt=!1,tt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Bi(this.cloneId),Bi(this._dragStartId),this.nativeDraggable&&(_(document,"drop",this),_(p,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),v&&O(document.body,"user-select",""),O(V,"transform",""),a&&(Be&&(a.cancelable&&a.preventDefault(),!u.dropBubble&&a.stopPropagation()),re&&re.parentNode&&re.parentNode.removeChild(re),(ce===he||Ce&&Ce.lastPutMode!=="clone")&&de&&de.parentNode&&de.parentNode.removeChild(de),V&&(this.nativeDraggable&&_(V,"dragend",this),xi(V),V.style["will-change"]="",Be&&!Ut&&A(V,Ce?Ce.options.ghostClass:this.options.ghostClass,!1),A(V,this.options.chosenClass,!1),ye({sortable:this,name:"unchoose",toEl:he,newIndex:null,newDraggableIndex:null,originalEvent:a}),ce!==he?(Ne>=0&&(ye({rootEl:he,name:"add",toEl:he,fromEl:ce,originalEvent:a}),ye({sortable:this,name:"remove",toEl:he,originalEvent:a}),ye({rootEl:he,name:"sort",toEl:he,fromEl:ce,originalEvent:a}),ye({sortable:this,name:"sort",toEl:he,originalEvent:a})),Ce&&Ce.save()):Ne!==ht&&Ne>=0&&(ye({sortable:this,name:"update",toEl:he,originalEvent:a}),ye({sortable:this,name:"sort",toEl:he,originalEvent:a})),te.active&&((Ne==null||Ne===-1)&&(Ne=ht,Je=_t),ye({sortable:this,name:"end",toEl:he,originalEvent:a}),this.save()))),this._nulling()},_nulling:function(){De("nulling",this),ce=V=he=re=Fe=de=It=ze=C=Y=Be=Ne=Je=ht=_t=et=Ht=Ce=In=te.dragged=te.ghost=te.clone=te.active=null,Mt.forEach(function(a){a.checked=!0}),Mt.length=ee=ue=0},handleEvent:function(a){switch(a.type){case"drop":case"dragend":this._onDrop(a);break;case"dragenter":case"dragover":V&&(this._onDragOver(a),ac(a));break;case"selectstart":a.preventDefault();break}},toArray:function(){for(var a=[],p,u=this.el.children,m=0,b=u.length,S=this.options;m<b;m++)p=u[m],h(p,S.draggable,this.el,!1)&&a.push(p.getAttribute(S.dataIdAttr)||pc(p));return a},sort:function(a,p){var u={},m=this.el;this.toArray().forEach(function(b,S){var M=m.children[S];h(M,this.options.draggable,m,!1)&&(u[b]=M)},this),p&&this.captureAnimationState(),a.forEach(function(b){u[b]&&(m.removeChild(u[b]),m.appendChild(u[b]))}),p&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,p){return h(a,p||this.options.draggable,this.el,!1)},option:function(a,p){var u=this.options;if(p===void 0)return u[a];var m=Tt.modifyOption(this,a,p);typeof m<"u"?u[a]=m:u[a]=p,a==="group"&&cs(u)},destroy:function(){De("destroy",this);var a=this.el;a[Q]=null,_(a,"mousedown",this._onTapStart),_(a,"touchstart",this._onTapStart),_(a,"pointerdown",this._onTapStart),this.nativeDraggable&&(_(a,"dragover",this),_(a,"dragenter",this)),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(p){p.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),yn.splice(yn.indexOf(this.el),1),this.el=a=null},_hideClone:function(){if(!ze){if(De("hideClone",this),te.eventCanceled)return;O(de,"display","none"),this.options.removeCloneOnHide&&de.parentNode&&de.parentNode.removeChild(de),ze=!0}},_showClone:function(a){if(a.lastPutMode!=="clone"){this._hideClone();return}if(ze){if(De("showClone",this),te.eventCanceled)return;V.parentNode==ce&&!this.options.group.revertClone?ce.insertBefore(de,V):Fe?ce.insertBefore(de,Fe):ce.appendChild(de),this.options.group.revertClone&&this.animate(V,de),O(de,"display",""),ze=!1}}};function ac(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault()}function gr(a,p,u,m,b,S,M,$){var F,K=a[Q],Z=K.options.onMove,ne;return window.CustomEvent&&!d&&!f?F=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(F=document.createEvent("Event"),F.initEvent("move",!0,!0)),F.to=p,F.from=a,F.dragged=u,F.draggedRect=m,F.related=b||p,F.relatedRect=S||x(p),F.willInsertAfter=$,F.originalEvent=M,a.dispatchEvent(F),Z&&(ne=Z.call(K,F,M)),ne}function xi(a){a.draggable=!1}function lc(){Zt=!1}function cc(a,p,u){var m=x(j(u.el,0,u.options,!0)),b=10;return p?a.clientX<m.left-b||a.clientY<m.top&&a.clientX<m.right:a.clientY<m.top-b||a.clientY<m.bottom&&a.clientX<m.left}function uc(a,p,u){var m=x(G(u.el,u.options.draggable)),b=10;return p?a.clientX>m.right+b||a.clientX<=m.right&&a.clientY>m.bottom&&a.clientX>=m.left:a.clientX>m.right&&a.clientY>m.top||a.clientX<=m.right&&a.clientY>m.bottom+b}function dc(a,p,u,m,b,S,M,$){var F=m?a.clientY:a.clientX,K=m?u.height:u.width,Z=m?u.top:u.left,ne=m?u.bottom:u.right,Ee=!1;if(!M){if($&&Lt<K*b){if(!tt&&(Ht===1?F>Z+K*S/2:F<ne-K*S/2)&&(tt=!0),tt)Ee=!0;else if(Ht===1?F<Z+Lt:F>ne-Lt)return-Ht}else if(F>Z+K*(1-b)/2&&F<ne-K*(1-b)/2)return fc(p)}return Ee=Ee||M,Ee&&(F<Z+K*S/2||F>ne-K*S/2)?F>Z+K/2?1:-1:0}function fc(a){return X(V)<X(a)?1:-1}function pc(a){for(var p=a.tagName+a.className+a.src+a.href+a.textContent,u=p.length,m=0;u--;)m+=p.charCodeAt(u);return m.toString(36)}function hc(a){Mt.length=0;for(var p=a.getElementsByTagName("input"),u=p.length;u--;){var m=p[u];m.checked&&Mt.push(m)}}function mr(a){return setTimeout(a,0)}function Bi(a){return clearTimeout(a)}pr&&y(document,"touchmove",function(a){(te.active||Ut)&&a.cancelable&&a.preventDefault()}),te.utils={on:y,off:_,css:O,find:k,is:function(a,p){return!!h(a,p,a,!1)},extend:z,throttle:we,closest:h,toggleClass:A,clone:Pe,index:X,nextTick:mr,cancelNextTick:Bi,detectDirection:ls,getChild:j},te.get=function(a){return a[Q]},te.mount=function(){for(var a=arguments.length,p=new Array(a),u=0;u<a;u++)p[u]=arguments[u];p[0].constructor===Array&&(p=p[0]),p.forEach(function(m){if(!m.prototype||!m.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(m));m.utils&&(te.utils=t(t({},te.utils),m.utils)),Tt.mount(m)})},te.create=function(a,p){return new te(a,p)},te.version=l;var Ae=[],Hn,Gi,Fi=!1,ki,Ui,Er,Vn;function gc(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var p in this)p.charAt(0)==="_"&&typeof this[p]=="function"&&(this[p]=this[p].bind(this))}return a.prototype={dragStarted:function(p){var u=p.originalEvent;this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):this.options.supportPointer?y(document,"pointermove",this._handleFallbackAutoScroll):u.touches?y(document,"touchmove",this._handleFallbackAutoScroll):y(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(p){var u=p.originalEvent;!this.options.dragOverBubble&&!u.rootEl&&this._handleAutoScroll(u)},drop:function(){this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):(_(document,"pointermove",this._handleFallbackAutoScroll),_(document,"touchmove",this._handleFallbackAutoScroll),_(document,"mousemove",this._handleFallbackAutoScroll)),fs(),vr(),Ye()},nulling:function(){Er=Gi=Hn=Fi=Vn=ki=Ui=null,Ae.length=0},_handleFallbackAutoScroll:function(p){this._handleAutoScroll(p,!0)},_handleAutoScroll:function(p,u){var m=this,b=(p.touches?p.touches[0]:p).clientX,S=(p.touches?p.touches[0]:p).clientY,M=document.elementFromPoint(b,S);if(Er=p,u||this.options.forceAutoScrollFallback||f||d||v){Hi(p,this.options,M,u);var $=H(M,!0);Fi&&(!Vn||b!==ki||S!==Ui)&&(Vn&&fs(),Vn=setInterval(function(){var F=H(document.elementFromPoint(b,S),!0);F!==$&&($=F,vr()),Hi(p,m.options,F,u)},10),ki=b,Ui=S)}else{if(!this.options.bubbleScroll||H(M,!0)===W()){vr();return}Hi(p,this.options,H(M,!1),!1)}}},i(a,{pluginName:"scroll",initializeByDefault:!0})}function vr(){Ae.forEach(function(a){clearInterval(a.pid)}),Ae=[]}function fs(){clearInterval(Vn)}var Hi=we(function(a,p,u,m){if(p.scroll){var b=(a.touches?a.touches[0]:a).clientX,S=(a.touches?a.touches[0]:a).clientY,M=p.scrollSensitivity,$=p.scrollSpeed,F=W(),K=!1,Z;Gi!==u&&(Gi=u,vr(),Hn=p.scroll,Z=p.scrollFn,Hn===!0&&(Hn=H(u,!0)));var ne=0,Ee=Hn;do{var se=Ee,Le=x(se),pe=Le.top,Pt=Le.bottom,Ve=Le.left,Nt=Le.right,ke=Le.width,en=Le.height,yt=void 0,tn=void 0,Wn=se.scrollWidth,bn=se.scrollHeight,nt=O(se),Wt=se.scrollLeft,Tr=se.scrollTop;se===F?(yt=ke<Wn&&(nt.overflowX==="auto"||nt.overflowX==="scroll"||nt.overflowX==="visible"),tn=en<bn&&(nt.overflowY==="auto"||nt.overflowY==="scroll"||nt.overflowY==="visible")):(yt=ke<Wn&&(nt.overflowX==="auto"||nt.overflowX==="scroll"),tn=en<bn&&(nt.overflowY==="auto"||nt.overflowY==="scroll"));var xt=yt&&(Math.abs(Nt-b)<=M&&Wt+ke<Wn)-(Math.abs(Ve-b)<=M&&!!Wt),Rn=tn&&(Math.abs(Pt-S)<=M&&Tr+en<bn)-(Math.abs(pe-S)<=M&&!!Tr);if(!Ae[ne])for(var nn=0;nn<=ne;nn++)Ae[nn]||(Ae[nn]={});(Ae[ne].vx!=xt||Ae[ne].vy!=Rn||Ae[ne].el!==se)&&(Ae[ne].el=se,Ae[ne].vx=xt,Ae[ne].vy=Rn,clearInterval(Ae[ne].pid),(xt!=0||Rn!=0)&&(K=!0,Ae[ne].pid=setInterval(function(){m&&this.layer===0&&te.active._onTouchMove(Er);var $t=Ae[this.layer].vy?Ae[this.layer].vy*$:0,rn=Ae[this.layer].vx?Ae[this.layer].vx*$:0;typeof Z=="function"&&Z.call(te.dragged.parentNode[Q],rn,$t,a,Er,Ae[this.layer].el)!=="continue"||me(Ae[this.layer].el,rn,$t)}.bind({layer:ne}),24))),ne++}while(p.bubbleScroll&&Ee!==F&&(Ee=H(Ee,!1)));Fi=K}},30),ps=function(a){var p=a.originalEvent,u=a.putSortable,m=a.dragEl,b=a.activeSortable,S=a.dispatchSortableEvent,M=a.hideGhostForTarget,$=a.unhideGhostForTarget;if(p){var F=u||b;M();var K=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:p,Z=document.elementFromPoint(K.clientX,K.clientY);$(),F&&!F.el.contains(Z)&&(S("spill"),this.onSpill({dragEl:m,putSortable:u}))}};function Vi(){}Vi.prototype={startIndex:null,dragStart:function(a){var p=a.oldDraggableIndex;this.startIndex=p},onSpill:function(a){var p=a.dragEl,u=a.putSortable;this.sortable.captureAnimationState(),u&&u.captureAnimationState();var m=j(this.sortable.el,this.startIndex,this.options);m?this.sortable.el.insertBefore(p,m):this.sortable.el.appendChild(p),this.sortable.animateAll(),u&&u.animateAll()},drop:ps},i(Vi,{pluginName:"revertOnSpill"});function Wi(){}Wi.prototype={onSpill:function(a){var p=a.dragEl,u=a.putSortable,m=u||this.sortable;m.captureAnimationState(),p.parentNode&&p.parentNode.removeChild(p),m.animateAll()},drop:ps},i(Wi,{pluginName:"removeOnSpill"}),te.mount(new gc),te.mount(Wi,Vi);var mc=te;window.Sortable=mc;var hs=a=>{let p=Array.from(a.childNodes).filter(u=>u.nodeType===8&&["[if ENDBLOCK]><![endif]","__ENDBLOCK__"].includes(u.nodeValue?.trim()))[0];p&&a.appendChild(p)};window.Livewire?.directive("sortable",({el:a,directive:p,component:u})=>{if(p.modifiers.length>0)return;let m={};a.hasAttribute("wire:sortable.options")&&(m=new Function(`return ${a.getAttribute("wire:sortable.options")};`)()),a.livewire_sortable=window.Sortable.create(a,{sort:!0,...m,draggable:"[wire\\:sortable\\.item]",handle:a.querySelector("[wire\\:sortable\\.handle]")?"[wire\\:sortable\\.handle]":null,dataIdAttr:"wire:sortable.item",group:{pull:!1,put:!1,...m.group,name:a.getAttribute("wire:sortable")},store:{...m.store,set:function(M){let $=M.toArray().map((F,K)=>({order:K+1,value:F}));hs(a),u.$wire.call(p.method,$)}}});let b=a.querySelector("[wire\\:sortable\\.item]")!==null;if(b)return;let S=u;Livewire.hook("commit",({component:M,succeed:$})=>{M.id===S.id&&(b||$(()=>{queueMicrotask(()=>{a.livewire_sortable.option("handle",a.querySelector("[wire\\:sortable\\.handle]")?"[wire\\:sortable\\.handle]":null),b=a.querySelector("[wire\\:sortable\\.item]")!==null})}))})}),window.Livewire?.directive("sortable-group",({el:a,directive:p,component:u})=>{if(!p.modifiers.includes("item-group"))return;let m={};a.hasAttribute("wire:sortable-group.options")&&(m=new Function(`return ${a.getAttribute("wire:sortable-group.options")};`)()),a.livewire_sortable=window.Sortable.create(a,{sort:!0,...m,draggable:"[wire\\:sortable-group\\.item]",handle:"[wire\\:sortable-group\\.handle]",dataIdAttr:"wire:sortable-group.item",group:{pull:!0,put:!0,...m.group,name:a.closest("[wire\\:sortable-group]").getAttribute("wire:sortable-group")},onSort:b=>{if(b.to!==b.from&&a===b.from)return;let S=a.closest("[wire\\:sortable-group]"),M=Array.from(S.querySelectorAll("[wire\\:sortable-group\\.item-group]")).map(($,F)=>(hs($),{order:F+1,value:$.getAttribute("wire:sortable-group.item-group"),items:$.livewire_sortable.toArray().map((K,Z)=>({order:Z+1,value:K}))}));u.$wire.call(S.getAttribute("wire:sortable-group"),M)}})})})();/*! Bundled license information:

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.0
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*//*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const kc=e=>e instanceof HTMLElement,Uc=(e,t=[],n=[])=>{const r={...e},i=[],s=[],o=()=>({...r}),l=()=>{const E=[...i];return i.length=0,E},c=()=>{const E=[...s];s.length=0,E.forEach(({type:w,data:y})=>{d(w,y)})},d=(E,w,y)=>{if(y&&!document.hidden){s.push({type:E,data:w});return}I[E]&&I[E](w),i.push({type:E,data:w})},f=(E,...w)=>v[E]?v[E](...w):null,g={getState:o,processActionQueue:l,processDispatchQueue:c,dispatch:d,query:f};let v={};t.forEach(E=>{v={...E(r),...v}});let I={};return n.forEach(E=>{I={...E(d,f,r),...I}}),g},Hc=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},Ie=(e,t)=>{for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])},Xt=e=>{const t={};return Ie(e,n=>{Hc(t,n,e[n])}),t},Oe=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},Vc="http://www.w3.org/2000/svg",Wc=["svg","path"],ms=e=>Wc.includes(e),Hr=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const r=ms(e)?document.createElementNS(Vc,e):document.createElement(e);return t&&(ms(e)?Oe(r,"class",t):r.className=t),Ie(n,(i,s)=>{Oe(r,i,s)}),r},$c=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},qc=(e,t)=>(n,r)=>(typeof r<"u"?t.splice(r,0,n):t.push(n),n),Yc=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),zc=typeof window<"u"&&typeof window.document<"u",Ba=()=>zc,jc=Ba()?Hr("svg"):{},Xc="children"in jc?e=>e.children.length:e=>e.childNodes.length,Ga=(e,t,n,r)=>{const i=n[0]||e.left,s=n[1]||e.top,o=i+e.width,l=s+e.height*(r[1]||1),c={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:i,top:s,right:o,bottom:l}};return t.filter(d=>!d.isRectIgnored()).map(d=>d.rect).forEach(d=>{Es(c.inner,{...d.inner}),Es(c.outer,{...d.outer})}),vs(c.inner),c.outer.bottom+=c.element.marginBottom,c.outer.right+=c.element.marginRight,vs(c.outer),c},Es=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},vs=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},ln=e=>typeof e=="number",Kc=(e,t,n,r=.001)=>Math.abs(e-t)<r&&Math.abs(n)<r,Qc=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let r=null,i=null,s=0,o=!1;const d=Xt({interpolate:(f,g)=>{if(o)return;if(!(ln(r)&&ln(i))){o=!0,s=0;return}const v=-(i-r)*e;s+=v/n,i+=s,s*=t,Kc(i,r,s)||g?(i=r,s=0,o=!0,d.onupdate(i),d.oncomplete(i)):d.onupdate(i)},target:{set:f=>{if(ln(f)&&!ln(i)&&(i=f),r===null&&(r=f,i=f),r=f,i===r||typeof r>"u"){o=!0,s=0,d.onupdate(i),d.oncomplete(i);return}o=!1},get:()=>r},resting:{get:()=>o},onupdate:f=>{},oncomplete:f=>{}});return d},Zc=e=>e<.5?2*e*e:-1+(4-2*e)*e,Jc=({duration:e=500,easing:t=Zc,delay:n=0}={})=>{let r=null,i,s,o=!0,l=!1,c=null;const f=Xt({interpolate:(g,v)=>{o||c===null||(r===null&&(r=g),!(g-r<n)&&(i=g-r-n,i>=e||v?(i=1,s=l?0:1,f.onupdate(s*c),f.oncomplete(s*c),o=!0):(s=i/e,f.onupdate((i>=0?t(l?1-s:s):0)*c))))},target:{get:()=>l?0:c,set:g=>{if(c===null){c=g,f.onupdate(g),f.oncomplete(g);return}g<c?(c=1,l=!0):(l=!1,c=g),o=!1,r=null}},resting:{get:()=>o},onupdate:g=>{},oncomplete:g=>{}});return f},Ts={spring:Qc,tween:Jc},eu=(e,t,n)=>{const r=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,i=typeof r=="string"?r:r.type,s=typeof r=="object"?{...r}:{};return Ts[i]?Ts[i](s):null},Mo=(e,t,n,r=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(i=>{e.forEach(s=>{let o=s,l=()=>n[s],c=d=>n[s]=d;typeof s=="object"&&(o=s.key,l=s.getter||l,c=s.setter||c),!(i[o]&&!r)&&(i[o]={get:l,set:c})})})},tu=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r})=>{const i={...t},s=[];return Ie(e,(o,l)=>{const c=eu(l);if(!c)return;c.onupdate=f=>{t[o]=f},c.target=i[o],Mo([{key:o,setter:f=>{c.target!==f&&(c.target=f)},getter:()=>t[o]}],[n,r],t,!0),s.push(c)}),{write:o=>{let l=document.hidden,c=!0;return s.forEach(d=>{d.resting||(c=!1),d.interpolate(o,l)}),c},destroy:()=>{}}},nu=e=>(t,n)=>{e.addEventListener(t,n)},ru=e=>(t,n)=>{e.removeEventListener(t,n)},iu=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,viewState:i,view:s})=>{const o=[],l=nu(s.element),c=ru(s.element);return r.on=(d,f)=>{o.push({type:d,fn:f}),l(d,f)},r.off=(d,f)=>{o.splice(o.findIndex(g=>g.type===d&&g.fn===f),1),c(d,f)},{write:()=>!0,destroy:()=>{o.forEach(d=>{c(d.type,d.fn)})}}},ou=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{Mo(e,n,t)},We=e=>e!=null,su={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},au=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,view:i})=>{const s={...t},o={};Mo(e,[n,r],t);const l=()=>[t.translateX||0,t.translateY||0],c=()=>[t.scaleX||0,t.scaleY||0],d=()=>i.rect?Ga(i.rect,i.childViews,l(),c()):null;return n.rect={get:d},r.rect={get:d},e.forEach(f=>{t[f]=typeof s[f]>"u"?su[f]:s[f]}),{write:()=>{if(lu(o,t))return cu(i.element,t),Object.assign(o,{...t}),!0},destroy:()=>{}}},lu=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},cu=(e,{opacity:t,perspective:n,translateX:r,translateY:i,scaleX:s,scaleY:o,rotateX:l,rotateY:c,rotateZ:d,originX:f,originY:g,width:v,height:I})=>{let E="",w="";(We(f)||We(g))&&(w+=`transform-origin: ${f||0}px ${g||0}px;`),We(n)&&(E+=`perspective(${n}px) `),(We(r)||We(i))&&(E+=`translate3d(${r||0}px, ${i||0}px, 0) `),(We(s)||We(o))&&(E+=`scale3d(${We(s)?s:1}, ${We(o)?o:1}, 1) `),We(d)&&(E+=`rotateZ(${d}rad) `),We(l)&&(E+=`rotateX(${l}rad) `),We(c)&&(E+=`rotateY(${c}rad) `),E.length&&(w+=`transform:${E};`),We(t)&&(w+=`opacity:${t};`,t===0&&(w+="visibility:hidden;"),t<1&&(w+="pointer-events:none;")),We(I)&&(w+=`height:${I}px;`),We(v)&&(w+=`width:${v}px;`);const y=e.elementCurrentStyle||"";(w.length!==y.length||w!==y)&&(e.style.cssText=w,e.elementCurrentStyle=w)},uu={styles:au,listeners:iu,animations:tu,apis:ou},Is=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),Se=({tag:e="div",name:t=null,attributes:n={},read:r=()=>{},write:i=()=>{},create:s=()=>{},destroy:o=()=>{},filterFrameActionsForChild:l=(I,E)=>E,didCreateView:c=()=>{},didWriteView:d=()=>{},ignoreRect:f=!1,ignoreRectUpdate:g=!1,mixins:v=[]}={})=>(I,E={})=>{const w=Hr(e,`filepond--${t}`,n),y=window.getComputedStyle(w,null),_=Is();let T=null,R=!1;const h=[],D=[],A={},O={},P=[i],k=[r],W=[o],x=()=>w,U=()=>h.concat(),j=()=>A,G=Q=>(ge,_e)=>ge(Q,_e),X=()=>T||(T=Ga(_,h,[0,0],[1,1]),T),L=()=>y,N=()=>{T=null,h.forEach(_e=>_e._read()),!(g&&_.width&&_.height)&&Is(_,w,y);const ge={root:me,props:E,rect:_};k.forEach(_e=>_e(ge))},H=(Q,ge,_e)=>{let Ue=ge.length===0;return P.forEach(fe=>{fe({props:E,root:me,actions:ge,timestamp:Q,shouldOptimize:_e})===!1&&(Ue=!1)}),D.forEach(fe=>{fe.write(Q)===!1&&(Ue=!1)}),h.filter(fe=>!!fe.element.parentNode).forEach(fe=>{fe._write(Q,l(fe,ge),_e)||(Ue=!1)}),h.forEach((fe,He)=>{fe.element.parentNode||(me.appendChild(fe.element,He),fe._read(),fe._write(Q,l(fe,ge),_e),Ue=!1)}),R=Ue,d({props:E,root:me,actions:ge,timestamp:Q}),Ue},z=()=>{D.forEach(Q=>Q.destroy()),W.forEach(Q=>{Q({root:me,props:E})}),h.forEach(Q=>Q._destroy())},J={element:{get:x},style:{get:L},childViews:{get:U}},oe={...J,rect:{get:X},ref:{get:j},is:Q=>t===Q,appendChild:$c(w),createChildView:G(I),linkView:Q=>(h.push(Q),Q),unlinkView:Q=>{h.splice(h.indexOf(Q),1)},appendChildView:qc(w,h),removeChildView:Yc(w,h),registerWriter:Q=>P.push(Q),registerReader:Q=>k.push(Q),registerDestroyer:Q=>W.push(Q),invalidateLayout:()=>w.layoutCalculated=!1,dispatch:I.dispatch,query:I.query},we={element:{get:x},childViews:{get:U},rect:{get:X},resting:{get:()=>R},isRectIgnored:()=>f,_read:N,_write:H,_destroy:z},Ye={...J,rect:{get:()=>_}};Object.keys(v).sort((Q,ge)=>Q==="styles"?1:ge==="styles"?-1:0).forEach(Q=>{const ge=uu[Q]({mixinConfig:v[Q],viewProps:E,viewState:O,viewInternalAPI:oe,viewExternalAPI:we,view:Xt(Ye)});ge&&D.push(ge)});const me=Xt(oe);s({root:me,props:E});const Pe=Xc(w);return h.forEach((Q,ge)=>{me.appendChild(Q.element,Pe+ge)}),c(me),Xt(we)},du=(e,t,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(e),window[r].writers.push(t);return}window[r]={readers:[e],writers:[t]};const i=window[r],s=1e3/n;let o=null,l=null,c=null,d=null;const f=()=>{document.hidden?(c=()=>window.setTimeout(()=>g(performance.now()),s),d=()=>window.clearTimeout(l)):(c=()=>window.requestAnimationFrame(g),d=()=>window.cancelAnimationFrame(l))};document.addEventListener("visibilitychange",()=>{d&&d(),f(),g(performance.now())});const g=v=>{l=c(g),o||(o=v);const I=v-o;I<=s||(o=v-I%s,i.readers.forEach(E=>E()),i.writers.forEach(E=>E(v)))};return f(),g(performance.now()),{pause:()=>{d(l)}}},qe=(e,t)=>({root:n,props:r,actions:i=[],timestamp:s,shouldOptimize:o})=>{i.filter(l=>e[l.type]).forEach(l=>e[l.type]({root:n,props:r,action:l.data,timestamp:s,shouldOptimize:o})),t&&t({root:n,props:r,actions:i,timestamp:s,shouldOptimize:o})},_s=(e,t)=>t.parentNode.insertBefore(e,t),ys=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),wi=e=>Array.isArray(e),Gt=e=>e==null,fu=e=>e.trim(),Ai=e=>""+e,pu=(e,t=",")=>Gt(e)?[]:wi(e)?e:Ai(e).split(t).map(fu).filter(n=>n.length),Fa=e=>typeof e=="boolean",ka=e=>Fa(e)?e:e==="true",$e=e=>typeof e=="string",Ua=e=>ln(e)?e:$e(e)?Ai(e).replace(/[a-z]+/gi,""):0,Nr=e=>parseInt(Ua(e),10),bs=e=>parseFloat(Ua(e)),kn=e=>ln(e)&&isFinite(e)&&Math.floor(e)===e,Rs=(e,t=1e3)=>{if(kn(e))return e;let n=Ai(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),Nr(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),Nr(n)*t):Nr(n)},cn=e=>typeof e=="function",hu=e=>{let t=self,n=e.split("."),r=null;for(;r=n.shift();)if(t=t[r],!t)return null;return t},ws={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},gu=e=>{const t={};return t.url=$e(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},Ie(ws,n=>{t[n]=mu(n,e[n],ws[n],t.timeout,t.headers)}),t.process=e.process||$e(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},mu=(e,t,n,r,i)=>{if(t===null)return null;if(typeof t=="function")return t;const s={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:i,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if($e(t))return s.url=t,s;if(Object.assign(s,t),$e(s.headers)){const o=s.headers.split(/:(.+)/);s.headers={header:o[0],value:o[1]}}return s.withCredentials=ka(s.withCredentials),s},Eu=e=>gu(e),vu=e=>e===null,Ge=e=>typeof e=="object"&&e!==null,Tu=e=>Ge(e)&&$e(e.url)&&Ge(e.process)&&Ge(e.revert)&&Ge(e.restore)&&Ge(e.fetch),so=e=>wi(e)?"array":vu(e)?"null":kn(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":Tu(e)?"api":typeof e,Iu=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),_u={array:pu,boolean:ka,int:e=>so(e)==="bytes"?Rs(e):Nr(e),number:bs,float:bs,bytes:Rs,string:e=>cn(e)?e:Ai(e),function:e=>hu(e),serverapi:Eu,object:e=>{try{return JSON.parse(Iu(e))}catch{return null}}},yu=(e,t)=>_u[t](e),Ha=(e,t,n)=>{if(e===t)return e;let r=so(e);if(r!==n){const i=yu(e,n);if(r=so(i),i===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=i}return e},bu=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:r=>{n=Ha(r,e,t)}}},Ru=e=>{const t={};return Ie(e,n=>{const r=e[n];t[n]=bu(r[0],r[1])}),Xt(t)},wu=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Ru(e)}),Oi=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),Au=(e,t)=>{const n={};return Ie(t,r=>{n[r]={get:()=>e.getState().options[r],set:i=>{e.dispatch(`SET_${Oi(r,"_").toUpperCase()}`,{value:i})}}}),n},Ou=e=>(t,n,r)=>{const i={};return Ie(e,s=>{const o=Oi(s,"_").toUpperCase();i[`SET_${o}`]=l=>{try{r.options[s]=l.value}catch{}t(`DID_SET_${o}`,{value:r.options[s]})}}),i},Su=e=>t=>{const n={};return Ie(e,r=>{n[`GET_${Oi(r,"_").toUpperCase()}`]=i=>t.options[r]}),n},ut={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Po=()=>Math.random().toString(36).substring(2,11),No=(e,t)=>e.splice(t,1),Du=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},Si=()=>{const e=[],t=(r,i)=>{No(e,e.findIndex(s=>s.event===r&&(s.cb===i||!i)))},n=(r,i,s)=>{e.filter(o=>o.event===r).map(o=>o.cb).forEach(o=>Du(()=>o(...i),s))};return{fireSync:(r,...i)=>{n(r,i,!0)},fire:(r,...i)=>{n(r,i,!1)},on:(r,i)=>{e.push({event:r,cb:i})},onOnce:(r,i)=>{e.push({event:r,cb:(...s)=>{t(r,i),i(...s)}})},off:t}},Va=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},Cu=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],je=e=>{const t={};return Va(e,t,Cu),t},Lu=e=>{e.forEach((t,n)=>{t.released&&No(e,n)})},ie={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Me={INPUT:1,LIMBO:2,LOCAL:3},Wa=e=>/[^0-9]+/.exec(e),$a=()=>Wa(1.1.toLocaleString())[0],Mu=()=>{const e=$a(),t=1e3.toLocaleString();return t!=="1000"?Wa(t)[0]:e==="."?",":"."},B={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},xo=[],gt=(e,t,n)=>new Promise((r,i)=>{const s=xo.filter(l=>l.key===e).map(l=>l.cb);if(s.length===0){r(t);return}const o=s.shift();s.reduce((l,c)=>l.then(d=>c(d,n)),o(t,n)).then(l=>r(l)).catch(l=>i(l))}),En=(e,t,n)=>xo.filter(r=>r.key===e).map(r=>r.cb(t,n)),Pu=(e,t)=>xo.push({key:e,cb:t}),Nu=e=>Object.assign(Sn,e),Vr=()=>({...Sn}),xu=e=>{Ie(e,(t,n)=>{Sn[t]&&(Sn[t][0]=Ha(n,Sn[t][0],Sn[t][1]))})},Sn={id:[null,B.STRING],name:["filepond",B.STRING],disabled:[!1,B.BOOLEAN],className:[null,B.STRING],required:[!1,B.BOOLEAN],captureMethod:[null,B.STRING],allowSyncAcceptAttribute:[!0,B.BOOLEAN],allowDrop:[!0,B.BOOLEAN],allowBrowse:[!0,B.BOOLEAN],allowPaste:[!0,B.BOOLEAN],allowMultiple:[!1,B.BOOLEAN],allowReplace:[!0,B.BOOLEAN],allowRevert:[!0,B.BOOLEAN],allowRemove:[!0,B.BOOLEAN],allowProcess:[!0,B.BOOLEAN],allowReorder:[!1,B.BOOLEAN],allowDirectoriesOnly:[!1,B.BOOLEAN],storeAsFile:[!1,B.BOOLEAN],forceRevert:[!1,B.BOOLEAN],maxFiles:[null,B.INT],checkValidity:[!1,B.BOOLEAN],itemInsertLocationFreedom:[!0,B.BOOLEAN],itemInsertLocation:["before",B.STRING],itemInsertInterval:[75,B.INT],dropOnPage:[!1,B.BOOLEAN],dropOnElement:[!0,B.BOOLEAN],dropValidation:[!1,B.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],B.ARRAY],instantUpload:[!0,B.BOOLEAN],maxParallelUploads:[2,B.INT],allowMinimumUploadDuration:[!0,B.BOOLEAN],chunkUploads:[!1,B.BOOLEAN],chunkForce:[!1,B.BOOLEAN],chunkSize:[5e6,B.INT],chunkRetryDelays:[[500,1e3,3e3],B.ARRAY],server:[null,B.SERVER_API],fileSizeBase:[1e3,B.INT],labelFileSizeBytes:["bytes",B.STRING],labelFileSizeKilobytes:["KB",B.STRING],labelFileSizeMegabytes:["MB",B.STRING],labelFileSizeGigabytes:["GB",B.STRING],labelDecimalSeparator:[$a(),B.STRING],labelThousandsSeparator:[Mu(),B.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',B.STRING],labelInvalidField:["Field contains invalid files",B.STRING],labelFileWaitingForSize:["Waiting for size",B.STRING],labelFileSizeNotAvailable:["Size not available",B.STRING],labelFileCountSingular:["file in list",B.STRING],labelFileCountPlural:["files in list",B.STRING],labelFileLoading:["Loading",B.STRING],labelFileAdded:["Added",B.STRING],labelFileLoadError:["Error during load",B.STRING],labelFileRemoved:["Removed",B.STRING],labelFileRemoveError:["Error during remove",B.STRING],labelFileProcessing:["Uploading",B.STRING],labelFileProcessingComplete:["Upload complete",B.STRING],labelFileProcessingAborted:["Upload cancelled",B.STRING],labelFileProcessingError:["Error during upload",B.STRING],labelFileProcessingRevertError:["Error during revert",B.STRING],labelTapToCancel:["tap to cancel",B.STRING],labelTapToRetry:["tap to retry",B.STRING],labelTapToUndo:["tap to undo",B.STRING],labelButtonRemoveItem:["Remove",B.STRING],labelButtonAbortItemLoad:["Abort",B.STRING],labelButtonRetryItemLoad:["Retry",B.STRING],labelButtonAbortItemProcessing:["Cancel",B.STRING],labelButtonUndoItemProcessing:["Undo",B.STRING],labelButtonRetryItemProcessing:["Retry",B.STRING],labelButtonProcessItem:["Upload",B.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',B.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',B.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',B.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',B.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',B.STRING],oninit:[null,B.FUNCTION],onwarning:[null,B.FUNCTION],onerror:[null,B.FUNCTION],onactivatefile:[null,B.FUNCTION],oninitfile:[null,B.FUNCTION],onaddfilestart:[null,B.FUNCTION],onaddfileprogress:[null,B.FUNCTION],onaddfile:[null,B.FUNCTION],onprocessfilestart:[null,B.FUNCTION],onprocessfileprogress:[null,B.FUNCTION],onprocessfileabort:[null,B.FUNCTION],onprocessfilerevert:[null,B.FUNCTION],onprocessfile:[null,B.FUNCTION],onprocessfiles:[null,B.FUNCTION],onremovefile:[null,B.FUNCTION],onpreparefile:[null,B.FUNCTION],onupdatefiles:[null,B.FUNCTION],onreorderfiles:[null,B.FUNCTION],beforeDropFile:[null,B.FUNCTION],beforeAddFile:[null,B.FUNCTION],beforeRemoveFile:[null,B.FUNCTION],beforePrepareFile:[null,B.FUNCTION],stylePanelLayout:[null,B.STRING],stylePanelAspectRatio:[null,B.STRING],styleItemPanelAspectRatio:[null,B.STRING],styleButtonRemoveItemPosition:["left",B.STRING],styleButtonProcessItemPosition:["right",B.STRING],styleLoadIndicatorPosition:["right",B.STRING],styleProgressIndicatorPosition:["right",B.STRING],styleButtonRemoveItemAlign:[!1,B.BOOLEAN],files:[[],B.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],B.ARRAY]},un=(e,t)=>Gt(t)?e[0]||null:kn(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),qa=e=>{if(Gt(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},mt=e=>e.filter(t=>!t.archived),Ya={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Ir=null;const Bu=()=>{if(Ir===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,Ir=t.files.length===1}catch{Ir=!1}return Ir},Gu=[ie.LOAD_ERROR,ie.PROCESSING_ERROR,ie.PROCESSING_REVERT_ERROR],Fu=[ie.LOADING,ie.PROCESSING,ie.PROCESSING_QUEUED,ie.INIT],ku=[ie.PROCESSING_COMPLETE],Uu=e=>Gu.includes(e.status),Hu=e=>Fu.includes(e.status),Vu=e=>ku.includes(e.status),As=e=>Ge(e.options.server)&&(Ge(e.options.server.process)||cn(e.options.server.process)),Wu=e=>({GET_STATUS:()=>{const t=mt(e.items),{EMPTY:n,ERROR:r,BUSY:i,IDLE:s,READY:o}=Ya;return t.length===0?n:t.some(Uu)?r:t.some(Hu)?i:t.some(Vu)?o:s},GET_ITEM:t=>un(e.items,t),GET_ACTIVE_ITEM:t=>un(mt(e.items),t),GET_ACTIVE_ITEMS:()=>mt(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=un(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=un(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:qa(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>mt(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>mt(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&Bu()&&!As(e),IS_ASYNC:()=>As(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),$u=e=>{const t=mt(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},za=(e,t,n)=>Math.max(Math.min(n,e),t),qu=(e,t,n)=>e.splice(t,0,n),Yu=(e,t,n)=>Gt(t)?null:typeof n>"u"?(e.push(t),t):(n=za(n,0,e.length),qu(e,n,t),t),ao=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),cr=e=>e.split("/").pop().split("?").shift(),Di=e=>e.split(".").pop(),zu=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},qn=(e,t="")=>(t+e).slice(-t.length),ja=(e=new Date)=>`${e.getFullYear()}-${qn(e.getMonth()+1,"00")}-${qn(e.getDate(),"00")}_${qn(e.getHours(),"00")}-${qn(e.getMinutes(),"00")}-${qn(e.getSeconds(),"00")}`,Mn=(e,t,n=null,r=null)=>{const i=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return i.lastModifiedDate=new Date,e._relativePath&&(i._relativePath=e._relativePath),$e(t)||(t=ja()),t&&r===null&&Di(t)?i.name=t:(r=r||zu(i.type),i.name=t+(r?"."+r:"")),i},ju=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Xa=(e,t)=>{const n=ju();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},Xu=(e,t)=>{const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return Xa(n,t)},Ka=e=>(/^data:(.+);/.exec(e)||[])[1]||null,Ku=e=>e.split(",")[1].replace(/\s/g,""),Qu=e=>atob(Ku(e)),Zu=e=>{const t=Ka(e),n=Qu(e);return Xu(n,t)},Ju=(e,t,n)=>Mn(Zu(e),t,null,n),ed=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},td=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},nd=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,Bo=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let r of n){const i=ed(r);if(i){t.name=i;continue}const s=td(r);if(s){t.size=s;continue}const o=nd(r);if(o){t.source=o;continue}}return t},rd=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,r=()=>{t.request&&t.request.abort&&t.request.abort()},i=()=>{const l=t.source;o.fire("init",l),l instanceof File?o.fire("load",l):l instanceof Blob?o.fire("load",Mn(l,l.name)):ao(l)?o.fire("load",Ju(l)):s(l)},s=l=>{if(!e){o.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(l,c=>{t.duration=Date.now()-t.timestamp,t.complete=!0,c instanceof Blob&&(c=Mn(c,c.name||cr(l))),o.fire("load",c instanceof Blob?c:c?c.body:null)},c=>{o.fire("error",typeof c=="string"?{type:"error",code:0,body:c}:c)},(c,d,f)=>{if(f&&(t.size=f),t.duration=Date.now()-t.timestamp,!c){t.progress=null;return}t.progress=d/f,o.fire("progress",t.progress)},()=>{o.fire("abort")},c=>{const d=Bo(typeof c=="string"?c:c.headers);o.fire("meta",{size:t.size||d.size,filename:d.name,source:d.source})})},o={...Si(),setSource:l=>t.source=l,getProgress:n,abort:r,load:i};return o},Os=e=>/GET|HEAD/.test(e),fn=(e,t,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{i=!0,o.abort()}};let i=!1,s=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),Os(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const o=new XMLHttpRequest,l=Os(n.method)?o:o.upload;return l.onprogress=c=>{i||r.onprogress(c.lengthComputable,c.loaded,c.total)},o.onreadystatechange=()=>{o.readyState<2||o.readyState===4&&o.status===0||s||(s=!0,r.onheaders(o))},o.onload=()=>{o.status>=200&&o.status<300?r.onload(o):r.onerror(o)},o.onerror=()=>r.onerror(o),o.onabort=()=>{i=!0,r.onabort()},o.ontimeout=()=>r.ontimeout(o),o.open(n.method,t,!0),kn(n.timeout)&&(o.timeout=n.timeout),Object.keys(n.headers).forEach(c=>{const d=unescape(encodeURIComponent(n.headers[c]));o.setRequestHeader(c,d)}),n.responseType&&(o.responseType=n.responseType),n.withCredentials&&(o.withCredentials=!0),o.send(e),r},be=(e,t,n,r)=>({type:e,code:t,body:n,headers:r}),pn=e=>t=>{e(be("error",0,"Timeout",t.getAllResponseHeaders()))},Ss=e=>/\?/.test(e),Xn=(...e)=>{let t="";return e.forEach(n=>{t+=Ss(t)&&Ss(n)?n.replace(/\?/,"&"):n}),t},$i=(e="",t)=>{if(typeof t=="function")return t;if(!t||!$e(t.url))return null;const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,s,o,l,c,d)=>{const f=fn(i,Xn(e,t.url),{...t,responseType:"blob"});return f.onload=g=>{const v=g.getAllResponseHeaders(),I=Bo(v).name||cr(i);s(be("load",g.status,t.method==="HEAD"?null:Mn(n(g.response),I),v))},f.onerror=g=>{o(be("error",g.status,r(g.response)||g.statusText,g.getAllResponseHeaders()))},f.onheaders=g=>{d(be("headers",g.status,null,g.getAllResponseHeaders()))},f.ontimeout=pn(o),f.onprogress=l,f.onabort=c,f}},ot={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},id=(e,t,n,r,i,s,o,l,c,d,f)=>{const g=[],{chunkTransferId:v,chunkServer:I,chunkSize:E,chunkRetryDelays:w}=f,y={serverId:v,aborted:!1},_=t.ondata||(G=>G),T=t.onload||((G,X)=>X==="HEAD"?G.getResponseHeader("Upload-Offset"):G.response),R=t.onerror||(G=>null),h=G=>{const X=new FormData;Ge(i)&&X.append(n,JSON.stringify(i));const L=typeof t.headers=="function"?t.headers(r,i):{...t.headers,"Upload-Length":r.size},N={...t,headers:L},H=fn(_(X),Xn(e,t.url),N);H.onload=z=>G(T(z,N.method)),H.onerror=z=>o(be("error",z.status,R(z.response)||z.statusText,z.getAllResponseHeaders())),H.ontimeout=pn(o)},D=G=>{const X=Xn(e,I.url,y.serverId),N={headers:typeof t.headers=="function"?t.headers(y.serverId):{...t.headers},method:"HEAD"},H=fn(null,X,N);H.onload=z=>G(T(z,N.method)),H.onerror=z=>o(be("error",z.status,R(z.response)||z.statusText,z.getAllResponseHeaders())),H.ontimeout=pn(o)},A=Math.floor(r.size/E);for(let G=0;G<=A;G++){const X=G*E,L=r.slice(X,X+E,"application/offset+octet-stream");g[G]={index:G,size:L.size,offset:X,data:L,file:r,progress:0,retries:[...w],status:ot.QUEUED,error:null,request:null,timeout:null}}const O=()=>s(y.serverId),P=G=>G.status===ot.QUEUED||G.status===ot.ERROR,k=G=>{if(y.aborted)return;if(G=G||g.find(P),!G){g.every(J=>J.status===ot.COMPLETE)&&O();return}G.status=ot.PROCESSING,G.progress=null;const X=I.ondata||(J=>J),L=I.onerror||(J=>null),N=Xn(e,I.url,y.serverId),H=typeof I.headers=="function"?I.headers(G):{...I.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":G.offset,"Upload-Length":r.size,"Upload-Name":r.name},z=G.request=fn(X(G.data),N,{...I,headers:H});z.onload=()=>{G.status=ot.COMPLETE,G.request=null,U()},z.onprogress=(J,oe,we)=>{G.progress=J?oe:null,x()},z.onerror=J=>{G.status=ot.ERROR,G.request=null,G.error=L(J.response)||J.statusText,W(G)||o(be("error",J.status,L(J.response)||J.statusText,J.getAllResponseHeaders()))},z.ontimeout=J=>{G.status=ot.ERROR,G.request=null,W(G)||pn(o)(J)},z.onabort=()=>{G.status=ot.QUEUED,G.request=null,c()}},W=G=>G.retries.length===0?!1:(G.status=ot.WAITING,clearTimeout(G.timeout),G.timeout=setTimeout(()=>{k(G)},G.retries.shift()),!0),x=()=>{const G=g.reduce((L,N)=>L===null||N.progress===null?null:L+N.progress,0);if(G===null)return l(!1,0,0);const X=g.reduce((L,N)=>L+N.size,0);l(!0,G,X)},U=()=>{g.filter(X=>X.status===ot.PROCESSING).length>=1||k()},j=()=>{g.forEach(G=>{clearTimeout(G.timeout),G.request&&G.request.abort()})};return y.serverId?D(G=>{y.aborted||(g.filter(X=>X.offset<G).forEach(X=>{X.status=ot.COMPLETE,X.progress=X.size}),U())}):h(G=>{y.aborted||(d(G),y.serverId=G,U())}),{abort:()=>{y.aborted=!0,j()}}},od=(e,t,n,r)=>(i,s,o,l,c,d,f)=>{if(!i)return;const g=r.chunkUploads,v=g&&i.size>r.chunkSize,I=g&&(v||r.chunkForce);if(i instanceof Blob&&I)return id(e,t,n,i,s,o,l,c,d,f,r);const E=t.ondata||(D=>D),w=t.onload||(D=>D),y=t.onerror||(D=>null),_=typeof t.headers=="function"?t.headers(i,s)||{}:{...t.headers},T={...t,headers:_};var R=new FormData;Ge(s)&&R.append(n,JSON.stringify(s)),(i instanceof Blob?[{name:null,file:i}]:i).forEach(D=>{R.append(n,D.file,D.name===null?D.file.name:`${D.name}${D.file.name}`)});const h=fn(E(R),Xn(e,t.url),T);return h.onload=D=>{o(be("load",D.status,w(D.response),D.getAllResponseHeaders()))},h.onerror=D=>{l(be("error",D.status,y(D.response)||D.statusText,D.getAllResponseHeaders()))},h.ontimeout=pn(l),h.onprogress=c,h.onabort=d,h},sd=(e="",t,n,r)=>typeof t=="function"?(...i)=>t(n,...i,r):!t||!$e(t.url)?null:od(e,t,n,r),Yn=(e="",t)=>{if(typeof t=="function")return t;if(!t||!$e(t.url))return(i,s)=>s();const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,s,o)=>{const l=fn(i,e+t.url,t);return l.onload=c=>{s(be("load",c.status,n(c.response),c.getAllResponseHeaders()))},l.onerror=c=>{o(be("error",c.status,r(c.response)||c.statusText,c.getAllResponseHeaders()))},l.ontimeout=pn(o),l}},Qa=(e=0,t=1)=>e+Math.random()*(t-e),ad=(e,t=1e3,n=0,r=25,i=250)=>{let s=null;const o=Date.now(),l=()=>{let c=Date.now()-o,d=Qa(r,i);c+d>t&&(d=c+d-t);let f=c/t;if(f>=1||document.hidden){e(1);return}e(f),s=setTimeout(l,d)};return t>0&&l(),{clear:()=>{clearTimeout(s)}}},ld=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=t,i=(f,g)=>{const v=()=>{n.duration===0||n.progress===null||d.fire("progress",d.getProgress())},I=()=>{n.complete=!0,d.fire("load-perceived",n.response.body)};d.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=ad(E=>{n.perceivedProgress=E,n.perceivedDuration=Date.now()-n.timestamp,v(),n.response&&n.perceivedProgress===1&&!n.complete&&I()},r?Qa(750,1500):0),n.request=e(f,g,E=>{n.response=Ge(E)?E:{type:"load",code:200,body:`${E}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,d.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&I()},E=>{n.perceivedPerformanceUpdater.clear(),d.fire("error",Ge(E)?E:{type:"error",code:0,body:`${E}`})},(E,w,y)=>{n.duration=Date.now()-n.timestamp,n.progress=E?w/y:null,v()},()=>{n.perceivedPerformanceUpdater.clear(),d.fire("abort",n.response?n.response.body:null)},E=>{d.fire("transfer",E)})},s=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},o=()=>{s(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},l=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,c=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,d={...Si(),process:i,abort:s,getProgress:l,getDuration:c,reset:o};return d},Za=e=>e.substring(0,e.lastIndexOf("."))||e,cd=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||ao(e)?t[0]=e.name||ja():ao(e)?(t[1]=e.length,t[2]=Ka(e)):$e(e)&&(t[0]=cr(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},Pn=e=>!!(e instanceof File||e instanceof Blob&&e.name),Ja=e=>{if(!Ge(e))return e;const t=wi(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];t[n]=r&&Ge(r)?Ja(r):r}return t},ud=(e=null,t=null,n=null)=>{const r=Po(),i={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?ie.PROCESSING_COMPLETE:ie.INIT,activeLoader:null,activeProcessor:null};let s=null;const o={},l=P=>i.status=P,c=(P,...k)=>{i.released||i.frozen||A.fire(P,...k)},d=()=>Di(i.file.name),f=()=>i.file.type,g=()=>i.file.size,v=()=>i.file,I=(P,k,W)=>{if(i.source=P,A.fireSync("init"),i.file){A.fireSync("load-skip");return}i.file=cd(P),k.on("init",()=>{c("load-init")}),k.on("meta",x=>{i.file.size=x.size,i.file.filename=x.filename,x.source&&(e=Me.LIMBO,i.serverFileReference=x.source,i.status=ie.PROCESSING_COMPLETE),c("load-meta")}),k.on("progress",x=>{l(ie.LOADING),c("load-progress",x)}),k.on("error",x=>{l(ie.LOAD_ERROR),c("load-request-error",x)}),k.on("abort",()=>{l(ie.INIT),c("load-abort")}),k.on("load",x=>{i.activeLoader=null;const U=G=>{i.file=Pn(G)?G:i.file,e===Me.LIMBO&&i.serverFileReference?l(ie.PROCESSING_COMPLETE):l(ie.IDLE),c("load")},j=G=>{i.file=x,c("load-meta"),l(ie.LOAD_ERROR),c("load-file-error",G)};if(i.serverFileReference){U(x);return}W(x,U,j)}),k.setSource(P),i.activeLoader=k,k.load()},E=()=>{i.activeLoader&&i.activeLoader.load()},w=()=>{if(i.activeLoader){i.activeLoader.abort();return}l(ie.INIT),c("load-abort")},y=(P,k)=>{if(i.processingAborted){i.processingAborted=!1;return}if(l(ie.PROCESSING),s=null,!(i.file instanceof Blob)){A.on("load",()=>{y(P,k)});return}P.on("load",U=>{i.transferId=null,i.serverFileReference=U}),P.on("transfer",U=>{i.transferId=U}),P.on("load-perceived",U=>{i.activeProcessor=null,i.transferId=null,i.serverFileReference=U,l(ie.PROCESSING_COMPLETE),c("process-complete",U)}),P.on("start",()=>{c("process-start")}),P.on("error",U=>{i.activeProcessor=null,l(ie.PROCESSING_ERROR),c("process-error",U)}),P.on("abort",U=>{i.activeProcessor=null,i.serverFileReference=U,l(ie.IDLE),c("process-abort"),s&&s()}),P.on("progress",U=>{c("process-progress",U)});const W=U=>{i.archived||P.process(U,{...o})},x=console.error;k(i.file,W,x),i.activeProcessor=P},_=()=>{i.processingAborted=!1,l(ie.PROCESSING_QUEUED)},T=()=>new Promise(P=>{if(!i.activeProcessor){i.processingAborted=!0,l(ie.IDLE),c("process-abort"),P();return}s=()=>{P()},i.activeProcessor.abort()}),R=(P,k)=>new Promise((W,x)=>{const U=i.serverFileReference!==null?i.serverFileReference:i.transferId;if(U===null){W();return}P(U,()=>{i.serverFileReference=null,i.transferId=null,W()},j=>{if(!k){W();return}l(ie.PROCESSING_REVERT_ERROR),c("process-revert-error"),x(j)}),l(ie.IDLE),c("process-revert")}),h=(P,k,W)=>{const x=P.split("."),U=x[0],j=x.pop();let G=o;x.forEach(X=>G=G[X]),JSON.stringify(G[j])!==JSON.stringify(k)&&(G[j]=k,c("metadata-update",{key:U,value:o[U],silent:W}))},A={id:{get:()=>r},origin:{get:()=>e,set:P=>e=P},serverId:{get:()=>i.serverFileReference},transferId:{get:()=>i.transferId},status:{get:()=>i.status},filename:{get:()=>i.file.name},filenameWithoutExtension:{get:()=>Za(i.file.name)},fileExtension:{get:d},fileType:{get:f},fileSize:{get:g},file:{get:v},relativePath:{get:()=>i.file._relativePath},source:{get:()=>i.source},getMetadata:P=>Ja(P?o[P]:o),setMetadata:(P,k,W)=>{if(Ge(P)){const x=P;return Object.keys(x).forEach(U=>{h(U,x[U],k)}),P}return h(P,k,W),k},extend:(P,k)=>O[P]=k,abortLoad:w,retryLoad:E,requestProcessing:_,abortProcessing:T,load:I,process:y,revert:R,...Si(),freeze:()=>i.frozen=!0,release:()=>i.released=!0,released:{get:()=>i.released},archive:()=>i.archived=!0,archived:{get:()=>i.archived}},O=Xt(A);return O},dd=(e,t)=>Gt(t)?0:$e(t)?e.findIndex(n=>n.id===t):-1,Ds=(e,t)=>{const n=dd(e,t);if(!(n<0))return e[n]||null},Cs=(e,t,n,r,i,s)=>{const o=fn(null,e,{method:"GET",responseType:"blob"});return o.onload=l=>{const c=l.getAllResponseHeaders(),d=Bo(c).name||cr(e);t(be("load",l.status,Mn(l.response,d),c))},o.onerror=l=>{n(be("error",l.status,l.statusText,l.getAllResponseHeaders()))},o.onheaders=l=>{s(be("headers",l.status,null,l.getAllResponseHeaders()))},o.ontimeout=pn(n),o.onprogress=r,o.onabort=i,o},Ls=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),fd=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&Ls(location.href)!==Ls(e),_r=e=>(...t)=>cn(e)?e(...t):e,pd=e=>!Pn(e.file),qi=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:mt(t.items)})},0)},Ms=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const r=e(...t);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),Yi=(e,t)=>{e.items.sort((n,r)=>t(je(n),je(r)))},st=(e,t)=>({query:n,success:r=()=>{},failure:i=()=>{},...s}={})=>{const o=un(e.items,n);if(!o){i({error:be("error",0,"Item not found"),file:null});return}t(o,r,i,s||{})},hd=(e,t,n)=>({ABORT_ALL:()=>{mt(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const i=r.map(o=>({source:o.source?o.source:o,options:o.options}));let s=mt(n.items);s.forEach(o=>{i.find(l=>l.source===o.source||l.source===o.file)||e("REMOVE_ITEM",{query:o,remove:!1})}),s=mt(n.items),i.forEach((o,l)=>{s.find(c=>c.source===o.source||c.file===o.source)||e("ADD_ITEM",{...o,interactionMethod:ut.NONE,index:l})})},DID_UPDATE_ITEM_METADATA:({id:r,action:i,change:s})=>{s.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const o=Ds(n.items,r);if(!t("IS_ASYNC")){gt("SHOULD_PREPARE_OUTPUT",!1,{item:o,query:t,action:i,change:s}).then(f=>{const g=t("GET_BEFORE_PREPARE_FILE");g&&(f=g(o,f)),f&&e("REQUEST_PREPARE_OUTPUT",{query:r,item:o,success:v=>{e("DID_PREPARE_OUTPUT",{id:r,file:v})}},!0)});return}o.origin===Me.LOCAL&&e("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.source});const l=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:r})},32)},c=f=>{o.revert(Yn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(f?l:()=>{}).catch(()=>{})},d=f=>{o.abortProcessing().then(f?l:()=>{})};if(o.status===ie.PROCESSING_COMPLETE)return c(n.options.instantUpload);if(o.status===ie.PROCESSING)return d(n.options.instantUpload);n.options.instantUpload&&l()},0))},MOVE_ITEM:({query:r,index:i})=>{const s=un(n.items,r);if(!s)return;const o=n.items.indexOf(s);i=za(i,0,n.items.length-1),o!==i&&n.items.splice(i,0,n.items.splice(o,1)[0])},SORT:({compare:r})=>{Yi(n,r),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:i,interactionMethod:s,success:o=()=>{},failure:l=()=>{}})=>{let c=i;if(i===-1||typeof i>"u"){const I=t("GET_ITEM_INSERT_LOCATION"),E=t("GET_TOTAL_ITEMS");c=I==="before"?0:E}const d=t("GET_IGNORED_FILES"),f=I=>Pn(I)?!d.includes(I.name.toLowerCase()):!Gt(I),v=r.filter(f).map(I=>new Promise((E,w)=>{e("ADD_ITEM",{interactionMethod:s,source:I.source||I,success:E,failure:w,index:c++,options:I.options||{}})}));Promise.all(v).then(o).catch(l)},ADD_ITEM:({source:r,index:i=-1,interactionMethod:s,success:o=()=>{},failure:l=()=>{},options:c={}})=>{if(Gt(r)){l({error:be("error",0,"No source"),file:null});return}if(Pn(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!$u(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const T=be("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:r,error:T}),l({error:T,file:null});return}const _=mt(n.items)[0];if(_.status===ie.PROCESSING_COMPLETE||_.status===ie.PROCESSING_REVERT_ERROR){const T=t("GET_FORCE_REVERT");if(_.revert(Yn(n.options.server.url,n.options.server.revert),T).then(()=>{T&&e("ADD_ITEM",{source:r,index:i,interactionMethod:s,success:o,failure:l,options:c})}).catch(()=>{}),T)return}e("REMOVE_ITEM",{query:_.id})}const d=c.type==="local"?Me.LOCAL:c.type==="limbo"?Me.LIMBO:Me.INPUT,f=ud(d,d===Me.INPUT?null:r,c.file);Object.keys(c.metadata||{}).forEach(_=>{f.setMetadata(_,c.metadata[_])}),En("DID_CREATE_ITEM",f,{query:t,dispatch:e});const g=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(i=g==="before"?-1:n.items.length),Yu(n.items,f,i),cn(g)&&r&&Yi(n,g);const v=f.id;f.on("init",()=>{e("DID_INIT_ITEM",{id:v})}),f.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:v})}),f.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:v})}),f.on("load-progress",_=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:v,progress:_})}),f.on("load-request-error",_=>{const T=_r(n.options.labelFileLoadError)(_);if(_.code>=400&&_.code<500){e("DID_THROW_ITEM_INVALID",{id:v,error:_,status:{main:T,sub:`${_.code} (${_.body})`}}),l({error:_,file:je(f)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:v,error:_,status:{main:T,sub:n.options.labelTapToRetry}})}),f.on("load-file-error",_=>{e("DID_THROW_ITEM_INVALID",{id:v,error:_.status,status:_.status}),l({error:_.status,file:je(f)})}),f.on("load-abort",()=>{e("REMOVE_ITEM",{query:v})}),f.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:v,item:f,data:{source:r,success:o}})}),f.on("load",()=>{const _=T=>{if(!T){e("REMOVE_ITEM",{query:v});return}f.on("metadata-update",R=>{e("DID_UPDATE_ITEM_METADATA",{id:v,change:R})}),gt("SHOULD_PREPARE_OUTPUT",!1,{item:f,query:t}).then(R=>{const h=t("GET_BEFORE_PREPARE_FILE");h&&(R=h(f,R));const D=()=>{e("COMPLETE_LOAD_ITEM",{query:v,item:f,data:{source:r,success:o}}),qi(e,n)};if(R){e("REQUEST_PREPARE_OUTPUT",{query:v,item:f,success:A=>{e("DID_PREPARE_OUTPUT",{id:v,file:A}),D()}},!0);return}D()})};gt("DID_LOAD_ITEM",f,{query:t,dispatch:e}).then(()=>{Ms(t("GET_BEFORE_ADD_FILE"),je(f)).then(_)}).catch(T=>{if(!T||!T.error||!T.status)return _(!1);e("DID_THROW_ITEM_INVALID",{id:v,error:T.error,status:T.status})})}),f.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:v})}),f.on("process-progress",_=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:v,progress:_})}),f.on("process-error",_=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:v,error:_,status:{main:_r(n.options.labelFileProcessingError)(_),sub:n.options.labelTapToRetry}})}),f.on("process-revert-error",_=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:v,error:_,status:{main:_r(n.options.labelFileProcessingRevertError)(_),sub:n.options.labelTapToRetry}})}),f.on("process-complete",_=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:v,error:null,serverFileReference:_}),e("DID_DEFINE_VALUE",{id:v,value:_})}),f.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:v})}),f.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:v}),e("DID_DEFINE_VALUE",{id:v,value:null})}),e("DID_ADD_ITEM",{id:v,index:i,interactionMethod:s}),qi(e,n);const{url:I,load:E,restore:w,fetch:y}=n.options.server||{};f.load(r,rd(d===Me.INPUT?$e(r)&&fd(r)&&y?$i(I,y):Cs:d===Me.LIMBO?$i(I,w):$i(I,E)),(_,T,R)=>{gt("LOAD_FILE",_,{query:t}).then(T).catch(R)})},REQUEST_PREPARE_OUTPUT:({item:r,success:i,failure:s=()=>{}})=>{const o={error:be("error",0,"Item not found"),file:null};if(r.archived)return s(o);gt("PREPARE_OUTPUT",r.file,{query:t,item:r}).then(l=>{gt("COMPLETE_PREPARE_OUTPUT",l,{query:t,item:r}).then(c=>{if(r.archived)return s(o);i(c)})})},COMPLETE_LOAD_ITEM:({item:r,data:i})=>{const{success:s,source:o}=i,l=t("GET_ITEM_INSERT_LOCATION");if(cn(l)&&o&&Yi(n,l),e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===Me.INPUT?null:o}),s(je(r)),r.origin===Me.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===Me.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:o}),e("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||o});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:st(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:st(n,(r,i,s)=>{e("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:o=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:o}),i({file:r,output:o})},failure:s},!0)}),REQUEST_ITEM_PROCESSING:st(n,(r,i,s)=>{if(!(r.status===ie.IDLE||r.status===ie.PROCESSING_ERROR)){const l=()=>e("REQUEST_ITEM_PROCESSING",{query:r,success:i,failure:s}),c=()=>document.hidden?l():setTimeout(l,32);r.status===ie.PROCESSING_COMPLETE||r.status===ie.PROCESSING_REVERT_ERROR?r.revert(Yn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(c).catch(()=>{}):r.status===ie.PROCESSING&&r.abortProcessing().then(c);return}r.status!==ie.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:i,failure:s},!0))}),PROCESS_ITEM:st(n,(r,i,s)=>{const o=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",ie.PROCESSING).length===o){n.processingQueue.push({id:r.id,success:i,failure:s});return}if(r.status===ie.PROCESSING)return;const c=()=>{const f=n.processingQueue.shift();if(!f)return;const{id:g,success:v,failure:I}=f,E=un(n.items,g);if(!E||E.archived){c();return}e("PROCESS_ITEM",{query:g,success:v,failure:I},!0)};r.onOnce("process-complete",()=>{i(je(r)),c();const f=n.options.server;if(n.options.instantUpload&&r.origin===Me.LOCAL&&cn(f.remove)){const I=()=>{};r.origin=Me.LIMBO,n.options.server.remove(r.source,I,I)}t("GET_ITEMS_BY_STATUS",ie.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",f=>{s({error:f,file:je(r)}),c()});const d=n.options;r.process(ld(sd(d.server.url,d.server.process,d.name,{chunkTransferId:r.transferId,chunkServer:d.server.patch,chunkUploads:d.chunkUploads,chunkForce:d.chunkForce,chunkSize:d.chunkSize,chunkRetryDelays:d.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(f,g,v)=>{gt("PREPARE_OUTPUT",f,{query:t,item:r}).then(I=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:I}),g(I)}).catch(v)})}),RETRY_ITEM_PROCESSING:st(n,r=>{e("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:st(n,r=>{Ms(t("GET_BEFORE_REMOVE_FILE"),je(r)).then(i=>{i&&e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:st(n,r=>{r.release()}),REMOVE_ITEM:st(n,(r,i,s,o)=>{const l=()=>{const d=r.id;Ds(n.items,d).archive(),e("DID_REMOVE_ITEM",{error:null,id:d,item:r}),qi(e,n),i(je(r))},c=n.options.server;r.origin===Me.LOCAL&&c&&cn(c.remove)&&o.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:r.id}),c.remove(r.source,()=>l(),d=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:be("error",0,d,null),status:{main:_r(n.options.labelFileRemoveError)(d),sub:n.options.labelTapToRetry}})})):((o.revert&&r.origin!==Me.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(Yn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),l())}),ABORT_ITEM_LOAD:st(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:st(n,r=>{if(r.serverId){e("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:st(n,r=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:r});return}const i=l=>{l&&e("REVERT_ITEM_PROCESSING",{query:r})},s=t("GET_BEFORE_REMOVE_FILE");if(!s)return i(!0);const o=s(je(r));if(o==null)return i(!0);if(typeof o=="boolean")return i(o);typeof o.then=="function"&&o.then(i)}),REVERT_ITEM_PROCESSING:st(n,r=>{r.revert(Yn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||pd(r))&&e("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const i=Object.keys(r),s=gd.filter(l=>i.includes(l));[...s,...Object.keys(r).filter(l=>!s.includes(l))].forEach(l=>{e(`SET_${Oi(l,"_").toUpperCase()}`,{value:r[l]})})}}),gd=["server"],Go=e=>e,Ft=e=>document.createElement(e),Re=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},Ps=(e,t,n,r)=>{const i=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}},md=(e,t,n,r,i,s)=>{const o=Ps(e,t,n,i),l=Ps(e,t,n,r);return["M",o.x,o.y,"A",n,n,0,s,0,l.x,l.y].join(" ")},Ed=(e,t,n,r,i)=>{let s=1;return i>r&&i-r<=.5&&(s=0),r>i&&r-i>=.5&&(s=0),md(e,t,n,Math.min(.9999,r)*360,Math.min(.9999,i)*360,s)},vd=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=Hr("svg");e.ref.path=Hr("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},Td=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(Oe(e.ref.path,"stroke-width"),10),r=e.rect.element.width*.5;let i=0,s=0;t.spin?(i=0,s=.5):(i=0,s=t.progress);const o=Ed(r,r,r-n,i,s);Oe(e.ref.path,"d",o),Oe(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},Ns=Se({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:vd,write:Td,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Id=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},_d=({root:e,props:t})=>{const{isDisabled:n}=t,r=e.query("GET_DISABLED")||t.opacity===0;r&&!n?(t.isDisabled=!0,Oe(e.element,"disabled","disabled")):!r&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},el=Se({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:Id,write:_d}),tl=(e,t=".",n=1e3,r={})=>{const{labelBytes:i="bytes",labelKilobytes:s="KB",labelMegabytes:o="MB",labelGigabytes:l="GB"}=r;e=Math.round(Math.abs(e));const c=n,d=n*n,f=n*n*n;return e<c?`${e} ${i}`:e<d?`${Math.floor(e/c)} ${s}`:e<f?`${xs(e/d,1,t)} ${o}`:`${xs(e/f,2,t)} ${l}`},xs=(e,t,n)=>e.toFixed(t).split(".").filter(r=>r!=="0").join(n),yd=({root:e,props:t})=>{const n=Ft("span");n.className="filepond--file-info-main",Oe(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const r=Ft("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,Re(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Re(n,Go(e.query("GET_ITEM_NAME",t.id)))},lo=({root:e,props:t})=>{Re(e.ref.fileSize,tl(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),Re(e.ref.fileName,Go(e.query("GET_ITEM_NAME",t.id)))},Bs=({root:e,props:t})=>{if(kn(e.query("GET_ITEM_SIZE",t.id))){lo({root:e,props:t});return}Re(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},bd=Se({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:qe({DID_LOAD_ITEM:lo,DID_UPDATE_ITEM_META:lo,DID_THROW_ITEM_LOAD_ERROR:Bs,DID_THROW_ITEM_INVALID:Bs}),didCreateView:e=>{En("CREATE_VIEW",{...e,view:e})},create:yd,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),nl=e=>Math.round(e*100),Rd=({root:e})=>{const t=Ft("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=Ft("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,rl({root:e,action:{progress:null}})},rl=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${nl(t.progress)}%`;Re(e.ref.main,n),Re(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},wd=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${nl(t.progress)}%`;Re(e.ref.main,n),Re(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Ad=({root:e})=>{Re(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),Re(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Od=({root:e})=>{Re(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Re(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},Sd=({root:e})=>{Re(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Re(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},Gs=({root:e})=>{Re(e.ref.main,""),Re(e.ref.sub,"")},zn=({root:e,action:t})=>{Re(e.ref.main,t.status.main),Re(e.ref.sub,t.status.sub)},Dd=Se({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:qe({DID_LOAD_ITEM:Gs,DID_REVERT_ITEM_PROCESSING:Gs,DID_REQUEST_ITEM_PROCESSING:Ad,DID_ABORT_ITEM_PROCESSING:Od,DID_COMPLETE_ITEM_PROCESSING:Sd,DID_UPDATE_ITEM_PROCESS_PROGRESS:wd,DID_UPDATE_ITEM_LOAD_PROGRESS:rl,DID_THROW_ITEM_LOAD_ERROR:zn,DID_THROW_ITEM_INVALID:zn,DID_THROW_ITEM_PROCESSING_ERROR:zn,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:zn,DID_THROW_ITEM_REMOVE_ERROR:zn}),didCreateView:e=>{En("CREATE_VIEW",{...e,view:e})},create:Rd,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),co={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},uo=[];Ie(co,e=>{uo.push(e)});const rt=e=>{if(fo(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Cd=e=>e.ref.buttonAbortItemLoad.rect.element.width,yr=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Ld=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),Md=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),Pd=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),fo=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Nd={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:Md},processProgressIndicator:{opacity:0,align:Pd},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Fs={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:rt},status:{translateX:rt}},zi={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Dn={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:rt},status:{translateX:rt,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:rt},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:fo},info:{translateX:rt},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:fo},buttonRemoveItem:{opacity:1},info:{translateX:rt},status:{opacity:1,translateX:rt}},DID_LOAD_ITEM:Fs,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:rt},status:{translateX:rt}},DID_START_ITEM_PROCESSING:zi,DID_REQUEST_ITEM_PROCESSING:zi,DID_UPDATE_ITEM_PROCESS_PROGRESS:zi,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:rt}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:rt},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Fs},xd=Se({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Bd=({root:e,props:t})=>{const n=Object.keys(co).reduce((E,w)=>(E[w]={...co[w]},E),{}),{id:r}=t,i=e.query("GET_ALLOW_REVERT"),s=e.query("GET_ALLOW_REMOVE"),o=e.query("GET_ALLOW_PROCESS"),l=e.query("GET_INSTANT_UPLOAD"),c=e.query("IS_ASYNC"),d=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let f;c?o&&!i?f=E=>!/RevertItemProcessing/.test(E):!o&&i?f=E=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(E):!o&&!i&&(f=E=>!/Process/.test(E)):f=E=>!/Process/.test(E);const g=f?uo.filter(f):uo.concat();if(l&&i&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!i){const E=Dn.DID_COMPLETE_ITEM_PROCESSING;E.info.translateX=Ld,E.info.translateY=yr,E.status.translateY=yr,E.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!o&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(E=>{Dn[E].status.translateY=yr}),Dn.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Cd),d&&i){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const E=Dn.DID_COMPLETE_ITEM_PROCESSING;E.info.translateX=rt,E.status.translateY=yr,E.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}s||(n.RemoveItem.disabled=!0),Ie(n,(E,w)=>{const y=e.createChildView(el,{label:e.query(w.label),icon:e.query(w.icon),opacity:0});g.includes(E)&&e.appendChildView(y),w.disabled&&(y.element.setAttribute("disabled","disabled"),y.element.setAttribute("hidden","hidden")),y.element.dataset.align=e.query(`GET_STYLE_${w.align}`),y.element.classList.add(w.className),y.on("click",_=>{_.stopPropagation(),!w.disabled&&e.dispatch(w.action,{query:r})}),e.ref[`button${E}`]=y}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(xd)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(bd,{id:r})),e.ref.status=e.appendChildView(e.createChildView(Dd,{id:r}));const v=e.appendChildView(e.createChildView(Ns,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));v.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=v;const I=e.appendChildView(e.createChildView(Ns,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));I.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=I,e.ref.activeStyles=[]},Gd=({root:e,actions:t,props:n})=>{Fd({root:e,actions:t,props:n});let r=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>Dn[i.type]);if(r){e.ref.activeStyles=[];const i=Dn[r.type];Ie(Nd,(s,o)=>{const l=e.ref[s];Ie(o,(c,d)=>{const f=i[s]&&typeof i[s][c]<"u"?i[s][c]:d;e.ref.activeStyles.push({control:l,key:c,value:f})})})}e.ref.activeStyles.forEach(({control:i,key:s,value:o})=>{i[s]=typeof o=="function"?o(e):o})},Fd=qe({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),kd=Se({create:Bd,write:Gd,didCreateView:e=>{En("CREATE_VIEW",{...e,view:e})},name:"file"}),Ud=({root:e,props:t})=>{e.ref.fileName=Ft("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(kd,{id:t.id})),e.ref.data=!1},Hd=({root:e,props:t})=>{Re(e.ref.fileName,Go(e.query("GET_ITEM_NAME",t.id)))},Vd=Se({create:Ud,ignoreRect:!0,write:qe({DID_LOAD_ITEM:Hd}),didCreateView:e=>{En("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),ks={type:"spring",damping:.6,mass:7},Wd=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:ks},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:ks},styles:["translateY"]}}].forEach(n=>{$d(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},$d=(e,t,n)=>{const r=Se({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),i=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(i)},qd=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=Fa(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,r=e.ref.bottom.rect.element,i=Math.max(n.height+r.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(i-n.height-r.height)/100,e.ref.bottom.translateY=i-r.height},il=Se({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:qd,create:Wd,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Yd=e=>{const t=e.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>t.indexOf(r.id)}},Us={type:"spring",stiffness:.75,damping:.45,mass:10},Hs="spring",Vs={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},zd=({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(Vd,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(il,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let i=!1;const s={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const o=Yd(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:o});const l=d=>{if(!d.isPrimary)return;d.stopPropagation(),d.preventDefault(),t.dragOffset={x:d.pageX-s.x,y:d.pageY-s.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!i&&(i=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:o})},c=d=>{d.isPrimary&&(document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",c),t.dragOffset={x:d.pageX-s.x,y:d.pageY-s.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:o}),i&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",l),document.addEventListener("pointerup",c)};e.element.addEventListener("pointerdown",n)},jd=qe({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),Xd=qe({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:r})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let i=t.concat().filter(o=>/^DID_/.test(o.type)).reverse().find(o=>Vs[o.type]);i&&i.type!==n.currentState&&(n.currentState=i.type,e.element.dataset.filepondItemState=Vs[n.currentState]||"");const s=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");s?r||(e.height=e.rect.element.width*s):(jd({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),Kd=Se({create:zd,write:Xd,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Hs,scaleY:Hs,translateX:Us,translateY:Us,opacity:{type:"tween",duration:150}}}});var Fo=(e,t)=>Math.max(1,Math.floor((e+1)/t));const ko=(e,t,n)=>{if(!n)return;const r=e.rect.element.width,i=t.length;let s=null;if(i===0||n.top<t[0].rect.element.top)return-1;const l=t[0].rect.element,c=l.marginLeft+l.marginRight,d=l.width+c,f=Fo(r,d);if(f===1){for(let I=0;I<i;I++){const E=t[I],w=E.rect.outer.top+E.rect.element.height*.5;if(n.top<w)return I}return i}const g=l.marginTop+l.marginBottom,v=l.height+g;for(let I=0;I<i;I++){const E=I%f,w=Math.floor(I/f),y=E*d,_=w*v,T=_-l.marginTop,R=y+d,h=_+v+l.marginBottom;if(n.top<h&&n.top>T){if(n.left<R)return I;I!==i-1?s=I:s=null}}return s!==null?s:i},br={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},Qd=({root:e})=>{Oe(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},Zd=({root:e,action:t})=>{const{id:n,index:r,interactionMethod:i}=t;e.ref.addIndex=r;const s=Date.now();let o=s,l=1;if(i!==ut.NONE){l=0;const c=e.query("GET_ITEM_INSERT_INTERVAL"),d=s-e.ref.lastItemSpanwDate;o=d<c?s+(c-d):s}e.ref.lastItemSpanwDate=o,e.appendChildView(e.createChildView(Kd,{spawnDate:o,id:n,opacity:l,interactionMethod:i}),r)},Ws=(e,t,n,r=0,i=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&Jd(e,t,n,r,i),e.scaleX=1,e.scaleY=1,e.opacity=1))},Jd=(e,t,n,r,i)=>{e.interactionMethod===ut.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===ut.DROP?(e.translateX=null,e.translateX=t-r*20,e.translateY=null,e.translateY=n-i*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===ut.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===ut.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},ef=({root:e,action:t})=>{const{id:n}=t,r=e.childViews.find(i=>i.id===n);r&&(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},ji=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,tf=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,nf=({root:e,action:t})=>{const{id:n,dragState:r}=t,i=e.query("GET_ITEM",{id:n}),s=e.childViews.find(y=>y.id===n),o=e.childViews.length,l=r.getItemIndex(i);if(!s)return;const c={x:s.dragOrigin.x+s.dragOffset.x+s.dragCenter.x,y:s.dragOrigin.y+s.dragOffset.y+s.dragCenter.y},d=ji(s),f=tf(s);let g=Math.floor(e.rect.outer.width/f);g>o&&(g=o);const v=Math.floor(o/g+1);br.setHeight=d*v,br.setWidth=f*g;var I={y:Math.floor(c.y/d),x:Math.floor(c.x/f),getGridIndex:function(){return c.y>br.getHeight||c.y<0||c.x>br.getWidth||c.x<0?l:this.y*g+this.x},getColIndex:function(){const _=e.query("GET_ACTIVE_ITEMS"),T=e.childViews.filter(x=>x.rect.element.height),R=_.map(x=>T.find(U=>U.id===x.id)),h=R.findIndex(x=>x===s),D=ji(s),A=R.length;let O=A,P=0,k=0,W=0;for(let x=0;x<A;x++)if(P=ji(R[x]),W=k,k=W+P,c.y<k){if(h>x){if(c.y<W+D){O=x;break}continue}O=x;break}return O}};const E=g>1?I.getGridIndex():I.getColIndex();e.dispatch("MOVE_ITEM",{query:s,index:E});const w=r.getIndex();if(w===void 0||w!==E){if(r.setIndex(E),w===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:l,target:E})}},rf=qe({DID_ADD_ITEM:Zd,DID_REMOVE_ITEM:ef,DID_DRAG_ITEM:nf}),of=({root:e,props:t,actions:n,shouldOptimize:r})=>{rf({root:e,props:t,actions:n});const{dragCoordinates:i}=t,s=e.rect.element.width,o=e.childViews.filter(R=>R.rect.element.height),l=e.query("GET_ACTIVE_ITEMS").map(R=>o.find(h=>h.id===R.id)).filter(R=>R),c=i?ko(e,l,i):null,d=e.ref.addIndex||null;e.ref.addIndex=null;let f=0,g=0,v=0;if(l.length===0)return;const I=l[0].rect.element,E=I.marginTop+I.marginBottom,w=I.marginLeft+I.marginRight,y=I.width+w,_=I.height+E,T=Fo(s,y);if(T===1){let R=0,h=0;l.forEach((D,A)=>{if(c){let k=A-c;k===-2?h=-E*.25:k===-1?h=-E*.75:k===0?h=E*.75:k===1?h=E*.25:h=0}r&&(D.translateX=null,D.translateY=null),D.markedForRemoval||Ws(D,0,R+h);let P=(D.rect.element.height+E)*(D.markedForRemoval?D.opacity:1);R+=P})}else{let R=0,h=0;l.forEach((D,A)=>{A===c&&(f=1),A===d&&(v+=1),D.markedForRemoval&&D.opacity<.5&&(g-=1);const O=A+v+f+g,P=O%T,k=Math.floor(O/T),W=P*y,x=k*_,U=Math.sign(W-R),j=Math.sign(x-h);R=W,h=x,!D.markedForRemoval&&(r&&(D.translateX=null,D.translateY=null),Ws(D,W,x,U,j))})}},sf=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),af=Se({create:Qd,write:of,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:sf,mixins:{apis:["dragCoordinates"]}}),lf=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(af)),t.dragCoordinates=null,t.overflowing=!1},cf=({root:e,props:t,action:n})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},uf=({props:e})=>{e.dragCoordinates=null},df=qe({DID_DRAG:cf,DID_END_DRAG:uf}),ff=({root:e,props:t,actions:n})=>{if(df({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},pf=Se({create:lf,write:ff,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Et=(e,t,n,r="")=>{n?Oe(e,t,r):e.removeAttribute(t)},hf=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=Ft("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}},gf=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,Oe(e.element,"name",e.query("GET_NAME")),Oe(e.element,"aria-controls",`filepond--assistant-${t.id}`),Oe(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),ol({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),sl({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),al({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),po({root:e}),ll({root:e,action:{value:e.query("GET_REQUIRED")}}),cl({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const r=Array.from(e.element.files).map(i=>(i._relativePath=i.webkitRelativePath,i));setTimeout(()=>{t.onload(r),hf(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},ol=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Et(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},sl=({root:e,action:t})=>{Et(e.element,"multiple",t.value)},al=({root:e,action:t})=>{Et(e.element,"webkitdirectory",t.value)},po=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),r=t||!n;Et(e.element,"disabled",r)},ll=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&Et(e.element,"required",!0):Et(e.element,"required",!1)},cl=({root:e,action:t})=>{Et(e.element,"capture",!!t.value,t.value===!0?"":t.value)},$s=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(Et(t,"required",!1),Et(t,"name",!1)):(Et(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&Et(t,"required",!0))},mf=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},Ef=Se({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:gf,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:qe({DID_LOAD_ITEM:$s,DID_REMOVE_ITEM:$s,DID_THROW_ITEM_INVALID:mf,DID_SET_DISABLED:po,DID_SET_ALLOW_BROWSE:po,DID_SET_ALLOW_DIRECTORIES_ONLY:al,DID_SET_ALLOW_MULTIPLE:sl,DID_SET_ACCEPTED_FILE_TYPES:ol,DID_SET_CAPTURE_METHOD:cl,DID_SET_REQUIRED:ll})}),qs={ENTER:13,SPACE:32},vf=({root:e,props:t})=>{const n=Ft("label");Oe(n,"for",`filepond--browser-${t.id}`),Oe(n,"id",`filepond--drop-label-${t.id}`),Oe(n,"aria-hidden","true"),e.ref.handleKeyDown=r=>{(r.keyCode===qs.ENTER||r.keyCode===qs.SPACE)&&(r.preventDefault(),e.ref.label.click())},e.ref.handleClick=r=>{r.target===n||n.contains(r.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),ul(n,t.caption),e.appendChild(n),e.ref.label=n},ul=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&Oe(n,"tabindex","0"),t},Tf=Se({name:"drop-label",ignoreRect:!0,create:vf,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:qe({DID_SET_LABEL_IDLE:({root:e,action:t})=>{ul(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),If=Se({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),_f=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(If,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},yf=({root:e,action:t})=>{if(!e.ref.blob){_f({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},bf=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},Rf=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},wf=({root:e,props:t,actions:n})=>{Af({root:e,props:t,actions:n});const{blob:r}=e.ref;n.length===0&&r&&r.opacity===0&&(e.removeChildView(r),e.ref.blob=null)},Af=qe({DID_DRAG:yf,DID_DROP:Rf,DID_END_DRAG:bf}),Of=Se({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:wf}),dl=(e,t)=>{try{const n=new DataTransfer;t.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),e.files=n.files}catch{return!1}return!0},Sf=({root:e})=>e.ref.fields={},Ci=(e,t)=>e.ref.fields[t],Uo=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},Ys=({root:e})=>Uo(e),Df=({root:e,action:t})=>{const i=!(e.query("GET_ITEM",t.id).origin===Me.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),s=Ft("input");s.type=i?"file":"hidden",s.name=e.query("GET_NAME"),s.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=s,Uo(e)},Cf=({root:e,action:t})=>{const n=Ci(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=e.query("GET_ITEM",t.id);dl(n,[r.file])},Lf=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=Ci(e,t.id);n&&dl(n,[t.file])},0)},Mf=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},Pf=({root:e,action:t})=>{const n=Ci(e,t.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},Nf=({root:e,action:t})=>{const n=Ci(e,t.id);n&&(t.value===null?n.removeAttribute("value"):n.value=t.value,Uo(e))},xf=qe({DID_SET_DISABLED:Mf,DID_ADD_ITEM:Df,DID_LOAD_ITEM:Cf,DID_REMOVE_ITEM:Pf,DID_DEFINE_VALUE:Nf,DID_PREPARE_OUTPUT:Lf,DID_REORDER_ITEMS:Ys,DID_SORT_ITEMS:Ys}),Bf=Se({tag:"fieldset",name:"data",create:Sf,write:xf,ignoreRect:!0}),Gf=e=>"getRootNode"in e?e.getRootNode():document,Ff=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],kf=["css","csv","html","txt"],Uf={zip:"zip|compressed",epub:"application/epub+zip"},fl=(e="")=>(e=e.toLowerCase(),Ff.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):kf.includes(e)?"text/"+e:Uf[e]||""),Ho=e=>new Promise((t,n)=>{const r=jf(e);if(r.length&&!Hf(e))return t(r);Vf(e).then(t)}),Hf=e=>e.files?e.files.length>0:!1,Vf=e=>new Promise((t,n)=>{const r=(e.items?Array.from(e.items):[]).filter(i=>Wf(i)).map(i=>$f(i));if(!r.length){t(e.files?Array.from(e.files):[]);return}Promise.all(r).then(i=>{const s=[];i.forEach(o=>{s.push.apply(s,o)}),t(s.filter(o=>o).map(o=>(o._relativePath||(o._relativePath=o.webkitRelativePath),o)))}).catch(console.error)}),Wf=e=>{if(pl(e)){const t=Vo(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},$f=e=>new Promise((t,n)=>{if(zf(e)){qf(Vo(e)).then(t).catch(n);return}t([e.getAsFile()])}),qf=e=>new Promise((t,n)=>{const r=[];let i=0,s=0;const o=()=>{s===0&&i===0&&t(r)},l=c=>{i++;const d=c.createReader(),f=()=>{d.readEntries(g=>{if(g.length===0){i--,o();return}g.forEach(v=>{v.isDirectory?l(v):(s++,v.file(I=>{const E=Yf(I);v.fullPath&&(E._relativePath=v.fullPath),r.push(E),s--,o()}))}),f()},n)};f()};l(e)}),Yf=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,r=fl(Di(e.name));return r.length&&(e=e.slice(0,e.size,r),e.name=n,e.lastModifiedDate=t),e},zf=e=>pl(e)&&(Vo(e)||{}).isDirectory,pl=e=>"webkitGetAsEntry"in e,Vo=e=>e.webkitGetAsEntry(),jf=e=>{let t=[];try{if(t=Kf(e),t.length)return t;t=Xf(e)}catch{}return t},Xf=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},Kf=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},Wr=[],hn=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),Qf=(e,t,n)=>{const r=Zf(t),i={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return i.destroy=r.addListener(i),i},Zf=e=>{const t=Wr.find(r=>r.element===e);if(t)return t;const n=Jf(e);return Wr.push(n),n},Jf=e=>{const t=[],n={dragenter:tp,dragover:np,dragleave:ip,drop:rp},r={};Ie(n,(s,o)=>{r[s]=o(e,t),e.addEventListener(s,r[s],!1)});const i={element:e,addListener:s=>(t.push(s),()=>{t.splice(t.indexOf(s),1),t.length===0&&(Wr.splice(Wr.indexOf(i),1),Ie(n,o=>{e.removeEventListener(o,r[o],!1)}))})};return i},ep=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),Wo=(e,t)=>{const n=Gf(t),r=ep(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)};let hl=null;const Rr=(e,t)=>{try{e.dropEffect=t}catch{}},tp=(e,t)=>n=>{n.preventDefault(),hl=n.target,t.forEach(r=>{const{element:i,onenter:s}=r;Wo(n,i)&&(r.state="enter",s(hn(n)))})},np=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Ho(r).then(i=>{let s=!1;t.some(o=>{const{filterElement:l,element:c,onenter:d,onexit:f,ondrag:g,allowdrop:v}=o;Rr(r,"copy");const I=v(i);if(!I){Rr(r,"none");return}if(Wo(n,c)){if(s=!0,o.state===null){o.state="enter",d(hn(n));return}if(o.state="over",l&&!I){Rr(r,"none");return}g(hn(n))}else l&&!s&&Rr(r,"none"),o.state&&(o.state=null,f(hn(n)))})})},rp=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Ho(r).then(i=>{t.forEach(s=>{const{filterElement:o,element:l,ondrop:c,onexit:d,allowdrop:f}=s;if(s.state=null,!(o&&!Wo(n,l))){if(!f(i))return d(hn(n));c(hn(n),i)}})})},ip=(e,t)=>n=>{hl===n.target&&t.forEach(r=>{const{onexit:i}=r;r.state=null,i(hn(n))})},op=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:i,filterItems:s=f=>f}=n,o=Qf(e,r?document.documentElement:e,i);let l="",c="";o.allowdrop=f=>t(s(f)),o.ondrop=(f,g)=>{const v=s(g);if(!t(v)){d.ondragend(f);return}c="drag-drop",d.onload(v,f)},o.ondrag=f=>{d.ondrag(f)},o.onenter=f=>{c="drag-over",d.ondragstart(f)},o.onexit=f=>{c="drag-exit",d.ondragend(f)};const d={updateHopperState:()=>{l!==c&&(e.dataset.hopperState=c,l=c)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{o.destroy()}};return d};let ho=!1;const Ln=[],gl=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){n=!0;break}r=r.parentNode}if(!n)return}Ho(e.clipboardData).then(n=>{n.length&&Ln.forEach(r=>r(n))})},sp=e=>{Ln.includes(e)||(Ln.push(e),!ho&&(ho=!0,document.addEventListener("paste",gl)))},ap=e=>{No(Ln,Ln.indexOf(e)),Ln.length===0&&(document.removeEventListener("paste",gl),ho=!1)},lp=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{ap(e)},onload:()=>{}};return sp(e),t},cp=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,Oe(e.element,"role","status"),Oe(e.element,"aria-live","polite"),Oe(e.element,"aria-relevant","additions")};let zs=null,js=null;const Xi=[],Li=(e,t)=>{e.element.textContent=t},up=e=>{e.element.textContent=""},ml=(e,t,n)=>{const r=e.query("GET_TOTAL_ITEMS");Li(e,`${n} ${t}, ${r} ${r===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(js),js=setTimeout(()=>{up(e)},1500)},El=e=>e.element.parentNode.contains(document.activeElement),dp=({root:e,action:t})=>{if(!El(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);Xi.push(n.filename),clearTimeout(zs),zs=setTimeout(()=>{ml(e,Xi.join(", "),e.query("GET_LABEL_FILE_ADDED")),Xi.length=0},750)},fp=({root:e,action:t})=>{if(!El(e))return;const n=t.item;ml(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},pp=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Li(e,`${r} ${i}`)},Xs=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Li(e,`${r} ${i}`)},wr=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;Li(e,`${t.status.main} ${r} ${t.status.sub}`)},hp=Se({create:cp,ignoreRect:!0,ignoreRectUpdate:!0,write:qe({DID_LOAD_ITEM:dp,DID_REMOVE_ITEM:fp,DID_COMPLETE_ITEM_PROCESSING:pp,DID_ABORT_ITEM_PROCESSING:Xs,DID_REVERT_ITEM_PROCESSING:Xs,DID_THROW_ITEM_REMOVE_ERROR:wr,DID_THROW_ITEM_LOAD_ERROR:wr,DID_THROW_ITEM_INVALID:wr,DID_THROW_ITEM_PROCESSING_ERROR:wr}),tag:"span",name:"assistant"}),vl=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),Tl=(e,t=16,n=!0)=>{let r=Date.now(),i=null;return(...s)=>{clearTimeout(i);const o=Date.now()-r,l=()=>{r=Date.now(),e(...s)};o<t?n||(i=setTimeout(l,t-o)):l()}},gp=1e6,$r=e=>e.preventDefault(),mp=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter(c=>c.length).forEach(c=>{e.element.classList.add(c)}),e.ref.label=e.appendChildView(e.createChildView(Tf,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(pf,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(il,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(hp,{...t})),e.ref.data=e.appendChildView(e.createChildView(Bf,{...t})),e.ref.measure=Ft("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(c=>!Gt(c.value)).map(({name:c,value:d})=>{e.element.dataset[c]=d}),e.ref.widthPrevious=null,e.ref.widthUpdated=Tl(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const i=window.matchMedia("(pointer: fine) and (hover: hover)").matches,s="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&s&&!i&&(e.element.addEventListener("touchmove",$r,{passive:!1}),e.element.addEventListener("gesturestart",$r));const o=e.query("GET_CREDITS");if(o.length===2){const c=document.createElement("a");c.className="filepond--credits",c.setAttribute("aria-hidden","true"),c.href=o[0],c.tabindex=-1,c.target="_blank",c.rel="noopener noreferrer",c.textContent=o[1],e.element.appendChild(c),e.ref.credits=c}},Ep=({root:e,props:t,actions:n})=>{if(yp({root:e,props:t,actions:n}),n.filter(A=>/^DID_SET_STYLE_/.test(A.type)).filter(A=>!Gt(A.data.value)).map(({type:A,data:O})=>{const P=vl(A.substring(8).toLowerCase(),"_");e.element.dataset[P]=O.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let r=e.ref.bounds;r||(r=e.ref.bounds=Ip(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:i,label:s,list:o,panel:l}=e.ref;i&&i.updateHopperState();const c=e.query("GET_PANEL_ASPECT_RATIO"),d=e.query("GET_ALLOW_MULTIPLE"),f=e.query("GET_TOTAL_ITEMS"),g=d?e.query("GET_MAX_FILES")||gp:1,v=f===g,I=n.find(A=>A.type==="DID_ADD_ITEM");if(v&&I){const A=I.data.interactionMethod;s.opacity=0,d?s.translateY=-40:A===ut.API?s.translateX=40:A===ut.BROWSE?s.translateY=40:s.translateY=30}else v||(s.opacity=1,s.translateX=0,s.translateY=0);const E=vp(e),w=Tp(e),y=s.rect.element.height,_=!d||v?0:y,T=v?o.rect.element.marginTop:0,R=f===0?0:o.rect.element.marginBottom,h=_+T+w.visual+R,D=_+T+w.bounds+R;if(o.translateY=Math.max(0,_-o.rect.element.marginTop)-E.top,c){const A=e.rect.element.width,O=A*c;c!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=c,e.ref.updateHistory=[]);const P=e.ref.updateHistory;P.push(A);const k=2;if(P.length>k*2){const x=P.length,U=x-10;let j=0;for(let G=x;G>=U;G--)if(P[G]===P[G-2]&&j++,j>=k)return}l.scalable=!1,l.height=O;const W=O-_-(R-E.bottom)-(v?T:0);w.visual>W?o.overflow=W:o.overflow=null,e.height=O}else if(r.fixedHeight){l.scalable=!1;const A=r.fixedHeight-_-(R-E.bottom)-(v?T:0);w.visual>A?o.overflow=A:o.overflow=null}else if(r.cappedHeight){const A=h>=r.cappedHeight,O=Math.min(r.cappedHeight,h);l.scalable=!0,l.height=A?O:O-E.top-E.bottom;const P=O-_-(R-E.bottom)-(v?T:0);h>r.cappedHeight&&w.visual>P?o.overflow=P:o.overflow=null,e.height=Math.min(r.cappedHeight,D-E.top-E.bottom)}else{const A=f>0?E.top+E.bottom:0;l.scalable=!0,l.height=Math.max(y,h-A),e.height=Math.max(y,D-A)}e.ref.credits&&l.heightCurrent&&(e.ref.credits.style.transform=`translateY(${l.heightCurrent}px)`)},vp=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Tp=e=>{let t=0,n=0;const r=e.ref.list,i=r.childViews[0],s=i.childViews.filter(T=>T.rect.element.height),o=e.query("GET_ACTIVE_ITEMS").map(T=>s.find(R=>R.id===T.id)).filter(T=>T);if(o.length===0)return{visual:t,bounds:n};const l=i.rect.element.width,c=ko(i,o,r.dragCoordinates),d=o[0].rect.element,f=d.marginTop+d.marginBottom,g=d.marginLeft+d.marginRight,v=d.width+g,I=d.height+f,E=typeof c<"u"&&c>=0?1:0,w=o.find(T=>T.markedForRemoval&&T.opacity<.45)?-1:0,y=o.length+E+w,_=Fo(l,v);return _===1?o.forEach(T=>{const R=T.rect.element.height+f;n+=R,t+=R*T.opacity}):(n=Math.ceil(y/_)*I,t=n),{visual:t,bounds:n}},Ip=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},$o=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),i=e.query("GET_TOTAL_ITEMS");let s=e.query("GET_MAX_FILES");const o=t.length;return!r&&o>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:be("warning",0,"Max files")}),!0):(s=r?s:1,!r&&n?!1:kn(s)&&i+o>s?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:be("warning",0,"Max files")}),!0):!1)},_p=(e,t,n)=>{const r=e.childViews[0];return ko(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Ks=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){const i=op(e.element,s=>{const o=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?s.every(c=>En("ALLOW_HOPPER_ITEM",c,{query:e.query}).every(d=>d===!0)&&o(c)):!0},{filterItems:s=>{const o=e.query("GET_IGNORED_FILES");return s.filter(l=>Pn(l)?!o.includes(l.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});i.onload=(s,o)=>{const c=e.ref.list.childViews[0].childViews.filter(f=>f.rect.element.height),d=e.query("GET_ACTIVE_ITEMS").map(f=>c.find(g=>g.id===f.id)).filter(f=>f);gt("ADD_ITEMS",s,{dispatch:e.dispatch}).then(f=>{if($o(e,f))return!1;e.dispatch("ADD_ITEMS",{items:f,index:_p(e.ref.list,d,o),interactionMethod:ut.DROP})}),e.dispatch("DID_DROP",{position:o}),e.dispatch("DID_END_DRAG",{position:o})},i.ondragstart=s=>{e.dispatch("DID_START_DRAG",{position:s})},i.ondrag=Tl(s=>{e.dispatch("DID_DRAG",{position:s})}),i.ondragend=s=>{e.dispatch("DID_END_DRAG",{position:s})},e.ref.hopper=i,e.ref.drip=e.appendChildView(e.createChildView(Of))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Qs=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),i=n&&!r;i&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Ef,{...t,onload:s=>{gt("ADD_ITEMS",s,{dispatch:e.dispatch}).then(o=>{if($o(e,o))return!1;e.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:ut.BROWSE})})}}),0):!i&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Zs=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=lp(),e.ref.paster.onload=i=>{gt("ADD_ITEMS",i,{dispatch:e.dispatch}).then(s=>{if($o(e,s))return!1;e.dispatch("ADD_ITEMS",{items:s,index:-1,interactionMethod:ut.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},yp=qe({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{Qs(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{Ks(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Zs(e)},DID_SET_DISABLED:({root:e,props:t})=>{Ks(e),Zs(e),Qs(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),bp=Se({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:mp,write:Ep,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",$r),e.element.removeEventListener("gesturestart",$r)},mixins:{styles:["height"]}}),Rp=(e={})=>{let t=null;const n=Vr(),r=Uc(wu(n),[Wu,Su(n)],[hd,Ou(n)]);r.dispatch("SET_OPTIONS",{options:e});const i=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",i);let s=null,o=!1,l=!1,c=null,d=null;const f=()=>{o||(o=!0),clearTimeout(s),s=setTimeout(()=>{o=!1,c=null,d=null,l&&(l=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",f);const g=bp(r,{id:Po()});let v=!1,I=!1;const E={_read:()=>{o&&(d=window.innerWidth,c||(c=d),!l&&d!==c&&(r.dispatch("DID_START_RESIZE"),l=!0)),I&&v&&(v=g.element.offsetParent===null),!v&&(g._read(),I=g.rect.element.hidden)},_write:L=>{const N=r.processActionQueue().filter(H=>!/^SET_/.test(H.type));v&&!N.length||(T(N),v=g._write(L,N,l),Lu(r.query("GET_ITEMS")),v&&r.processDispatchQueue())}},w=L=>N=>{const H={type:L};if(!N)return H;if(N.hasOwnProperty("error")&&(H.error=N.error?{...N.error}:null),N.status&&(H.status={...N.status}),N.file&&(H.output=N.file),N.source)H.file=N.source;else if(N.item||N.id){const z=N.item?N.item:r.query("GET_ITEM",N.id);H.file=z?je(z):null}return N.items&&(H.items=N.items.map(je)),/progress/.test(L)&&(H.progress=N.progress),N.hasOwnProperty("origin")&&N.hasOwnProperty("target")&&(H.origin=N.origin,H.target=N.target),H},y={DID_DESTROY:w("destroy"),DID_INIT:w("init"),DID_THROW_MAX_FILES:w("warning"),DID_INIT_ITEM:w("initfile"),DID_START_ITEM_LOAD:w("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:w("addfileprogress"),DID_LOAD_ITEM:w("addfile"),DID_THROW_ITEM_INVALID:[w("error"),w("addfile")],DID_THROW_ITEM_LOAD_ERROR:[w("error"),w("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[w("error"),w("removefile")],DID_PREPARE_OUTPUT:w("preparefile"),DID_START_ITEM_PROCESSING:w("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:w("processfileprogress"),DID_ABORT_ITEM_PROCESSING:w("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:w("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:w("processfiles"),DID_REVERT_ITEM_PROCESSING:w("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[w("error"),w("processfile")],DID_REMOVE_ITEM:w("removefile"),DID_UPDATE_ITEMS:w("updatefiles"),DID_ACTIVATE_ITEM:w("activatefile"),DID_REORDER_ITEMS:w("reorderfiles")},_=L=>{const N={pond:X,...L};delete N.type,g.element.dispatchEvent(new CustomEvent(`FilePond:${L.type}`,{detail:N,bubbles:!0,cancelable:!0,composed:!0}));const H=[];L.hasOwnProperty("error")&&H.push(L.error),L.hasOwnProperty("file")&&H.push(L.file);const z=["type","error","file"];Object.keys(L).filter(oe=>!z.includes(oe)).forEach(oe=>H.push(L[oe])),X.fire(L.type,...H);const J=r.query(`GET_ON${L.type.toUpperCase()}`);J&&J(...H)},T=L=>{L.length&&L.filter(N=>y[N.type]).forEach(N=>{const H=y[N.type];(Array.isArray(H)?H:[H]).forEach(z=>{N.type==="DID_INIT_ITEM"?_(z(N.data)):setTimeout(()=>{_(z(N.data))},0)})})},R=L=>r.dispatch("SET_OPTIONS",{options:L}),h=L=>r.query("GET_ACTIVE_ITEM",L),D=L=>new Promise((N,H)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:L,success:z=>{N(z)},failure:z=>{H(z)}})}),A=(L,N={})=>new Promise((H,z)=>{k([{source:L,options:N}],{index:N.index}).then(J=>H(J&&J[0])).catch(z)}),O=L=>L.file&&L.id,P=(L,N)=>(typeof L=="object"&&!O(L)&&!N&&(N=L,L=void 0),r.dispatch("REMOVE_ITEM",{...N,query:L}),r.query("GET_ACTIVE_ITEM",L)===null),k=(...L)=>new Promise((N,H)=>{const z=[],J={};if(wi(L[0]))z.push.apply(z,L[0]),Object.assign(J,L[1]||{});else{const oe=L[L.length-1];typeof oe=="object"&&!(oe instanceof Blob)&&Object.assign(J,L.pop()),z.push(...L)}r.dispatch("ADD_ITEMS",{items:z,index:J.index,interactionMethod:ut.API,success:N,failure:H})}),W=()=>r.query("GET_ACTIVE_ITEMS"),x=L=>new Promise((N,H)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:L,success:z=>{N(z)},failure:z=>{H(z)}})}),U=(...L)=>{const N=Array.isArray(L[0])?L[0]:L,H=N.length?N:W();return Promise.all(H.map(D))},j=(...L)=>{const N=Array.isArray(L[0])?L[0]:L;if(!N.length){const H=W().filter(z=>!(z.status===ie.IDLE&&z.origin===Me.LOCAL)&&z.status!==ie.PROCESSING&&z.status!==ie.PROCESSING_COMPLETE&&z.status!==ie.PROCESSING_REVERT_ERROR);return Promise.all(H.map(x))}return Promise.all(N.map(x))},G=(...L)=>{const N=Array.isArray(L[0])?L[0]:L;let H;typeof N[N.length-1]=="object"?H=N.pop():Array.isArray(L[0])&&(H=L[1]);const z=W();return N.length?N.map(oe=>ln(oe)?z[oe]?z[oe].id:null:oe).filter(oe=>oe).map(oe=>P(oe,H)):Promise.all(z.map(oe=>P(oe,H)))},X={...Si(),...E,...Au(r,n),setOptions:R,addFile:A,addFiles:k,getFile:h,processFile:x,prepareFile:D,removeFile:P,moveFile:(L,N)=>r.dispatch("MOVE_ITEM",{query:L,index:N}),getFiles:W,processFiles:j,removeFiles:G,prepareFiles:U,sort:L=>r.dispatch("SORT",{compare:L}),browse:()=>{var L=g.element.querySelector("input[type=file]");L&&L.click()},destroy:()=>{X.fire("destroy",g.element),r.dispatch("ABORT_ALL"),g._destroy(),window.removeEventListener("resize",f),document.removeEventListener("visibilitychange",i),r.dispatch("DID_DESTROY")},insertBefore:L=>_s(g.element,L),insertAfter:L=>ys(g.element,L),appendTo:L=>L.appendChild(g.element),replaceElement:L=>{_s(g.element,L),L.parentNode.removeChild(L),t=L},restoreElement:()=>{t&&(ys(t,g.element),g.element.parentNode.removeChild(g.element),t=null)},isAttachedTo:L=>g.element===L||t===L,element:{get:()=>g.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),Xt(X)},Il=(e={})=>{const t={};return Ie(Vr(),(r,i)=>{t[r]=i[0]}),Rp({...t,...e})},wp=e=>e.charAt(0).toLowerCase()+e.slice(1),Ap=e=>vl(e.replace(/^data-/,"")),_l=(e,t)=>{Ie(t,(n,r)=>{Ie(e,(i,s)=>{const o=new RegExp(n);if(!o.test(i)||(delete e[i],r===!1))return;if($e(r)){e[r]=s;return}const c=r.group;Ge(r)&&!e[c]&&(e[c]={}),e[c][wp(i.replace(o,""))]=s}),r.mapping&&_l(e[r.group],r.mapping)})},Op=(e,t={})=>{const n=[];Ie(e.attributes,i=>{n.push(e.attributes[i])});const r=n.filter(i=>i.name).reduce((i,s)=>{const o=Oe(e,s.name);return i[Ap(s.name)]=o===s.name?!0:o,i},{});return _l(r,t),r},Sp=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};En("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...t},i=Op(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(i).forEach(o=>{Ge(i[o])?(Ge(r[o])||(r[o]={}),Object.assign(r[o],i[o])):r[o]=i[o]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(o=>({source:o.value,options:{type:o.dataset.type}})));const s=Il(r);return e.files&&Array.from(e.files).forEach(o=>{s.addFile(o)}),s.replaceElement(e),s},Dp=(...e)=>kc(e[0])?Sp(...e):Il(...e),Cp=["fire","_read","_write"],Js=e=>{const t={};return Va(e,t,Cp),t},Lp=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>t[r]),Mp=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:(i,s)=>{},post:(i,s,o)=>{const l=Po();r.onmessage=c=>{c.data.id===l&&s(c.data.message)},r.postMessage({id:l,message:i},o)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},Pp=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),yl=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},Np=e=>yl(e,e.name),ea=[],xp=e=>{if(ea.includes(e))return;ea.push(e);const t=e({addFilter:Pu,utils:{Type:B,forin:Ie,isString:$e,isFile:Pn,toNaturalFileSize:tl,replaceInString:Lp,getExtensionFromFilename:Di,getFilenameWithoutExtension:Za,guesstimateMimeType:fl,getFileFromBlob:Mn,getFilenameFromURL:cr,createRoute:qe,createWorker:Mp,createView:Se,createItemAPI:je,loadImage:Pp,copyFile:Np,renameFile:yl,createBlob:Xa,applyFilterChain:gt,text:Re,getNumericAspectRatioFromString:qa},views:{fileActionButton:el}});Nu(t.options)},Bp=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",Gp=()=>"Promise"in window,Fp=()=>"slice"in Blob.prototype,kp=()=>"URL"in window&&"createObjectURL"in window.URL,Up=()=>"visibilityState"in document,Hp=()=>"performance"in window,Vp=()=>"supports"in(window.CSS||{}),Wp=()=>/MSIE|Trident/.test(window.navigator.userAgent),go=(()=>{const e=Ba()&&!Bp()&&Up()&&Gp()&&Fp()&&kp()&&Hp()&&(Vp()||Wp());return()=>e})(),qt={apps:[]},$p="filepond",vn=()=>{};let bl={},Rl={},wl={},mo={},xr=vn,Br=vn,Eo=vn,vo=vn,rr=vn,To=vn,qr=vn;if(go()){du(()=>{qt.apps.forEach(n=>n._read())},n=>{qt.apps.forEach(r=>r._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:go,create:xr,destroy:Br,parse:Eo,find:vo,registerPlugin:rr,setOptions:qr}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>Ie(Vr(),(n,r)=>{mo[n]=r[1]});bl={...Ya},wl={...Me},Rl={...ie},mo={},t(),xr=(...n)=>{const r=Dp(...n);return r.on("destroy",Br),qt.apps.push(r),Js(r)},Br=n=>{const r=qt.apps.findIndex(i=>i.isAttachedTo(n));return r>=0?(qt.apps.splice(r,1)[0].restoreElement(),!0):!1},Eo=n=>Array.from(n.querySelectorAll(`.${$p}`)).filter(s=>!qt.apps.find(o=>o.isAttachedTo(s))).map(s=>xr(s)),vo=n=>{const r=qt.apps.find(i=>i.isAttachedTo(n));return r?Js(r):null},rr=(...n)=>{n.forEach(xp),t()},To=()=>{const n={};return Ie(Vr(),(r,i)=>{n[r]=i[0]}),n},qr=n=>(Ge(n)&&(qt.apps.forEach(r=>{r.setOptions(n)}),xu(n)),To())}const qp=Object.freeze(Object.defineProperty({__proto__:null,get FileOrigin(){return wl},get FileStatus(){return Rl},get OptionTypes(){return mo},get Status(){return bl},get create(){return xr},get destroy(){return Br},get find(){return vo},get getOptions(){return To},get parse(){return Eo},get registerPlugin(){return rr},get setOptions(){return qr},supported:go},Symbol.toStringTag,{value:"Module"}));/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Yp=e=>/^image/.test(e.type),ta=(e,t)=>ir(e.x*t,e.y*t),na=(e,t)=>ir(e.x+t.x,e.y+t.y),zp=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:ir(e.x/t,e.y/t)},Ar=(e,t,n)=>{const r=Math.cos(t),i=Math.sin(t),s=ir(e.x-n.x,e.y-n.y);return ir(n.x+r*s.x-i*s.y,n.y+i*s.x+r*s.y)},ir=(e=0,t=0)=>({x:e,y:t}),Xe=(e,t,n=1,r)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(r?t[r]:Math.min(t.width,t.height))},jp=(e,t,n)=>{const r=e.borderStyle||e.lineStyle||"solid",i=e.backgroundColor||e.fontColor||"transparent",s=e.borderColor||e.lineColor||"transparent",o=Xe(e.borderWidth||e.lineWidth,t,n),l=e.lineCap||"round",c=e.lineJoin||"round",d=typeof r=="string"?"":r.map(g=>Xe(g,t,n)).join(","),f=e.opacity||1;return{"stroke-linecap":l,"stroke-linejoin":c,"stroke-width":o||0,"stroke-dasharray":d,stroke:s,fill:i,opacity:f}},at=e=>e!=null,Xp=(e,t,n=1)=>{let r=Xe(e.x,t,n,"width")||Xe(e.left,t,n,"width"),i=Xe(e.y,t,n,"height")||Xe(e.top,t,n,"height"),s=Xe(e.width,t,n,"width"),o=Xe(e.height,t,n,"height"),l=Xe(e.right,t,n,"width"),c=Xe(e.bottom,t,n,"height");return at(i)||(at(o)&&at(c)?i=t.height-o-c:i=c),at(r)||(at(s)&&at(l)?r=t.width-s-l:r=l),at(s)||(at(r)&&at(l)?s=t.width-r-l:s=0),at(o)||(at(i)&&at(c)?o=t.height-i-c:o=0),{x:r||0,y:i||0,width:s||0,height:o||0}},Kp=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),St=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),Qp="http://www.w3.org/2000/svg",Cn=(e,t)=>{const n=document.createElementNS(Qp,e);return t&&St(n,t),n},Zp=e=>St(e,{...e.rect,...e.styles}),Jp=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,r=e.rect.width*.5,i=e.rect.height*.5;return St(e,{cx:t,cy:n,rx:r,ry:i,...e.styles})},eh={contain:"xMidYMid meet",cover:"xMidYMid slice"},th=(e,t)=>{St(e,{...e.rect,...e.styles,preserveAspectRatio:eh[t.fit]||"none"})},nh={left:"start",center:"middle",right:"end"},rh=(e,t,n,r)=>{const i=Xe(t.fontSize,n,r),s=t.fontFamily||"sans-serif",o=t.fontWeight||"normal",l=nh[t.textAlign]||"start";St(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":o,"font-size":i,"font-family":s,"text-anchor":l}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},ih=(e,t,n,r)=>{St(e,{...e.rect,...e.styles,fill:"none"});const i=e.childNodes[0],s=e.childNodes[1],o=e.childNodes[2],l=e.rect,c={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(St(i,{x1:l.x,y1:l.y,x2:c.x,y2:c.y}),!t.lineDecoration)return;s.style.display="none",o.style.display="none";const d=zp({x:c.x-l.x,y:c.y-l.y}),f=Xe(.05,n,r);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const g=ta(d,f),v=na(l,g),I=Ar(l,2,v),E=Ar(l,-2,v);St(s,{style:"display:block;",d:`M${I.x},${I.y} L${l.x},${l.y} L${E.x},${E.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const g=ta(d,-f),v=na(c,g),I=Ar(c,2,v),E=Ar(c,-2,v);St(o,{style:"display:block;",d:`M${I.x},${I.y} L${c.x},${c.y} L${E.x},${E.y}`})}},oh=(e,t,n,r)=>{St(e,{...e.styles,fill:"none",d:Kp(t.points.map(i=>({x:Xe(i.x,n,r,"width"),y:Xe(i.y,n,r,"height")})))})},Or=e=>t=>Cn(e,{id:t.id}),sh=e=>{const t=Cn("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},ah=e=>{const t=Cn("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=Cn("line");t.appendChild(n);const r=Cn("path");t.appendChild(r);const i=Cn("path");return t.appendChild(i),t},lh={image:sh,rect:Or("rect"),ellipse:Or("ellipse"),text:Or("text"),path:Or("path"),line:ah},ch={rect:Zp,ellipse:Jp,image:th,text:rh,path:oh,line:ih},uh=(e,t)=>lh[e](t),dh=(e,t,n,r,i)=>{t!=="path"&&(e.rect=Xp(n,r,i)),e.styles=jp(n,r,i),ch[t](e,n,r,i)},fh=["x","y","left","top","right","bottom","width","height"],ph=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,hh=e=>{const[t,n]=e,r=n.points?{}:fh.reduce((i,s)=>(i[s]=ph(n[s]),i),{});return[t,{zIndex:0,...n,...r}]},gh=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,mh=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:r,resize:i,markup:s}=n,o=n.width,l=n.height;let c=r.width,d=r.height;if(i){const{size:I}=i;let E=I&&I.width,w=I&&I.height;const y=i.mode,_=i.upscale;E&&!w&&(w=E),w&&!E&&(E=w);const T=c<E&&d<w;if(!T||T&&_){let R=E/c,h=w/d;if(y==="force")c=E,d=w;else{let D;y==="cover"?D=Math.max(R,h):y==="contain"&&(D=Math.min(R,h)),c=c*D,d=d*D}}}const f={width:o,height:l};t.element.setAttribute("width",f.width),t.element.setAttribute("height",f.height);const g=Math.min(o/c,l/d);t.element.innerHTML="";const v=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");s.filter(v).map(hh).sort(gh).forEach(I=>{const[E,w]=I,y=uh(E,w);dh(y,E,w,f,g),t.element.appendChild(y)})}}),Kn=(e,t)=>({x:e,y:t}),Eh=(e,t)=>e.x*t.x+e.y*t.y,ra=(e,t)=>Kn(e.x-t.x,e.y-t.y),vh=(e,t)=>Eh(ra(e,t),ra(e,t)),ia=(e,t)=>Math.sqrt(vh(e,t)),oa=(e,t)=>{const n=e,r=1.5707963267948966,i=t,s=1.5707963267948966-t,o=Math.sin(r),l=Math.sin(i),c=Math.sin(s),d=Math.cos(s),f=n/o,g=f*l,v=f*c;return Kn(d*g,d*v)},Th=(e,t)=>{const n=e.width,r=e.height,i=oa(n,t),s=oa(r,t),o=Kn(e.x+Math.abs(i.x),e.y-Math.abs(i.y)),l=Kn(e.x+e.width+Math.abs(s.y),e.y+Math.abs(s.x)),c=Kn(e.x-Math.abs(s.y),e.y+e.height-Math.abs(s.x));return{width:ia(o,l),height:ia(o,c)}},Ih=(e,t,n=1)=>{const r=e.height/e.width;let i=1,s=t,o=1,l=r;l>s&&(l=s,o=l/r);const c=Math.max(i/o,s/l),d=e.width/(n*c*o),f=d*t;return{width:d,height:f}},Al=(e,t,n,r)=>{const i=r.x>.5?1-r.x:r.x,s=r.y>.5?1-r.y:r.y,o=i*2*e.width,l=s*2*e.height,c=Th(t,n);return Math.max(c.width/o,c.height/l)},Ol=(e,t)=>{let n=e.width,r=n*t;r>e.height&&(r=e.height,n=r/t);const i=(e.width-n)*.5,s=(e.height-r)*.5;return{x:i,y:s,width:n,height:r}},_h=(e,t={})=>{let{zoom:n,rotation:r,center:i,aspectRatio:s}=t;s||(s=e.height/e.width);const o=Ih(e,s,n),l={x:o.width*.5,y:o.height*.5},c={x:0,y:0,width:o.width,height:o.height,center:l},d=typeof t.scaleToFit>"u"||t.scaleToFit,f=Al(e,Ol(c,s),r,d?i:{x:.5,y:.5}),g=n*f;return{widthFloat:o.width/g,heightFloat:o.height/g,width:Math.round(o.width/g),height:Math.round(o.height/g)}},At={type:"spring",stiffness:.5,damping:.45,mass:10},yh=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),bh=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:At,originY:At,scaleX:At,scaleY:At,translateX:At,translateY:At,rotateZ:At}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(yh(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:r}=n.crop,{bitmap:i}=t.ref;i.scaleX=r.horizontal?-1:1,i.scaleY=r.vertical?-1:1}}),Rh=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){n.background&&(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(bh(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(mh(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const r=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");r!==null&&(r==="grid"?t.element.dataset.transparencyIndicator=r:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:r})=>{const{crop:i,markup:s,resize:o,dirty:l,width:c,height:d}=n;t.ref.image.crop=i;const f={x:0,y:0,width:c,height:d,center:{x:c*.5,y:d*.5}},g={width:t.ref.image.width,height:t.ref.image.height},v={x:i.center.x*g.width,y:i.center.y*g.height},I={x:f.center.x-g.width*i.center.x,y:f.center.y-g.height*i.center.y},E=Math.PI*2+i.rotation%(Math.PI*2),w=i.aspectRatio||g.height/g.width,y=typeof i.scaleToFit>"u"||i.scaleToFit,_=Al(g,Ol(f,w),E,y?i.center:{x:.5,y:.5}),T=i.zoom*_;s&&s.length?(t.ref.createMarkup(),t.ref.markup.width=c,t.ref.markup.height=d,t.ref.markup.resize=o,t.ref.markup.dirty=l,t.ref.markup.markup=s,t.ref.markup.crop=_h(g,i)):t.ref.markup&&t.ref.destroyMarkup();const R=t.ref.image;if(r){R.originX=null,R.originY=null,R.translateX=null,R.translateY=null,R.rotateZ=null,R.scaleX=null,R.scaleY=null;return}R.originX=v.x,R.originY=v.y,R.translateX=I.x,R.translateY=I.y,R.rotateZ=E,R.scaleX=T,R.scaleY=T}}),wh=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:At,scaleY:At,translateY:At,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(Rh(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:r})=>{const{clip:i}=t.ref,{image:s,crop:o,markup:l,resize:c,dirty:d}=n;if(i.crop=o,i.markup=l,i.resize=c,i.dirty=d,i.opacity=r?0:1,r||t.rect.element.hidden)return;const f=s.height/s.width;let g=o.aspectRatio||f;const v=t.rect.inner.width,I=t.rect.inner.height;let E=t.query("GET_IMAGE_PREVIEW_HEIGHT");const w=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),y=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),_=t.query("GET_PANEL_ASPECT_RATIO"),T=t.query("GET_ALLOW_MULTIPLE");_&&!T&&(E=v*_,g=_);let R=E!==null?E:Math.max(w,Math.min(v*g,y)),h=R/g;h>v&&(h=v,R=h*g),R>I&&(R=I,h=I/g),i.width=h,i.height=R}});let Ah=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,sa=0;const Oh=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let r=Ah;if(document.querySelector("base")){const i=new URL(window.location.href.replace(window.location.hash,"")).href;r=r.replace(/url\(\#/g,"url("+i+"#")}sa++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=r.replace(/__UID__/g,sa)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),Sh=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},Dh=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,r=t.data,i=r.length,s=n[0],o=n[1],l=n[2],c=n[3],d=n[4],f=n[5],g=n[6],v=n[7],I=n[8],E=n[9],w=n[10],y=n[11],_=n[12],T=n[13],R=n[14],h=n[15],D=n[16],A=n[17],O=n[18],P=n[19];let k=0,W=0,x=0,U=0,j=0;for(;k<i;k+=4)W=r[k]/255,x=r[k+1]/255,U=r[k+2]/255,j=r[k+3]/255,r[k]=Math.max(0,Math.min((W*s+x*o+U*l+j*c+d)*255,255)),r[k+1]=Math.max(0,Math.min((W*f+x*g+U*v+j*I+E)*255,255)),r[k+2]=Math.max(0,Math.min((W*w+x*y+U*_+j*T+R)*255,255)),r[k+3]=Math.max(0,Math.min((W*h+x*D+U*A+j*O+P)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},Ch=(e,t)=>{let n=new Image;n.onload=()=>{const r=n.naturalWidth,i=n.naturalHeight;n=null,t(r,i)},n.src=e},Lh={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},Mh=(e,t,n,r)=>{r!==-1&&e.transform.apply(e,Lh[r](t,n))},Ph=(e,t,n,r)=>{t=Math.round(t),n=Math.round(n);const i=document.createElement("canvas");i.width=t,i.height=n;const s=i.getContext("2d");return r>=5&&r<=8&&([t,n]=[n,t]),Mh(s,t,n,r),s.drawImage(e,0,0,t,n),i},Sl=e=>/^image/.test(e.type)&&!/svg/.test(e.type),Nh=10,xh=10,Bh=e=>{const t=Math.min(Nh/e.width,xh/e.height),n=document.createElement("canvas"),r=n.getContext("2d"),i=n.width=Math.ceil(e.width*t),s=n.height=Math.ceil(e.height*t);r.drawImage(e,0,0,i,s);let o=null;try{o=r.getImageData(0,0,i,s).data}catch{return null}const l=o.length;let c=0,d=0,f=0,g=0;for(;g<l;g+=4)c+=o[g]*o[g],d+=o[g+1]*o[g+1],f+=o[g+2]*o[g+2];return c=Ki(c,l),d=Ki(d,l),f=Ki(f,l),{r:c,g:d,b:f}},Ki=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),Gh=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),Fh=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},kh=e=>new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),Uh=e=>{const t=Oh(e),n=wh(e),{createWorker:r}=e.utils,i=(T,R,h)=>new Promise(D=>{T.ref.imageData||(T.ref.imageData=h.getContext("2d").getImageData(0,0,h.width,h.height));const A=Fh(T.ref.imageData);if(!R||R.length!==20)return h.getContext("2d").putImageData(A,0,0),D();const O=r(Dh);O.post({imageData:A,colorMatrix:R},P=>{h.getContext("2d").putImageData(P,0,0),O.terminate(),D()},[A.data.buffer])}),s=(T,R)=>{T.removeChildView(R),R.image.width=1,R.image.height=1,R._destroy()},o=({root:T})=>{const R=T.ref.images.shift();return R.opacity=0,R.translateY=-15,T.ref.imageViewBin.push(R),R},l=({root:T,props:R,image:h})=>{const D=R.id,A=T.query("GET_ITEM",{id:D});if(!A)return;const O=A.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},P=T.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let k,W,x=!1;T.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(k=A.getMetadata("markup")||[],W=A.getMetadata("resize"),x=!0);const U=T.appendChildView(T.createChildView(n,{id:D,image:h,crop:O,resize:W,markup:k,dirty:x,background:P,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),T.childViews.length);T.ref.images.push(U),U.opacity=1,U.scaleX=1,U.scaleY=1,U.translateY=0,setTimeout(()=>{T.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:D})},250)},c=({root:T,props:R})=>{const h=T.query("GET_ITEM",{id:R.id});if(!h)return;const D=T.ref.images[T.ref.images.length-1];D.crop=h.getMetadata("crop"),D.background=T.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),T.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(D.dirty=!0,D.resize=h.getMetadata("resize"),D.markup=h.getMetadata("markup"))},d=({root:T,props:R,action:h})=>{if(!/crop|filter|markup|resize/.test(h.change.key)||!T.ref.images.length)return;const D=T.query("GET_ITEM",{id:R.id});if(D){if(/filter/.test(h.change.key)){const A=T.ref.images[T.ref.images.length-1];i(T,h.change.value,A.image);return}if(/crop|markup|resize/.test(h.change.key)){const A=D.getMetadata("crop"),O=T.ref.images[T.ref.images.length-1];if(A&&A.aspectRatio&&O.crop&&O.crop.aspectRatio&&Math.abs(A.aspectRatio-O.crop.aspectRatio)>1e-5){const P=o({root:T});l({root:T,props:R,image:Gh(P.image)})}else c({root:T,props:R})}}},f=T=>{const h=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(h?parseInt(h[1]):null)<=58?!1:"createImageBitmap"in window&&Sl(T)},g=({root:T,props:R})=>{const{id:h}=R,D=T.query("GET_ITEM",h);if(!D)return;const A=URL.createObjectURL(D.file);Ch(A,(O,P)=>{T.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:h,width:O,height:P})})},v=({root:T,props:R})=>{const{id:h}=R,D=T.query("GET_ITEM",h);if(!D)return;const A=URL.createObjectURL(D.file),O=()=>{kh(A).then(P)},P=k=>{URL.revokeObjectURL(A);const x=(D.getMetadata("exif")||{}).orientation||-1;let{width:U,height:j}=k;if(!U||!j)return;x>=5&&x<=8&&([U,j]=[j,U]);const G=Math.max(1,window.devicePixelRatio*.75),L=T.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*G,N=j/U,H=T.rect.element.width,z=T.rect.element.height;let J=H,oe=J*N;N>1?(J=Math.min(U,H*L),oe=J*N):(oe=Math.min(j,z*L),J=oe/N);const we=Ph(k,J,oe,x),Ye=()=>{const Pe=T.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?Bh(data):null;D.setMetadata("color",Pe,!0),"close"in k&&k.close(),T.ref.overlayShadow.opacity=1,l({root:T,props:R,image:we})},me=D.getMetadata("filter");me?i(T,me,we).then(Ye):Ye()};if(f(D.file)){const k=r(Sh);k.post({file:D.file},W=>{if(k.terminate(),!W){O();return}P(W)})}else O()},I=({root:T})=>{const R=T.ref.images[T.ref.images.length-1];R.translateY=0,R.scaleX=1,R.scaleY=1,R.opacity=1},E=({root:T})=>{T.ref.overlayShadow.opacity=1,T.ref.overlayError.opacity=0,T.ref.overlaySuccess.opacity=0},w=({root:T})=>{T.ref.overlayShadow.opacity=.25,T.ref.overlayError.opacity=1},y=({root:T})=>{T.ref.overlayShadow.opacity=.25,T.ref.overlaySuccess.opacity=1},_=({root:T})=>{T.ref.images=[],T.ref.imageData=null,T.ref.imageViewBin=[],T.ref.overlayShadow=T.appendChildView(T.createChildView(t,{opacity:0,status:"idle"})),T.ref.overlaySuccess=T.appendChildView(T.createChildView(t,{opacity:0,status:"success"})),T.ref.overlayError=T.appendChildView(T.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:_,styles:["height"],apis:["height"],destroy:({root:T})=>{T.ref.images.forEach(R=>{R.image.width=1,R.image.height=1})},didWriteView:({root:T})=>{T.ref.images.forEach(R=>{R.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:I,DID_IMAGE_PREVIEW_CONTAINER_CREATE:g,DID_FINISH_CALCULATE_PREVIEWSIZE:v,DID_UPDATE_ITEM_METADATA:d,DID_THROW_ITEM_LOAD_ERROR:w,DID_THROW_ITEM_PROCESSING_ERROR:w,DID_THROW_ITEM_INVALID:w,DID_COMPLETE_ITEM_PROCESSING:y,DID_START_ITEM_PROCESSING:E,DID_REVERT_ITEM_PROCESSING:E},({root:T})=>{const R=T.ref.imageViewBin.filter(h=>h.opacity===0);T.ref.imageViewBin=T.ref.imageViewBin.filter(h=>h.opacity>0),R.forEach(h=>s(T,h)),R.length=0})})},Dl=e=>{const{addFilter:t,utils:n}=e,{Type:r,createRoute:i,isFile:s}=n,o=Uh(e);return t("CREATE_VIEW",l=>{const{is:c,view:d,query:f}=l;if(!c("file")||!f("GET_ALLOW_IMAGE_PREVIEW"))return;const g=({root:y,props:_})=>{const{id:T}=_,R=f("GET_ITEM",T);if(!R||!s(R.file)||R.archived)return;const h=R.file;if(!Yp(h)||!f("GET_IMAGE_PREVIEW_FILTER_ITEM")(R))return;const D="createImageBitmap"in(window||{}),A=f("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!D&&A&&h.size>A)return;y.ref.imagePreview=d.appendChildView(d.createChildView(o,{id:T}));const O=y.query("GET_IMAGE_PREVIEW_HEIGHT");O&&y.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:R.id,height:O});const P=!D&&h.size>f("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");y.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:T},P)},v=(y,_)=>{if(!y.ref.imagePreview)return;let{id:T}=_;const R=y.query("GET_ITEM",{id:T});if(!R)return;const h=y.query("GET_PANEL_ASPECT_RATIO"),D=y.query("GET_ITEM_PANEL_ASPECT_RATIO"),A=y.query("GET_IMAGE_PREVIEW_HEIGHT");if(h||D||A)return;let{imageWidth:O,imageHeight:P}=y.ref;if(!O||!P)return;const k=y.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),W=y.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),U=(R.getMetadata("exif")||{}).orientation||-1;if(U>=5&&U<=8&&([O,P]=[P,O]),!Sl(R.file)||y.query("GET_IMAGE_PREVIEW_UPSCALE")){const H=2048/O;O*=H,P*=H}const j=P/O,G=(R.getMetadata("crop")||{}).aspectRatio||j;let X=Math.max(k,Math.min(P,W));const L=y.rect.element.width,N=Math.min(L*G,X);y.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:R.id,height:N})},I=({root:y})=>{y.ref.shouldRescale=!0},E=({root:y,action:_})=>{_.change.key==="crop"&&(y.ref.shouldRescale=!0)},w=({root:y,action:_})=>{y.ref.imageWidth=_.width,y.ref.imageHeight=_.height,y.ref.shouldRescale=!0,y.ref.shouldDrawPreview=!0,y.dispatch("KICK")};d.registerWriter(i({DID_RESIZE_ROOT:I,DID_STOP_RESIZE:I,DID_LOAD_ITEM:g,DID_IMAGE_PREVIEW_CALCULATE_SIZE:w,DID_UPDATE_ITEM_METADATA:E},({root:y,props:_})=>{y.ref.imagePreview&&(y.rect.element.hidden||(y.ref.shouldRescale&&(v(y,_),y.ref.shouldRescale=!1),y.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{y.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:_.id})})}),y.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,r.BOOLEAN],imagePreviewFilterItem:[()=>!0,r.FUNCTION],imagePreviewHeight:[null,r.INT],imagePreviewMinHeight:[44,r.INT],imagePreviewMaxHeight:[256,r.INT],imagePreviewMaxFileSize:[null,r.INT],imagePreviewZoomFactor:[2,r.INT],imagePreviewUpscale:[!1,r.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,r.INT],imagePreviewTransparencyIndicator:[null,r.STRING],imagePreviewCalculateAverageImageColor:[!1,r.BOOLEAN],imagePreviewMarkupShow:[!0,r.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,r.FUNCTION]}}},Hh=typeof window<"u"&&typeof window.document<"u";Hh&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Dl}));/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Vh=e=>/^image\/jpeg/.test(e.type),on={JPEG:65496,APP1:65505,EXIF:1165519206,TIFF:18761,Orientation:274,Unknown:65280},sn=(e,t,n=!1)=>e.getUint16(t,n),aa=(e,t,n=!1)=>e.getUint32(t,n),Wh=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=function(i){const s=new DataView(i.target.result);if(sn(s,0)!==on.JPEG){t(-1);return}const o=s.byteLength;let l=2;for(;l<o;){const c=sn(s,l);if(l+=2,c===on.APP1){if(aa(s,l+=2)!==on.EXIF)break;const d=sn(s,l+=6)===on.TIFF;l+=aa(s,l+4,d);const f=sn(s,l,d);l+=2;for(let g=0;g<f;g++)if(sn(s,l+g*12,d)===on.Orientation){t(sn(s,l+g*12+8,d));return}}else{if((c&on.Unknown)!==on.Unknown)break;l+=sn(s,l)}}t(-1)},r.readAsArrayBuffer(e.slice(0,64*1024))}),$h=typeof window<"u"&&typeof window.document<"u",qh=()=>$h,Yh="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let Cl;const Gr=qh()?new Image:{};Gr.onload=()=>Cl=Gr.naturalWidth>Gr.naturalHeight;Gr.src=Yh;const zh=()=>Cl,Ll=({addFilter:e,utils:t})=>{const{Type:n,isFile:r}=t;return e("DID_LOAD_ITEM",(i,{query:s})=>new Promise((o,l)=>{const c=i.file;if(!r(c)||!Vh(c)||!s("GET_ALLOW_IMAGE_EXIF_ORIENTATION")||!zh())return o(i);Wh(c).then(d=>{i.setMetadata("exif",{orientation:d}),o(i)})})),{options:{allowImageExifOrientation:[!0,n.BOOLEAN]}}},jh=typeof window<"u"&&typeof window.document<"u";jh&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ll}));const Xh={labelIdle:'Dateien ablegen oder <span class="filepond--label-action"> auswhlen </span>',labelInvalidField:"Feld beinhaltet ungltige Dateien",labelFileWaitingForSize:"Dateigre berechnen",labelFileSizeNotAvailable:"Dateigre nicht verfgbar",labelFileLoading:"Laden",labelFileLoadError:"Fehler beim Laden",labelFileProcessing:"Upload luft",labelFileProcessingComplete:"Upload abgeschlossen",labelFileProcessingAborted:"Upload abgebrochen",labelFileProcessingError:"Fehler beim Upload",labelFileProcessingRevertError:"Fehler beim Wiederherstellen",labelFileRemoveError:"Fehler beim Lschen",labelTapToCancel:"abbrechen",labelTapToRetry:"erneut versuchen",labelTapToUndo:"rckgngig",labelButtonRemoveItem:"Entfernen",labelButtonAbortItemLoad:"Verwerfen",labelButtonRetryItemLoad:"Erneut versuchen",labelButtonAbortItemProcessing:"Abbrechen",labelButtonUndoItemProcessing:"Rckgngig",labelButtonRetryItemProcessing:"Erneut versuchen",labelButtonProcessItem:"Upload",labelMaxFileSizeExceeded:"Datei ist zu gro",labelMaxFileSize:"Maximale Dateigre: {filesize}",labelMaxTotalFileSizeExceeded:"Maximale gesamte Dateigre berschritten",labelMaxTotalFileSize:"Maximale gesamte Dateigre: {filesize}",labelFileTypeNotAllowed:"Dateityp ungltig",fileValidateTypeLabelExpectedTypes:"Erwartet {allButLastType} oder {lastType}",imageValidateSizeLabelFormatError:"Bildtyp nicht untersttzt",imageValidateSizeLabelImageSizeTooSmall:"Bild ist zu klein",imageValidateSizeLabelImageSizeTooBig:"Bild ist zu gro",imageValidateSizeLabelExpectedMinSize:"Mindestgre: {minWidth}  {minHeight}",imageValidateSizeLabelExpectedMaxSize:"Maximale Gre: {maxWidth}  {maxHeight}",imageValidateSizeLabelImageResolutionTooLow:"Auflsung ist zu niedrig",imageValidateSizeLabelImageResolutionTooHigh:"Auflsung ist zu hoch",imageValidateSizeLabelExpectedMinResolution:"Mindestauflsung: {minResolution}",imageValidateSizeLabelExpectedMaxResolution:"Maximale Auflsung: {maxResolution}"};var Qe="top",ft="bottom",pt="right",Ze="left",qo="auto",ur=[Qe,ft,pt,Ze],Nn="start",or="end",Kh="clippingParents",Ml="viewport",jn="popper",Qh="reference",la=ur.reduce(function(e,t){return e.concat([t+"-"+Nn,t+"-"+or])},[]),Pl=[].concat(ur,[qo]).reduce(function(e,t){return e.concat([t,t+"-"+Nn,t+"-"+or])},[]),Zh="beforeRead",Jh="read",eg="afterRead",tg="beforeMain",ng="main",rg="afterMain",ig="beforeWrite",og="write",sg="afterWrite",ag=[Zh,Jh,eg,tg,ng,rg,ig,og,sg];function Ct(e){return e?(e.nodeName||"").toLowerCase():null}function it(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function mn(e){var t=it(e).Element;return e instanceof t||e instanceof Element}function dt(e){var t=it(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Yo(e){if(typeof ShadowRoot>"u")return!1;var t=it(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function lg(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},s=t.elements[n];!dt(s)||!Ct(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var l=i[o];l===!1?s.removeAttribute(o):s.setAttribute(o,l===!0?"":l)}))})}function cg(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],s=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),l=o.reduce(function(c,d){return c[d]="",c},{});!dt(i)||!Ct(i)||(Object.assign(i.style,l),Object.keys(s).forEach(function(c){i.removeAttribute(c)}))})}}const Nl={name:"applyStyles",enabled:!0,phase:"write",fn:lg,effect:cg,requires:["computeStyles"]};function Dt(e){return e.split("-")[0]}var gn=Math.max,Yr=Math.min,xn=Math.round;function Io(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function xl(){return!/^((?!chrome|android).)*safari/i.test(Io())}function Bn(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&dt(e)&&(i=e.offsetWidth>0&&xn(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&xn(r.height)/e.offsetHeight||1);var o=mn(e)?it(e):window,l=o.visualViewport,c=!xl()&&n,d=(r.left+(c&&l?l.offsetLeft:0))/i,f=(r.top+(c&&l?l.offsetTop:0))/s,g=r.width/i,v=r.height/s;return{width:g,height:v,top:f,right:d+g,bottom:f+v,left:d,x:d,y:f}}function zo(e){var t=Bn(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Bl(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Yo(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function kt(e){return it(e).getComputedStyle(e)}function ug(e){return["table","td","th"].indexOf(Ct(e))>=0}function Kt(e){return((mn(e)?e.ownerDocument:e.document)||window.document).documentElement}function Mi(e){return Ct(e)==="html"?e:e.assignedSlot||e.parentNode||(Yo(e)?e.host:null)||Kt(e)}function ca(e){return!dt(e)||kt(e).position==="fixed"?null:e.offsetParent}function dg(e){var t=/firefox/i.test(Io()),n=/Trident/i.test(Io());if(n&&dt(e)){var r=kt(e);if(r.position==="fixed")return null}var i=Mi(e);for(Yo(i)&&(i=i.host);dt(i)&&["html","body"].indexOf(Ct(i))<0;){var s=kt(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function dr(e){for(var t=it(e),n=ca(e);n&&ug(n)&&kt(n).position==="static";)n=ca(n);return n&&(Ct(n)==="html"||Ct(n)==="body"&&kt(n).position==="static")?t:n||dg(e)||t}function jo(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Qn(e,t,n){return gn(e,Yr(t,n))}function fg(e,t,n){var r=Qn(e,t,n);return r>n?n:r}function Gl(){return{top:0,right:0,bottom:0,left:0}}function Fl(e){return Object.assign({},Gl(),e)}function kl(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var pg=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Fl(typeof t!="number"?t:kl(t,ur))};function hg(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,l=Dt(n.placement),c=jo(l),d=[Ze,pt].indexOf(l)>=0,f=d?"height":"width";if(!(!s||!o)){var g=pg(i.padding,n),v=zo(s),I=c==="y"?Qe:Ze,E=c==="y"?ft:pt,w=n.rects.reference[f]+n.rects.reference[c]-o[c]-n.rects.popper[f],y=o[c]-n.rects.reference[c],_=dr(s),T=_?c==="y"?_.clientHeight||0:_.clientWidth||0:0,R=w/2-y/2,h=g[I],D=T-v[f]-g[E],A=T/2-v[f]/2+R,O=Qn(h,A,D),P=c;n.modifiersData[r]=(t={},t[P]=O,t.centerOffset=O-A,t)}}function gg(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||Bl(t.elements.popper,i)&&(t.elements.arrow=i))}const mg={name:"arrow",enabled:!0,phase:"main",fn:hg,effect:gg,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Gn(e){return e.split("-")[1]}var Eg={top:"auto",right:"auto",bottom:"auto",left:"auto"};function vg(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:xn(n*i)/i||0,y:xn(r*i)/i||0}}function ua(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,f=e.roundOffsets,g=e.isFixed,v=o.x,I=v===void 0?0:v,E=o.y,w=E===void 0?0:E,y=typeof f=="function"?f({x:I,y:w}):{x:I,y:w};I=y.x,w=y.y;var _=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),R=Ze,h=Qe,D=window;if(d){var A=dr(n),O="clientHeight",P="clientWidth";if(A===it(n)&&(A=Kt(n),kt(A).position!=="static"&&l==="absolute"&&(O="scrollHeight",P="scrollWidth")),A=A,i===Qe||(i===Ze||i===pt)&&s===or){h=ft;var k=g&&A===D&&D.visualViewport?D.visualViewport.height:A[O];w-=k-r.height,w*=c?1:-1}if(i===Ze||(i===Qe||i===ft)&&s===or){R=pt;var W=g&&A===D&&D.visualViewport?D.visualViewport.width:A[P];I-=W-r.width,I*=c?1:-1}}var x=Object.assign({position:l},d&&Eg),U=f===!0?vg({x:I,y:w},it(n)):{x:I,y:w};if(I=U.x,w=U.y,c){var j;return Object.assign({},x,(j={},j[h]=T?"0":"",j[R]=_?"0":"",j.transform=(D.devicePixelRatio||1)<=1?"translate("+I+"px, "+w+"px)":"translate3d("+I+"px, "+w+"px, 0)",j))}return Object.assign({},x,(t={},t[h]=T?w+"px":"",t[R]=_?I+"px":"",t.transform="",t))}function Tg(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,l=n.roundOffsets,c=l===void 0?!0:l,d={placement:Dt(t.placement),variation:Gn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ua(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ua(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Ig={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Tg,data:{}};var Sr={passive:!0};function _g(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,l=o===void 0?!0:o,c=it(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&d.forEach(function(f){f.addEventListener("scroll",n.update,Sr)}),l&&c.addEventListener("resize",n.update,Sr),function(){s&&d.forEach(function(f){f.removeEventListener("scroll",n.update,Sr)}),l&&c.removeEventListener("resize",n.update,Sr)}}const yg={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:_g,data:{}};var bg={left:"right",right:"left",bottom:"top",top:"bottom"};function Fr(e){return e.replace(/left|right|bottom|top/g,function(t){return bg[t]})}var Rg={start:"end",end:"start"};function da(e){return e.replace(/start|end/g,function(t){return Rg[t]})}function Xo(e){var t=it(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Ko(e){return Bn(Kt(e)).left+Xo(e).scrollLeft}function wg(e,t){var n=it(e),r=Kt(e),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){s=i.width,o=i.height;var d=xl();(d||!d&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:l+Ko(e),y:c}}function Ag(e){var t,n=Kt(e),r=Xo(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=gn(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=gn(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+Ko(e),c=-r.scrollTop;return kt(i||n).direction==="rtl"&&(l+=gn(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:l,y:c}}function Qo(e){var t=kt(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Ul(e){return["html","body","#document"].indexOf(Ct(e))>=0?e.ownerDocument.body:dt(e)&&Qo(e)?e:Ul(Mi(e))}function Zn(e,t){var n;t===void 0&&(t=[]);var r=Ul(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=it(r),o=i?[s].concat(s.visualViewport||[],Qo(r)?r:[]):r,l=t.concat(o);return i?l:l.concat(Zn(Mi(o)))}function _o(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Og(e,t){var n=Bn(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function fa(e,t,n){return t===Ml?_o(wg(e,n)):mn(t)?Og(t,n):_o(Ag(Kt(e)))}function Sg(e){var t=Zn(Mi(e)),n=["absolute","fixed"].indexOf(kt(e).position)>=0,r=n&&dt(e)?dr(e):e;return mn(r)?t.filter(function(i){return mn(i)&&Bl(i,r)&&Ct(i)!=="body"}):[]}function Dg(e,t,n,r){var i=t==="clippingParents"?Sg(e):[].concat(t),s=[].concat(i,[n]),o=s[0],l=s.reduce(function(c,d){var f=fa(e,d,r);return c.top=gn(f.top,c.top),c.right=Yr(f.right,c.right),c.bottom=Yr(f.bottom,c.bottom),c.left=gn(f.left,c.left),c},fa(e,o,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Hl(e){var t=e.reference,n=e.element,r=e.placement,i=r?Dt(r):null,s=r?Gn(r):null,o=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,c;switch(i){case Qe:c={x:o,y:t.y-n.height};break;case ft:c={x:o,y:t.y+t.height};break;case pt:c={x:t.x+t.width,y:l};break;case Ze:c={x:t.x-n.width,y:l};break;default:c={x:t.x,y:t.y}}var d=i?jo(i):null;if(d!=null){var f=d==="y"?"height":"width";switch(s){case Nn:c[d]=c[d]-(t[f]/2-n[f]/2);break;case or:c[d]=c[d]+(t[f]/2-n[f]/2);break}}return c}function sr(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,s=n.strategy,o=s===void 0?e.strategy:s,l=n.boundary,c=l===void 0?Kh:l,d=n.rootBoundary,f=d===void 0?Ml:d,g=n.elementContext,v=g===void 0?jn:g,I=n.altBoundary,E=I===void 0?!1:I,w=n.padding,y=w===void 0?0:w,_=Fl(typeof y!="number"?y:kl(y,ur)),T=v===jn?Qh:jn,R=e.rects.popper,h=e.elements[E?T:v],D=Dg(mn(h)?h:h.contextElement||Kt(e.elements.popper),c,f,o),A=Bn(e.elements.reference),O=Hl({reference:A,element:R,strategy:"absolute",placement:i}),P=_o(Object.assign({},R,O)),k=v===jn?P:A,W={top:D.top-k.top+_.top,bottom:k.bottom-D.bottom+_.bottom,left:D.left-k.left+_.left,right:k.right-D.right+_.right},x=e.modifiersData.offset;if(v===jn&&x){var U=x[i];Object.keys(W).forEach(function(j){var G=[pt,ft].indexOf(j)>=0?1:-1,X=[Qe,ft].indexOf(j)>=0?"y":"x";W[j]+=U[X]*G})}return W}function Cg(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,d=c===void 0?Pl:c,f=Gn(r),g=f?l?la:la.filter(function(E){return Gn(E)===f}):ur,v=g.filter(function(E){return d.indexOf(E)>=0});v.length===0&&(v=g);var I=v.reduce(function(E,w){return E[w]=sr(e,{placement:w,boundary:i,rootBoundary:s,padding:o})[Dt(w)],E},{});return Object.keys(I).sort(function(E,w){return I[E]-I[w]})}function Lg(e){if(Dt(e)===qo)return[];var t=Fr(e);return[da(e),t,da(t)]}function Mg(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!0:o,c=n.fallbackPlacements,d=n.padding,f=n.boundary,g=n.rootBoundary,v=n.altBoundary,I=n.flipVariations,E=I===void 0?!0:I,w=n.allowedAutoPlacements,y=t.options.placement,_=Dt(y),T=_===y,R=c||(T||!E?[Fr(y)]:Lg(y)),h=[y].concat(R).reduce(function(me,Pe){return me.concat(Dt(Pe)===qo?Cg(t,{placement:Pe,boundary:f,rootBoundary:g,padding:d,flipVariations:E,allowedAutoPlacements:w}):Pe)},[]),D=t.rects.reference,A=t.rects.popper,O=new Map,P=!0,k=h[0],W=0;W<h.length;W++){var x=h[W],U=Dt(x),j=Gn(x)===Nn,G=[Qe,ft].indexOf(U)>=0,X=G?"width":"height",L=sr(t,{placement:x,boundary:f,rootBoundary:g,altBoundary:v,padding:d}),N=G?j?pt:Ze:j?ft:Qe;D[X]>A[X]&&(N=Fr(N));var H=Fr(N),z=[];if(s&&z.push(L[U]<=0),l&&z.push(L[N]<=0,L[H]<=0),z.every(function(me){return me})){k=x,P=!1;break}O.set(x,z)}if(P)for(var J=E?3:1,oe=function(Pe){var Q=h.find(function(ge){var _e=O.get(ge);if(_e)return _e.slice(0,Pe).every(function(Ue){return Ue})});if(Q)return k=Q,"break"},we=J;we>0;we--){var Ye=oe(we);if(Ye==="break")break}t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}}const Pg={name:"flip",enabled:!0,phase:"main",fn:Mg,requiresIfExists:["offset"],data:{_skip:!1}};function pa(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ha(e){return[Qe,pt,ft,Ze].some(function(t){return e[t]>=0})}function Ng(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=sr(t,{elementContext:"reference"}),l=sr(t,{altBoundary:!0}),c=pa(o,r),d=pa(l,i,s),f=ha(c),g=ha(d);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:f,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":g})}const xg={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ng};function Bg(e,t,n){var r=Dt(e),i=[Ze,Qe].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=s[0],l=s[1];return o=o||0,l=(l||0)*i,[Ze,pt].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function Gg(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=i===void 0?[0,0]:i,o=Pl.reduce(function(f,g){return f[g]=Bg(g,t.rects,s),f},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[r]=o}const Fg={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Gg};function kg(e){var t=e.state,n=e.name;t.modifiersData[n]=Hl({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Ug={name:"popperOffsets",enabled:!0,phase:"read",fn:kg,data:{}};function Hg(e){return e==="x"?"y":"x"}function Vg(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!1:o,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,g=n.padding,v=n.tether,I=v===void 0?!0:v,E=n.tetherOffset,w=E===void 0?0:E,y=sr(t,{boundary:c,rootBoundary:d,padding:g,altBoundary:f}),_=Dt(t.placement),T=Gn(t.placement),R=!T,h=jo(_),D=Hg(h),A=t.modifiersData.popperOffsets,O=t.rects.reference,P=t.rects.popper,k=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,W=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),x=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,U={x:0,y:0};if(A){if(s){var j,G=h==="y"?Qe:Ze,X=h==="y"?ft:pt,L=h==="y"?"height":"width",N=A[h],H=N+y[G],z=N-y[X],J=I?-P[L]/2:0,oe=T===Nn?O[L]:P[L],we=T===Nn?-P[L]:-O[L],Ye=t.elements.arrow,me=I&&Ye?zo(Ye):{width:0,height:0},Pe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Gl(),Q=Pe[G],ge=Pe[X],_e=Qn(0,O[L],me[L]),Ue=R?O[L]/2-J-_e-Q-W.mainAxis:oe-_e-Q-W.mainAxis,fe=R?-O[L]/2+J+_e+ge+W.mainAxis:we+_e+ge+W.mainAxis,He=t.elements.arrow&&dr(t.elements.arrow),Tt=He?h==="y"?He.clientTop||0:He.clientLeft||0:0,Qt=(j=x?.[h])!=null?j:0,Tn=N+Ue-Qt-Tt,De=N+fe-Qt,ye=Qn(I?Yr(H,Tn):H,N,I?gn(z,De):z);A[h]=ye,U[h]=ye-N}if(l){var V,he=h==="x"?Qe:Ze,re=h==="x"?ft:pt,ce=A[D],Fe=D==="y"?"height":"width",It=ce+y[he],de=ce-y[re],ze=[Qe,Ze].indexOf(_)!==-1,ht=(V=x?.[D])!=null?V:0,Ne=ze?It:ce-O[Fe]-P[Fe]-ht+W.altAxis,_t=ze?ce+O[Fe]+P[Fe]-ht-W.altAxis:de,Je=I&&ze?fg(Ne,ce,_t):Qn(I?Ne:It,ce,I?_t:de);A[D]=Je,U[D]=Je-ce}t.modifiersData[r]=U}}const Wg={name:"preventOverflow",enabled:!0,phase:"main",fn:Vg,requiresIfExists:["offset"]};function $g(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function qg(e){return e===it(e)||!dt(e)?Xo(e):$g(e)}function Yg(e){var t=e.getBoundingClientRect(),n=xn(t.width)/e.offsetWidth||1,r=xn(t.height)/e.offsetHeight||1;return n!==1||r!==1}function zg(e,t,n){n===void 0&&(n=!1);var r=dt(t),i=dt(t)&&Yg(t),s=Kt(t),o=Bn(e,i,n),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((Ct(t)!=="body"||Qo(s))&&(l=qg(t)),dt(t)?(c=Bn(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=Ko(s))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function jg(e){var t=new Map,n=new Set,r=[];e.forEach(function(s){t.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var c=t.get(l);c&&i(c)}}),r.push(s)}return e.forEach(function(s){n.has(s.name)||i(s)}),r}function Xg(e){var t=jg(e);return ag.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function Kg(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Qg(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var ga={placement:"bottom",modifiers:[],strategy:"absolute"};function ma(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Zg(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,s=i===void 0?ga:i;return function(l,c,d){d===void 0&&(d=s);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},ga,s),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},g=[],v=!1,I={state:f,setOptions:function(_){var T=typeof _=="function"?_(f.options):_;w(),f.options=Object.assign({},s,f.options,T),f.scrollParents={reference:mn(l)?Zn(l):l.contextElement?Zn(l.contextElement):[],popper:Zn(c)};var R=Xg(Qg([].concat(r,f.options.modifiers)));return f.orderedModifiers=R.filter(function(h){return h.enabled}),E(),I.update()},forceUpdate:function(){if(!v){var _=f.elements,T=_.reference,R=_.popper;if(ma(T,R)){f.rects={reference:zg(T,dr(R),f.options.strategy==="fixed"),popper:zo(R)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(W){return f.modifiersData[W.name]=Object.assign({},W.data)});for(var h=0;h<f.orderedModifiers.length;h++){if(f.reset===!0){f.reset=!1,h=-1;continue}var D=f.orderedModifiers[h],A=D.fn,O=D.options,P=O===void 0?{}:O,k=D.name;typeof A=="function"&&(f=A({state:f,options:P,name:k,instance:I})||f)}}}},update:Kg(function(){return new Promise(function(y){I.forceUpdate(),y(f)})}),destroy:function(){w(),v=!0}};if(!ma(l,c))return I;I.setOptions(d).then(function(y){!v&&d.onFirstUpdate&&d.onFirstUpdate(y)});function E(){f.orderedModifiers.forEach(function(y){var _=y.name,T=y.options,R=T===void 0?{}:T,h=y.effect;if(typeof h=="function"){var D=h({state:f,name:_,instance:I,options:R}),A=function(){};g.push(D||A)}})}function w(){g.forEach(function(y){return y()}),g=[]}return I}}var Jg=[yg,Ug,Ig,Nl,Fg,Pg,Wg,mg,xg],em=Zg({defaultModifiers:Jg}),tm="tippy-box",Vl="tippy-content",nm="tippy-backdrop",Wl="tippy-arrow",$l="tippy-svg-arrow",an={passive:!0,capture:!0},ql=function(){return document.body};function Qi(e,t,n){if(Array.isArray(e)){var r=e[t];return r??(Array.isArray(n)?n[t]:n)}return e}function Zo(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function Yl(e,t){return typeof e=="function"?e.apply(void 0,t):e}function Ea(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function rm(e){return e.split(/\s+/).filter(Boolean)}function An(e){return[].concat(e)}function va(e,t){e.indexOf(t)===-1&&e.push(t)}function im(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function om(e){return e.split("-")[0]}function zr(e){return[].slice.call(e)}function Ta(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function Jn(){return document.createElement("div")}function Pi(e){return["Element","Fragment"].some(function(t){return Zo(e,t)})}function sm(e){return Zo(e,"NodeList")}function am(e){return Zo(e,"MouseEvent")}function lm(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function cm(e){return Pi(e)?[e]:sm(e)?zr(e):Array.isArray(e)?e:zr(document.querySelectorAll(e))}function Zi(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function Ia(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function um(e){var t,n=An(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function dm(e,t){var n=t.clientX,r=t.clientY;return e.every(function(i){var s=i.popperRect,o=i.popperState,l=i.props,c=l.interactiveBorder,d=om(o.placement),f=o.modifiersData.offset;if(!f)return!0;var g=d==="bottom"?f.top.y:0,v=d==="top"?f.bottom.y:0,I=d==="right"?f.left.x:0,E=d==="left"?f.right.x:0,w=s.top-r+g>c,y=r-s.bottom-v>c,_=s.left-n+I>c,T=n-s.right-E>c;return w||y||_||T})}function Ji(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[r](i,n)})}function _a(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Ot={isTouch:!1},ya=0;function fm(){Ot.isTouch||(Ot.isTouch=!0,window.performance&&document.addEventListener("mousemove",zl))}function zl(){var e=performance.now();e-ya<20&&(Ot.isTouch=!1,document.removeEventListener("mousemove",zl)),ya=e}function pm(){var e=document.activeElement;if(lm(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function hm(){document.addEventListener("touchstart",fm,an),window.addEventListener("blur",pm)}var gm=typeof window<"u"&&typeof document<"u",mm=gm?!!window.msCrypto:!1,Em={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},vm={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},vt=Object.assign({appendTo:ql,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Em,vm),Tm=Object.keys(vt),Im=function(t){var n=Object.keys(t);n.forEach(function(r){vt[r]=t[r]})};function jl(e){var t=e.plugins||[],n=t.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var l;r[s]=e[s]!==void 0?e[s]:(l=vt[s])!=null?l:o}return r},{});return Object.assign({},e,n)}function _m(e,t){var n=t?Object.keys(jl(Object.assign({},vt,{plugins:t}))):Tm,r=n.reduce(function(i,s){var o=(e.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return r}function ba(e,t){var n=Object.assign({},t,{content:Yl(t.content,[e])},t.ignoreAttributes?{}:_m(e,t.plugins));return n.aria=Object.assign({},vt.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var ym=function(){return"innerHTML"};function yo(e,t){e[ym()]=t}function Ra(e){var t=Jn();return e===!0?t.className=Wl:(t.className=$l,Pi(e)?t.appendChild(e):yo(t,e)),t}function wa(e,t){Pi(t.content)?(yo(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?yo(e,t.content):e.textContent=t.content)}function bo(e){var t=e.firstElementChild,n=zr(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(Vl)}),arrow:n.find(function(r){return r.classList.contains(Wl)||r.classList.contains($l)}),backdrop:n.find(function(r){return r.classList.contains(nm)})}}function Xl(e){var t=Jn(),n=Jn();n.className=tm,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Jn();r.className=Vl,r.setAttribute("data-state","hidden"),wa(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props);function i(s,o){var l=bo(t),c=l.box,d=l.content,f=l.arrow;o.theme?c.setAttribute("data-theme",o.theme):c.removeAttribute("data-theme"),typeof o.animation=="string"?c.setAttribute("data-animation",o.animation):c.removeAttribute("data-animation"),o.inertia?c.setAttribute("data-inertia",""):c.removeAttribute("data-inertia"),c.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?c.setAttribute("role",o.role):c.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&wa(d,e.props),o.arrow?f?s.arrow!==o.arrow&&(c.removeChild(f),c.appendChild(Ra(o.arrow))):c.appendChild(Ra(o.arrow)):f&&c.removeChild(f)}return{popper:t,onUpdate:i}}Xl.$$tippy=!0;var bm=1,Dr=[],eo=[];function Rm(e,t){var n=ba(e,Object.assign({},vt,jl(Ta(t)))),r,i,s,o=!1,l=!1,c=!1,d=!1,f,g,v,I=[],E=Ea(Tn,n.interactiveDebounce),w,y=bm++,_=null,T=im(n.plugins),R={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},h={id:y,reference:e,popper:Jn(),popperInstance:_,props:n,state:R,plugins:T,clearDelayTimeouts:Ne,setProps:_t,setContent:Je,show:In,hide:Ce,hideWithInteractivity:Ut,enable:ze,disable:ht,unmount:_n,destroy:yn};if(!n.render)return h;var D=n.render(h),A=D.popper,O=D.onUpdate;A.setAttribute("data-tippy-root",""),A.id="tippy-"+h.id,h.popper=A,e._tippy=h,A._tippy=h;var P=T.map(function(C){return C.fn(h)}),k=e.hasAttribute("aria-expanded");return He(),J(),N(),H("onCreate",[h]),n.showOnCreate&&It(),A.addEventListener("mouseenter",function(){h.props.interactive&&h.state.isVisible&&h.clearDelayTimeouts()}),A.addEventListener("mouseleave",function(){h.props.interactive&&h.props.trigger.indexOf("mouseenter")>=0&&G().addEventListener("mousemove",E)}),h;function W(){var C=h.props.touch;return Array.isArray(C)?C:[C,0]}function x(){return W()[0]==="hold"}function U(){var C;return!!((C=h.props.render)!=null&&C.$$tippy)}function j(){return w||e}function G(){var C=j().parentNode;return C?um(C):document}function X(){return bo(A)}function L(C){return h.state.isMounted&&!h.state.isVisible||Ot.isTouch||f&&f.type==="focus"?0:Qi(h.props.delay,C?0:1,vt.delay)}function N(C){C===void 0&&(C=!1),A.style.pointerEvents=h.props.interactive&&!C?"":"none",A.style.zIndex=""+h.props.zIndex}function H(C,Y,ee){if(ee===void 0&&(ee=!0),P.forEach(function(le){le[C]&&le[C].apply(le,Y)}),ee){var ue;(ue=h.props)[C].apply(ue,Y)}}function z(){var C=h.props.aria;if(C.content){var Y="aria-"+C.content,ee=A.id,ue=An(h.props.triggerTarget||e);ue.forEach(function(le){var xe=le.getAttribute(Y);if(h.state.isVisible)le.setAttribute(Y,xe?xe+" "+ee:ee);else{var Be=xe&&xe.replace(ee,"").trim();Be?le.setAttribute(Y,Be):le.removeAttribute(Y)}})}}function J(){if(!(k||!h.props.aria.expanded)){var C=An(h.props.triggerTarget||e);C.forEach(function(Y){h.props.interactive?Y.setAttribute("aria-expanded",h.state.isVisible&&Y===j()?"true":"false"):Y.removeAttribute("aria-expanded")})}}function oe(){G().removeEventListener("mousemove",E),Dr=Dr.filter(function(C){return C!==E})}function we(C){if(!(Ot.isTouch&&(c||C.type==="mousedown"))){var Y=C.composedPath&&C.composedPath()[0]||C.target;if(!(h.props.interactive&&_a(A,Y))){if(An(h.props.triggerTarget||e).some(function(ee){return _a(ee,Y)})){if(Ot.isTouch||h.state.isVisible&&h.props.trigger.indexOf("click")>=0)return}else H("onClickOutside",[h,C]);h.props.hideOnClick===!0&&(h.clearDelayTimeouts(),h.hide(),l=!0,setTimeout(function(){l=!1}),h.state.isMounted||Q())}}}function Ye(){c=!0}function me(){c=!1}function Pe(){var C=G();C.addEventListener("mousedown",we,!0),C.addEventListener("touchend",we,an),C.addEventListener("touchstart",me,an),C.addEventListener("touchmove",Ye,an)}function Q(){var C=G();C.removeEventListener("mousedown",we,!0),C.removeEventListener("touchend",we,an),C.removeEventListener("touchstart",me,an),C.removeEventListener("touchmove",Ye,an)}function ge(C,Y){Ue(C,function(){!h.state.isVisible&&A.parentNode&&A.parentNode.contains(A)&&Y()})}function _e(C,Y){Ue(C,Y)}function Ue(C,Y){var ee=X().box;function ue(le){le.target===ee&&(Ji(ee,"remove",ue),Y())}if(C===0)return Y();Ji(ee,"remove",g),Ji(ee,"add",ue),g=ue}function fe(C,Y,ee){ee===void 0&&(ee=!1);var ue=An(h.props.triggerTarget||e);ue.forEach(function(le){le.addEventListener(C,Y,ee),I.push({node:le,eventType:C,handler:Y,options:ee})})}function He(){x()&&(fe("touchstart",Qt,{passive:!0}),fe("touchend",De,{passive:!0})),rm(h.props.trigger).forEach(function(C){if(C!=="manual")switch(fe(C,Qt),C){case"mouseenter":fe("mouseleave",De);break;case"focus":fe(mm?"focusout":"blur",ye);break;case"focusin":fe("focusout",ye);break}})}function Tt(){I.forEach(function(C){var Y=C.node,ee=C.eventType,ue=C.handler,le=C.options;Y.removeEventListener(ee,ue,le)}),I=[]}function Qt(C){var Y,ee=!1;if(!(!h.state.isEnabled||V(C)||l)){var ue=((Y=f)==null?void 0:Y.type)==="focus";f=C,w=C.currentTarget,J(),!h.state.isVisible&&am(C)&&Dr.forEach(function(le){return le(C)}),C.type==="click"&&(h.props.trigger.indexOf("mouseenter")<0||o)&&h.props.hideOnClick!==!1&&h.state.isVisible?ee=!0:It(C),C.type==="click"&&(o=!ee),ee&&!ue&&de(C)}}function Tn(C){var Y=C.target,ee=j().contains(Y)||A.contains(Y);if(!(C.type==="mousemove"&&ee)){var ue=Fe().concat(A).map(function(le){var xe,Be=le._tippy,et=(xe=Be.popperInstance)==null?void 0:xe.state;return et?{popperRect:le.getBoundingClientRect(),popperState:et,props:n}:null}).filter(Boolean);dm(ue,C)&&(oe(),de(C))}}function De(C){var Y=V(C)||h.props.trigger.indexOf("click")>=0&&o;if(!Y){if(h.props.interactive){h.hideWithInteractivity(C);return}de(C)}}function ye(C){h.props.trigger.indexOf("focusin")<0&&C.target!==j()||h.props.interactive&&C.relatedTarget&&A.contains(C.relatedTarget)||de(C)}function V(C){return Ot.isTouch?x()!==C.type.indexOf("touch")>=0:!1}function he(){re();var C=h.props,Y=C.popperOptions,ee=C.placement,ue=C.offset,le=C.getReferenceClientRect,xe=C.moveTransition,Be=U()?bo(A).arrow:null,et=le?{getBoundingClientRect:le,contextElement:le.contextElement||j()}:e,Ht={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Lt){var ve=Lt.state;if(U()){var Un=X(),Zt=Un.box;["placement","reference-hidden","escaped"].forEach(function(Mt){Mt==="placement"?Zt.setAttribute("data-placement",ve.placement):ve.attributes.popper["data-popper-"+Mt]?Zt.setAttribute("data-"+Mt,""):Zt.removeAttribute("data-"+Mt)}),ve.attributes.popper={}}}},tt=[{name:"offset",options:{offset:ue}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!xe}},Ht];U()&&Be&&tt.push({name:"arrow",options:{element:Be,padding:3}}),tt.push.apply(tt,Y?.modifiers||[]),h.popperInstance=em(et,A,Object.assign({},Y,{placement:ee,onFirstUpdate:v,modifiers:tt}))}function re(){h.popperInstance&&(h.popperInstance.destroy(),h.popperInstance=null)}function ce(){var C=h.props.appendTo,Y,ee=j();h.props.interactive&&C===ql||C==="parent"?Y=ee.parentNode:Y=Yl(C,[ee]),Y.contains(A)||Y.appendChild(A),h.state.isMounted=!0,he()}function Fe(){return zr(A.querySelectorAll("[data-tippy-root]"))}function It(C){h.clearDelayTimeouts(),C&&H("onTrigger",[h,C]),Pe();var Y=L(!0),ee=W(),ue=ee[0],le=ee[1];Ot.isTouch&&ue==="hold"&&le&&(Y=le),Y?r=setTimeout(function(){h.show()},Y):h.show()}function de(C){if(h.clearDelayTimeouts(),H("onUntrigger",[h,C]),!h.state.isVisible){Q();return}if(!(h.props.trigger.indexOf("mouseenter")>=0&&h.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(C.type)>=0&&o)){var Y=L(!1);Y?i=setTimeout(function(){h.state.isVisible&&h.hide()},Y):s=requestAnimationFrame(function(){h.hide()})}}function ze(){h.state.isEnabled=!0}function ht(){h.hide(),h.state.isEnabled=!1}function Ne(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function _t(C){if(!h.state.isDestroyed){H("onBeforeUpdate",[h,C]),Tt();var Y=h.props,ee=ba(e,Object.assign({},Y,Ta(C),{ignoreAttributes:!0}));h.props=ee,He(),Y.interactiveDebounce!==ee.interactiveDebounce&&(oe(),E=Ea(Tn,ee.interactiveDebounce)),Y.triggerTarget&&!ee.triggerTarget?An(Y.triggerTarget).forEach(function(ue){ue.removeAttribute("aria-expanded")}):ee.triggerTarget&&e.removeAttribute("aria-expanded"),J(),N(),O&&O(Y,ee),h.popperInstance&&(he(),Fe().forEach(function(ue){requestAnimationFrame(ue._tippy.popperInstance.forceUpdate)})),H("onAfterUpdate",[h,C])}}function Je(C){h.setProps({content:C})}function In(){var C=h.state.isVisible,Y=h.state.isDestroyed,ee=!h.state.isEnabled,ue=Ot.isTouch&&!h.props.touch,le=Qi(h.props.duration,0,vt.duration);if(!(C||Y||ee||ue)&&!j().hasAttribute("disabled")&&(H("onShow",[h],!1),h.props.onShow(h)!==!1)){if(h.state.isVisible=!0,U()&&(A.style.visibility="visible"),N(),Pe(),h.state.isMounted||(A.style.transition="none"),U()){var xe=X(),Be=xe.box,et=xe.content;Zi([Be,et],0)}v=function(){var tt;if(!(!h.state.isVisible||d)){if(d=!0,A.offsetHeight,A.style.transition=h.props.moveTransition,U()&&h.props.animation){var Vt=X(),Lt=Vt.box,ve=Vt.content;Zi([Lt,ve],le),Ia([Lt,ve],"visible")}z(),J(),va(eo,h),(tt=h.popperInstance)==null||tt.forceUpdate(),H("onMount",[h]),h.props.animation&&U()&&_e(le,function(){h.state.isShown=!0,H("onShown",[h])})}},ce()}}function Ce(){var C=!h.state.isVisible,Y=h.state.isDestroyed,ee=!h.state.isEnabled,ue=Qi(h.props.duration,1,vt.duration);if(!(C||Y||ee)&&(H("onHide",[h],!1),h.props.onHide(h)!==!1)){if(h.state.isVisible=!1,h.state.isShown=!1,d=!1,o=!1,U()&&(A.style.visibility="hidden"),oe(),Q(),N(!0),U()){var le=X(),xe=le.box,Be=le.content;h.props.animation&&(Zi([xe,Be],ue),Ia([xe,Be],"hidden"))}z(),J(),h.props.animation?U()&&ge(ue,h.unmount):h.unmount()}}function Ut(C){G().addEventListener("mousemove",E),va(Dr,E),E(C)}function _n(){h.state.isVisible&&h.hide(),h.state.isMounted&&(re(),Fe().forEach(function(C){C._tippy.unmount()}),A.parentNode&&A.parentNode.removeChild(A),eo=eo.filter(function(C){return C!==h}),h.state.isMounted=!1,H("onHidden",[h]))}function yn(){h.state.isDestroyed||(h.clearDelayTimeouts(),h.unmount(),Tt(),delete e._tippy,h.state.isDestroyed=!0,H("onDestroy",[h]))}}function fr(e,t){t===void 0&&(t={});var n=vt.plugins.concat(t.plugins||[]);hm();var r=Object.assign({},t,{plugins:n}),i=cm(e),s=i.reduce(function(o,l){var c=l&&Rm(l,r);return c&&o.push(c),o},[]);return Pi(e)?s[0]:s}fr.defaultProps=vt;fr.setDefaultProps=Im;fr.currentInput=Ot;Object.assign({},Nl,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});fr.setDefaultProps({render:Xl});class wm{constructor({editor:t,element:n,view:r,tippyOptions:i={},shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:o,state:l})=>{const{selection:c}=l,{$anchor:d,empty:f}=c,g=d.depth===1,v=d.parent.isTextblock&&!d.parent.type.spec.code&&!d.parent.textContent;return!(!o.hasFocus()||!f||!g||!v||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:o})=>{var l;if(this.preventHide){this.preventHide=!1;return}o?.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(o.relatedTarget))||this.hide()},this.tippyBlurHandler=o=>{this.blurHandler({event:o})},this.editor=t,this.element=n,this.view=r,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,n=!!t.parentElement;this.tippy||!n||(this.tippy=fr(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,n){var r,i,s;const{state:o}=t,{doc:l,selection:c}=o,{from:d,to:f}=c;if(n&&n.doc.eq(l)&&n.selection.eq(c))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:t,state:o,oldState:n}))){this.hide();return}(i=this.tippy)===null||i===void 0||i.setProps({getReferenceClientRect:((s=this.tippyOptions)===null||s===void 0?void 0:s.getReferenceClientRect)||(()=>Ic(t,d,f))}),this.show()}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t,n;!((t=this.tippy)===null||t===void 0)&&t.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Am=e=>new bi({key:typeof e.pluginKey=="string"?new Ri(e.pluginKey):e.pluginKey,view:t=>new wm({view:t,...e})}),Om=Tc.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Am({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}}),Sm=_c.create({name:"Block",group:"block",atom:!0,defining:!0,draggable:!0,selectable:!0,isolating:!0,allowGapCursor:!0,inline:!1,addAttributes(){return{preview:{default:null,parseHTML:e=>e.getAttribute("data-preview"),renderHTML:e=>e.preview?{"data-preview":e.preview}:null},scriptsAndStyles:{default:null,parseHTML:e=>e.getAttribute("data-scripts-and-styles"),renderHTML:e=>e.scriptsAndStyles?{"data-scripts-and-styles":e.scriptsAndStyles}:null},block:{default:null,parseHTML:e=>e.getAttribute("data-block"),renderHTML:e=>e.block?{"data-block":e.block}:null},uuid:{default:null,parseHTML:e=>e.getAttribute("data-uuid"),renderHTML:e=>e.uuid?{"data-uuid":e.uuid}:null},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:null},data:{default:null,parseHTML:e=>e.getAttribute("data-data"),renderHTML:e=>e.data?{"data-data":JSON.stringify(e.data)}:null}}},parseHTML(){return[{tag:"tiptap-block"}]},renderHTML({HTMLAttributes:e}){return["tiptap-block",oo(e)]},addNodeView(){return({node:e,getPos:t})=>{const n=document.createElement("div");n.contentEditable="false",n.classList.add("tiptap-block-wrapper");let r=typeof e.attrs.data=="object"?JSON.stringify(e.attrs.data):e.attrs.data,i=e.attrs.scriptsAndStyles;return i+=e.attrs.preview.replace(/(\r\n|\n|\r)/gm,""),i=encodeURIComponent(i),n.innerHTML=`
                <div
                    x-data="{
                        showOptionsButton: ${r==="[]"?"false":"true"},
                        intervalId: null,
                        openSettings() {
                            this.$dispatch('open-block-settings', {
                                block: \`${e.attrs.block}\`,
                                uuid: \`${e.attrs.uuid}\`,
                                coordinates: ${t()}
                            })
                        },
                        deleteBlock() {
                            this.$dispatch('delete-block')
                        },
                        init() {
                            let preview = \`${i}\`
                            // Decode the preview
                            preview = decodeURIComponent(preview);
                        
                            const iframeDocument = $refs.iframe.contentWindow.document;
                            iframeDocument.open(); // Open the iframe document for writing
                            iframeDocument.write(preview); // Write the decoded preview content
                            iframeDocument.close(); // Close to complete the content write
                        
                            // Function to add classes after the body is available
                            const addClassesToIframe = () => {
                                if (iframeDocument.readyState === 'complete' || iframeDocument.body) {
                                    // Add 'font-main' class to <html> tag
                                    iframeDocument.documentElement.classList.add('font-main');
                                    // Add 'font-main' class to <body> tag
                                    iframeDocument.body.classList.add('font-main');
                            
                                    const resizeIframe = () => {
                                        const iframeBody = iframeDocument.body;
                                        if (iframeBody) {
                                            this.$refs.iframe.style.height = iframeBody.scrollHeight + 'px';
                                        }
                                    };
                            
                                    this.intervalId = setInterval(resizeIframe, 500);
                                    resizeIframe();
                                } else {
                                    // Wait and try again after a brief delay
                                    setTimeout(addClassesToIframe, 0);
                                }
                            };
                            
                            // Start the function
                            addClassesToIframe();
                        },
                        destroy() {
                            clearInterval(this.intervalId)
                        }
                    }"
                    class="relative w-full"
                >
                    <div class="flex items-center bg-white border-neutral-200 gap-x-0.5 border-2 bg-opacity-75 backdrop-blur-md absolute top-0 left-0 not-prose rounded-md m-1.5">
                        <div x-show="! disabled" class="flex gap-x-0.5 px-1">
                            <button x-show="showOptionsButton" type="button" x-on:click="openSettings" class="rounded p-0.5 hover:bg-neutral-300 bg-opacity-50">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cog"><path d="M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"/><path d="M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"/><path d="M12 2v2"/><path d="M12 22v-2"/><path d="m17 20.66-1-1.73"/><path d="M11 10.27 7 3.34"/><path d="m20.66 17-1.73-1"/><path d="m3.34 7 1.73 1"/><path d="M14 12h8"/><path d="M2 12h2"/><path d="m20.66 7-1.73 1"/><path d="m3.34 17 1.73-1"/><path d="m17 3.34-1 1.73"/><path d="m11 13.73-4 6.93"/></svg>
                            </button>
                            <button type="button" x-on:click="deleteBlock()"  class="rounded hover:bg-danger-200 p-0.5 hover:text-danger-500 bg-opacity-50">
                               <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-2"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
                            </button>
                        </div>
                        <p class="font-medium text-gray-800 pr-1.5">${e.attrs.label}</p>
                    </div>
                    <iframe x-ref="iframe" class="w-full">
                    </iframe>
                </div>
            `,{dom:n}}},addCommands(){return{insertBlock:e=>({chain:t,state:n})=>{const r=t();if(![null,void 0].includes(e.coordinates?.pos))return r.insertContentAt({from:e.coordinates.pos,to:e.coordinates.pos},{type:this.name,attrs:e}),r.setTextSelection(e.coordinates.pos);const{selection:i}=n,{$from:s,$to:o}=i,l=s.blockRange(o);return console.log(e,l,s,o),l?(o.parentOffset===0?r.insertContentAt(Math.max(o.pos-1,0),{type:this.name,attrs:e}):r.insertContentAt({from:l.start,to:l.end},{type:this.name,attrs:e}),r.setTextSelection(l.end)):(o.parentOffset===0?r.insertContentAt(Math.max(o.pos-1,0),{type:"paragraph"}).insertContentAt({from:s.pos,to:o.pos},{type:this.name,attrs:e}):r.setNode({type:"paragraph"}).insertContentAt({from:s.pos,to:o.pos},{type:this.name,attrs:e}),r.setTextSelection(o.pos+1))},updateBlock:e=>({state:t,commands:n})=>{const{selection:r}=t,{$from:i}=r;if(r.node&&r.node.type.name===this.name)return n.updateAttributes(this.name,e);{let s=i.pos,o=t.doc.nodeAt(s);if((!o||o.type.name!==this.name)&&(s=i.before(),o=t.doc.nodeAt(s)),o&&o.type.name===this.name)return n.command(({tr:l})=>(l.setNodeMarkup(s,void 0,{...o.attrs,...e}),!0));if(e.coordinates!==void 0){const l=e.coordinates,c=t.doc.nodeAt(l);if(c&&c.type.name===this.name)return n.command(({tr:d})=>(d.setNodeMarkup(l,void 0,{...c.attrs,...e}),!0))}return!1}},removeBlock:()=>({commands:e})=>e.deleteSelection()}}}),Dm="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Cm="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Fn=(e,t)=>{for(const n in t)e[n]=t[n];return e},Ro="numeric",wo="ascii",Ao="alpha",kr="asciinumeric",Cr="alphanumeric",Oo="domain",Kl="emoji",Lm="scheme",Mm="slashscheme",Aa="whitespace";function Pm(e,t){return e in t||(t[e]=[]),t[e]}function dn(e,t,n){t[Ro]&&(t[kr]=!0,t[Cr]=!0),t[wo]&&(t[kr]=!0,t[Ao]=!0),t[kr]&&(t[Cr]=!0),t[Ao]&&(t[Cr]=!0),t[Cr]&&(t[Oo]=!0),t[Kl]&&(t[Oo]=!0);for(const r in t){const i=Pm(r,n);i.indexOf(e)<0&&i.push(e)}}function Nm(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Ke(e){e===void 0&&(e=null),this.j={},this.jr=[],this.jd=null,this.t=e}Ke.groups={};Ke.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t){return t===void 0&&(t=!1),t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Ke.groups;let i;return t&&t.j?i=t:(i=new Ke(t),n&&r&&dn(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Ke.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,l=i.go(e);if(l?(o=new Ke,Fn(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Ke,s){if(r)if(o.t&&typeof o.t=="string"){const c=Fn(Nm(o.t,r),n);dn(s,c,r)}else n&&dn(s,n,r);o.t=s}return i.j[e]=o,o}};const ae=(e,t,n,r,i)=>e.ta(t,n,r,i),lt=(e,t,n,r,i)=>e.tr(t,n,r,i),Oa=(e,t,n,r,i)=>e.ts(t,n,r,i),q=(e,t,n,r,i)=>e.tt(t,n,r,i),Bt="WORD",So="UWORD",ar="LOCALHOST",Do="TLD",Co="UTLD",Ur="SCHEME",On="SLASH_SCHEME",Jo="NUM",Ql="WS",es="NL",er="OPENBRACE",tr="CLOSEBRACE",jr="OPENBRACKET",Xr="CLOSEBRACKET",Kr="OPENPAREN",Qr="CLOSEPAREN",Zr="OPENANGLEBRACKET",Jr="CLOSEANGLEBRACKET",ei="FULLWIDTHLEFTPAREN",ti="FULLWIDTHRIGHTPAREN",ni="LEFTCORNERBRACKET",ri="RIGHTCORNERBRACKET",ii="LEFTWHITECORNERBRACKET",oi="RIGHTWHITECORNERBRACKET",si="FULLWIDTHLESSTHAN",ai="FULLWIDTHGREATERTHAN",li="AMPERSAND",ci="APOSTROPHE",ui="ASTERISK",zt="AT",di="BACKSLASH",fi="BACKTICK",pi="CARET",jt="COLON",ts="COMMA",hi="DOLLAR",bt="DOT",gi="EQUALS",ns="EXCLAMATION",Rt="HYPHEN",mi="PERCENT",Ei="PIPE",vi="PLUS",Ti="POUND",Ii="QUERY",rs="QUOTE",is="SEMI",wt="SLASH",nr="TILDE",_i="UNDERSCORE",Zl="EMOJI",yi="SYM";var Jl=Object.freeze({__proto__:null,WORD:Bt,UWORD:So,LOCALHOST:ar,TLD:Do,UTLD:Co,SCHEME:Ur,SLASH_SCHEME:On,NUM:Jo,WS:Ql,NL:es,OPENBRACE:er,CLOSEBRACE:tr,OPENBRACKET:jr,CLOSEBRACKET:Xr,OPENPAREN:Kr,CLOSEPAREN:Qr,OPENANGLEBRACKET:Zr,CLOSEANGLEBRACKET:Jr,FULLWIDTHLEFTPAREN:ei,FULLWIDTHRIGHTPAREN:ti,LEFTCORNERBRACKET:ni,RIGHTCORNERBRACKET:ri,LEFTWHITECORNERBRACKET:ii,RIGHTWHITECORNERBRACKET:oi,FULLWIDTHLESSTHAN:si,FULLWIDTHGREATERTHAN:ai,AMPERSAND:li,APOSTROPHE:ci,ASTERISK:ui,AT:zt,BACKSLASH:di,BACKTICK:fi,CARET:pi,COLON:jt,COMMA:ts,DOLLAR:hi,DOT:bt,EQUALS:gi,EXCLAMATION:ns,HYPHEN:Rt,PERCENT:mi,PIPE:Ei,PLUS:vi,POUND:Ti,QUERY:Ii,QUOTE:rs,SEMI:is,SLASH:wt,TILDE:nr,UNDERSCORE:_i,EMOJI:Zl,SYM:yi});const wn=/[a-z]/,to=/\p{L}/u,no=/\p{Emoji}/u,ro=/\d/,Sa=/\s/,Da=`
`,xm="",Bm="";let Lr=null,Mr=null;function Gm(e){e===void 0&&(e=[]);const t={};Ke.groups=t;const n=new Ke;Lr==null&&(Lr=Ca(Dm)),Mr==null&&(Mr=Ca(Cm)),q(n,"'",ci),q(n,"{",er),q(n,"}",tr),q(n,"[",jr),q(n,"]",Xr),q(n,"(",Kr),q(n,")",Qr),q(n,"<",Zr),q(n,">",Jr),q(n,"",ei),q(n,"",ti),q(n,"",ni),q(n,"",ri),q(n,"",ii),q(n,"",oi),q(n,"",si),q(n,"",ai),q(n,"&",li),q(n,"*",ui),q(n,"@",zt),q(n,"`",fi),q(n,"^",pi),q(n,":",jt),q(n,",",ts),q(n,"$",hi),q(n,".",bt),q(n,"=",gi),q(n,"!",ns),q(n,"-",Rt),q(n,"%",mi),q(n,"|",Ei),q(n,"+",vi),q(n,"#",Ti),q(n,"?",Ii),q(n,'"',rs),q(n,"/",wt),q(n,";",is),q(n,"~",nr),q(n,"_",_i),q(n,"\\",di);const r=lt(n,ro,Jo,{[Ro]:!0});lt(r,ro,r);const i=lt(n,wn,Bt,{[wo]:!0});lt(i,wn,i);const s=lt(n,to,So,{[Ao]:!0});lt(s,wn),lt(s,to,s);const o=lt(n,Sa,Ql,{[Aa]:!0});q(n,Da,es,{[Aa]:!0}),q(o,Da),lt(o,Sa,o);const l=lt(n,no,Zl,{[Kl]:!0});lt(l,no,l),q(l,xm,l);const c=q(l,Bm);lt(c,no,l);const d=[[wn,i]],f=[[wn,null],[to,s]];for(let g=0;g<Lr.length;g++)Yt(n,Lr[g],Do,Bt,d);for(let g=0;g<Mr.length;g++)Yt(n,Mr[g],Co,So,f);dn(Do,{tld:!0,ascii:!0},t),dn(Co,{utld:!0,alpha:!0},t),Yt(n,"file",Ur,Bt,d),Yt(n,"mailto",Ur,Bt,d),Yt(n,"http",On,Bt,d),Yt(n,"https",On,Bt,d),Yt(n,"ftp",On,Bt,d),Yt(n,"ftps",On,Bt,d),dn(Ur,{scheme:!0,ascii:!0},t),dn(On,{slashscheme:!0,ascii:!0},t),e=e.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<e.length;g++){const v=e[g][0],E=e[g][1]?{[Lm]:!0}:{[Mm]:!0};v.indexOf("-")>=0?E[Oo]=!0:wn.test(v)?ro.test(v)?E[kr]=!0:E[wo]=!0:E[Ro]=!0,Oa(n,v,v,E)}return Oa(n,"localhost",ar,{ascii:!0}),n.jd=new Ke(yi),{start:n,tokens:Fn({groups:t},Jl)}}function Fm(e,t){const n=km(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=e,c=null,d=0,f=null,g=-1,v=-1;for(;o<r&&(c=l.go(n[o]));)l=c,l.accepts()?(g=0,v=0,f=l):g>=0&&(g+=n[o].length,v++),d+=n[o].length,s+=n[o].length,o++;s-=g,o-=v,d-=g,i.push({t:f.t,v:t.slice(s-d,s),s:s-d,e:s})}return i}function km(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function Yt(e,t,n,r,i){let s;const o=t.length;for(let l=0;l<o-1;l++){const c=t[l];e.j[c]?s=e.j[c]:(s=new Ke(r),s.jr=i.slice(),e.j[c]=s),e=s}return s=new Ke(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function Ca(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const lr={defaultProtocol:"http",events:null,format:La,formatHref:La,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function os(e,t){t===void 0&&(t=null);let n=Fn({},lr);e&&(n=Fn(n,e instanceof os?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}os.prototype={o:lr,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:lr[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function La(e){return e}function ec(e,t){this.t="token",this.v=e,this.tk=t}ec.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e){return e===void 0&&(e=lr.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},l=e.get("className",n,t),c=e.get("target",n,t),d=e.get("rel",n,t),f=e.getObj("attributes",n,t),g=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),c&&(o.target=c),d&&(o.rel=d),f&&Fn(o,f),{tagName:i,attributes:o,content:s,eventListeners:g}}};function Ni(e,t){class n extends ec{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const Ma=Ni("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Pa=Ni("text"),Um=Ni("nl"),Pr=Ni("url",{isLink:!0,toHref(e){return e===void 0&&(e=lr.defaultProtocol),this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==ar&&e[1].t===jt}}),ct=e=>new Ke(e);function Hm(e){let{groups:t}=e;const n=t.domain.concat([li,ui,zt,di,fi,pi,hi,gi,Rt,Jo,mi,Ei,vi,Ti,wt,yi,nr,_i]),r=[ci,jt,ts,bt,ns,Ii,rs,is,Zr,Jr,er,tr,Xr,jr,Kr,Qr,ei,ti,ni,ri,ii,oi,si,ai],i=[li,ci,ui,di,fi,pi,hi,gi,Rt,er,tr,mi,Ei,vi,Ti,Ii,wt,yi,nr,_i],s=ct(),o=q(s,nr);ae(o,i,o),ae(o,t.domain,o);const l=ct(),c=ct(),d=ct();ae(s,t.domain,l),ae(s,t.scheme,c),ae(s,t.slashscheme,d),ae(l,i,o),ae(l,t.domain,l);const f=q(l,zt);q(o,zt,f),q(c,zt,f),q(d,zt,f);const g=q(o,bt);ae(g,i,o),ae(g,t.domain,o);const v=ct();ae(f,t.domain,v),ae(v,t.domain,v);const I=q(v,bt);ae(I,t.domain,v);const E=ct(Ma);ae(I,t.tld,E),ae(I,t.utld,E),q(f,ar,E);const w=q(v,Rt);ae(w,t.domain,v),ae(E,t.domain,v),q(E,bt,I),q(E,Rt,w);const y=q(E,jt);ae(y,t.numeric,Ma);const _=q(l,Rt),T=q(l,bt);ae(_,t.domain,l),ae(T,i,o),ae(T,t.domain,l);const R=ct(Pr);ae(T,t.tld,R),ae(T,t.utld,R),ae(R,t.domain,l),ae(R,i,o),q(R,bt,T),q(R,Rt,_),q(R,zt,f);const h=q(R,jt),D=ct(Pr);ae(h,t.numeric,D);const A=ct(Pr),O=ct();ae(A,n,A),ae(A,r,O),ae(O,n,A),ae(O,r,O),q(R,wt,A),q(D,wt,A);const P=q(c,jt),k=q(d,jt),W=q(k,wt),x=q(W,wt);ae(c,t.domain,l),q(c,bt,T),q(c,Rt,_),ae(d,t.domain,l),q(d,bt,T),q(d,Rt,_),ae(P,t.domain,A),q(P,wt,A),ae(x,t.domain,A),ae(x,n,A),q(x,wt,A);const U=[[er,tr],[jr,Xr],[Kr,Qr],[Zr,Jr],[ei,ti],[ni,ri],[ii,oi],[si,ai]];for(let j=0;j<U.length;j++){const[G,X]=U[j],L=q(A,G);q(O,G,L),q(L,X,A);const N=ct(Pr);ae(L,n,N);const H=ct();ae(L,r),ae(N,n,N),ae(N,r,H),ae(H,n,N),ae(H,r,H),q(N,X,A),q(H,X,A)}return q(s,ar,R),q(s,es,Um),{start:s,tokens:Jl}}function Vm(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=e,c=null,d=null,f=0,g=null,v=-1;for(;i<r&&!(c=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(d=c||l.go(n[i].t));)c=null,l=d,l.accepts()?(v=0,g=l):v>=0&&v++,i++,f++;if(v<0)i-=f,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(io(Pa,t,o)),o=[]),i-=v,f-=v;const I=g.t,E=n.slice(i-f,i);s.push(io(I,t,E))}}return o.length>0&&s.push(io(Pa,t,o)),s}function io(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const Wm=typeof console<"u"&&console&&console.warn||(()=>{}),$m="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Te={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function qm(){Ke.groups={},Te.scanner=null,Te.parser=null,Te.tokenQueue=[],Te.pluginQueue=[],Te.customSchemes=[],Te.initialized=!1}function Na(e,t){if(t===void 0&&(t=!1),Te.initialized&&Wm(`linkifyjs: already initialized - will not register custom scheme "${e}" ${$m}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Te.customSchemes.push([e,t])}function Ym(){Te.scanner=Gm(Te.customSchemes);for(let e=0;e<Te.tokenQueue.length;e++)Te.tokenQueue[e][1]({scanner:Te.scanner});Te.parser=Hm(Te.scanner.tokens);for(let e=0;e<Te.pluginQueue.length;e++)Te.pluginQueue[e][1]({scanner:Te.scanner,parser:Te.parser});Te.initialized=!0}function tc(e){return Te.initialized||Ym(),Vm(Te.parser.start,e,Fm(Te.scanner.start,e))}function nc(e,t,n){if(t===void 0&&(t=null),n===void 0&&(n=null),t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new os(n),i=tc(e),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}function zm(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function jm(e){return new bi({key:new Ri("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=t.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=bc(n.doc,[...t]);if(Rc(l).forEach(({newRange:d})=>{const f=wc(r.doc,d,I=>I.isTextblock);let g,v;if(f.length>1?(g=f[0],v=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ")):f.length&&r.doc.textBetween(d.from,d.to," "," ").endsWith(" ")&&(g=f[0],v=r.doc.textBetween(g.pos,d.to,void 0," ")),g&&v){const I=v.split(" ").filter(_=>_!=="");if(I.length<=0)return!1;const E=I[I.length-1],w=g.pos+v.lastIndexOf(E);if(!E)return!1;const y=tc(E).map(_=>_.toObject(e.defaultProtocol));if(!zm(y))return!1;y.filter(_=>_.isLink).map(_=>({..._,from:w+_.start+1,to:w+_.end+1})).filter(_=>r.schema.marks.code?!r.doc.rangeHasMark(_.from,_.to,r.schema.marks.code):!0).filter(_=>e.validate(_.value)).forEach(_=>{Ac(_.from,_.to,r.doc).some(T=>T.mark.type===e.type)||o.addMark(_.from,_.to,e.type.create({href:_.href}))})}}),!!o.steps.length)return o}})}function Xm(e){return new bi({key:new Ri("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=r.target;const l=[];for(;o.nodeName!=="DIV";)l.push(o),o=o.parentNode;if(!l.find(v=>v.nodeName==="A"))return!1;const c=Oc(t.state,e.type.name),d=r.target,f=(i=d?.href)!==null&&i!==void 0?i:c.href,g=(s=d?.target)!==null&&s!==void 0?s:c.target;return d&&f?(window.open(f,g),!0):!1}}})}function Km(e){return new bi({key:new Ri("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const c=nc(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c?!1:(e.editor.commands.setMark(e.type,{href:c.href}),!0)}}})}const Qm=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g,Zm=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i;function xa(e){return!e||e.replace(Qm,"").match(Zm)}const Jm=Lo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach(e=>{if(typeof e=="string"){Na(e);return}Na(e.scheme,e.optionalSlashes)})},onDestroy(){qm()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:e=>!!e}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!xa(t)?!1:{href:t}}}]},renderHTML({HTMLAttributes:e}){return xa(e.href)?["a",oo(this.options.HTMLAttributes,e),0]:["a",oo(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>t().setMark(this.name,e).setMeta("preventAutolink",!0).run(),toggleLink:e=>({chain:t})=>t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[yc({find:e=>{const t=[];if(e){const{validate:n}=this.options,r=nc(e).filter(i=>i.isLink&&n(i.value));r.length&&r.forEach(i=>t.push({text:i.value,data:{href:i.href},index:i.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[];return this.options.autolink&&e.push(jm({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate})),this.options.openOnClick===!0&&e.push(Xm({type:this.type})),this.options.linkOnPaste&&e.push(Km({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),eE=Lo.create({name:"color",addAttributes(){return{color:{default:null,parseHTML:e=>{const t=e.getAttribute("style")||"",n=e.getAttribute("class")||"",r=t.match(/color:\s*(#[0-9a-fA-F]{3,6});?/);if(r)return r[1];const i=n.match(/(^|\s)text-([^\s]+)/);return i?i[2]:null},renderHTML:e=>e.color?/^#[0-9a-fA-F]{3,6}$/.test(e.color)?{style:`color: ${e.color}`}:{class:`text-${e.color}`}:{}}}},parseHTML(){return[{tag:"span",getAttrs:e=>{const t=e.getAttribute("style")||"",n=e.getAttribute("class")||"",r=/color:\s*#[0-9a-fA-F]{3,6};?/.test(t),i=/(^|\s)text-[^\s]+(\s|$)/.test(n);return r||i?{}:!1}}]},renderHTML({HTMLAttributes:e}){return["span",e,0]},addCommands(){return{setColor:e=>({commands:t})=>e?t.setMark(this.name,{color:e}):!1,unsetColor:()=>({commands:e})=>e.unsetMark(this.name)}}}),tE=Lo.create({name:"fontFamily",addAttributes(){return{font:{default:null,parseHTML:e=>{const n=(e.getAttribute("class")||"").match(/(^|\s)font-(\w+)(\s|$)/);return n?n[2]:null},renderHTML:e=>e.font?{class:`font-${e.font}`}:{}}}},parseHTML(){return[{tag:"span[class]",getAttrs:e=>{const t=e.getAttribute("class")||"";return/(^|\s)font-\w+(\s|$)/.test(t)?{}:!1}}]},renderHTML({HTMLAttributes:e}){return["span",e,0]},addCommands(){return{setFontFamily:e=>({commands:t})=>e?t.setMark(this.name,{font:e}):!1,unsetFontFamily:()=>({commands:e})=>e.unsetMark(this.name)}}});Livewire.on("insertBlock",e=>{console.log(e),setTimeout(()=>{const t=new CustomEvent("insert-block",{bubble:!0,detail:e});window.dispatchEvent(t)})});Livewire.on("updateBlock",e=>{setTimeout(()=>{const t=new CustomEvent("update-block",{bubble:!0,detail:e});window.dispatchEvent(t)})});window.setupContentEditor=function(e){let t;return{content:e,disabled:!1,updatedAt:Date.now(),init(n){t=new Sc({element:n,extensions:[Dc.configure(),Om.configure({element:this.$refs.floatingMenuBlocks}),Jm.configure({openOnClick:!1,autolink:!0}),Cc.configure({types:["heading","paragraph"],defaultAlignment:"justify"}),eE,tE,Sm],content:this.content,onCreate:({editor:r})=>{this.updatedAt=Date.now()},onUpdate:Alpine.debounce(({editor:r})=>{this.content=r.getJSON(),this.updatedAt=Date.now()},300),onSelectionUpdate:({editor:r})=>{this.updatedAt=Date.now()}}),t.commands.focus(),this.$watch("content",r=>{JSON.stringify(r)!==JSON.stringify(t.getJSON())&&t.commands.setContent(r,!1)})},isLoaded(){return t},isActive(n,r={}){return t.isActive(n,r)},toggleHeading(n){t.chain().toggleHeading(n).focus().run()},toggleBold(){t.chain().toggleBold().focus().run()},toggleItalic(){t.chain().toggleItalic().focus().run()},toggleStrike(){t.chain().toggleStrike().focus().run()},toggleBulletList(){t.chain().toggleBulletList().focus().run()},toggleOrderedList(){t.chain().toggleOrderedList().focus().run()},toggleBlockquote(){t.chain().toggleBlockquote().focus().run()},setHorizontalRule(){t.chain().setHorizontalRule().focus().run()},setTextAlign(n){t.chain().setTextAlign(n).focus().run()},setColor(n){t.chain().setColor(n).focus().run()},setFontFamily(n){t.chain().setFontFamily(n).focus().run()},toggleLink(){const n=t.getAttributes("link").href,r=window.prompt("Set URL of this link. Leave empty to delete this link.",n);if(r!==null){if(r===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}t.chain().focus().extendMarkRange("link").setLink({href:r}).run()}},insertBlock(n){t.commands.insertBlock({label:n.detail.label,uuid:n.detail.uuid,preview:n.detail.preview,scriptsAndStyles:n.detail.scriptsAndStyles,block:n.detail.block,coordinates:n.detail.coordinates,data:n.detail.data}),t.isFocused||t.commands.focus()},updateBlock(n){t.commands.updateBlock({label:n.detail.label,uuid:n.detail.uuid,preview:n.detail.preview,scriptsAndStyles:n.detail.scriptsAndStyles,block:n.detail.block,coordinates:n.detail.coordinates,data:n.detail.data}),t.isFocused||t.commands.focus()},deleteBlock(){t.commands.removeBlock()},openBlockSettings(n){this.$wire.openBlockSettings(n.detail.uuid,n.detail.coordinates)}}};document.addEventListener("alpine:init",()=>{Lc.directive("tooltip",(e,{modifiers:t,expression:n},{cleanup:r})=>{let i=n,s=!t.includes("noarrow"),o="top",l="tooltip-"+Date.now().toString(36)+Math.random().toString(36).substr(2,5),c=["top","bottom","left","right"],d=getComputedStyle(e).position;for(let I of c)if(t.includes(I)){o=I;break}d.includes(["relative","absolute","fixed"])||(e.style.position="relative");let f=`
                <div id="${l}" x-data="{ tooltipVisible: false, tooltipText: '${i}', tooltipArrow: ${s}, tooltipPosition: '${o}' }" x-ref="tooltip" x-init="setTimeout(function(){ tooltipVisible = true; }, 1);" x-show="tooltipVisible" :class="{ 'top-0 left-1/2 -translate-x-1/2 -mt-0.5 -translate-y-full' : tooltipPosition == 'top', 'top-1/2 -translate-y-1/2 -ml-1.5 left-0 -translate-x-full' : tooltipPosition == 'left', 'bottom-0 left-1/2 -translate-x-1/2 -mb-0.5 translate-y-full' : tooltipPosition == 'bottom', 'top-1/2 -translate-y-1/2 -mr-1.5 right-0 translate-x-full' : tooltipPosition == 'right' }" class="absolute w-auto text-sm" x-cloak>
                    <div x-show="tooltipVisible" x-transition class="relative px-2 py-1 text-white bg-black rounded bg-opacity-90">
                        <p x-html="tooltipText" class="flex-shrink-0 block text-xs whitespace-nowrap"></p>
                        <div x-ref="tooltipArrow" x-show="tooltipArrow" :class="{ 'bottom-0 -translate-x-1/2 left-1/2 w-2.5 translate-y-full' : tooltipPosition == 'top', 'right-0 -translate-y-1/2 top-1/2 h-2.5 -mt-px translate-x-full' : tooltipPosition == 'left', 'top-0 -translate-x-1/2 left-1/2 w-2.5 -translate-y-full' : tooltipPosition == 'bottom', 'left-0 -translate-y-1/2 top-1/2 h-2.5 -mt-px -translate-x-full' : tooltipPosition == 'right' }" class="absolute inline-flex items-center justify-center overflow-hidden">
                            <div :class="{ 'origin-top-left -rotate-45' : tooltipPosition == 'top', 'origin-top-left rotate-45' : tooltipPosition == 'left', 'origin-bottom-left rotate-45' : tooltipPosition == 'bottom', 'origin-top-right -rotate-45' : tooltipPosition == 'right' }" class="w-1.5 h-1.5 transform bg-black bg-opacity-90"></div>
                        </div>
                    </div>
                </div>
            `;e.dataset.tooltip=l;let g=function(I){e.innerHTML+=f},v=function(I){document.getElementById(I.target.dataset.tooltip).remove()};e.addEventListener("mouseenter",g),e.addEventListener("mouseleave",v),r(()=>{e.removeEventListener("mouseenter",g),e.removeEventListener("mouseleave",v)})})});rr(Dl);rr(Ll);qr(Xh);window.FilePond=qp;window.Plyr=xc;Alpine.plugin(Mc);Alpine.plugin(Bc);Alpine.plugin(Gc);Alpine.plugin(Fc);Alpine.plugin(Pc);Nc.start();
