import{e as Ks,m as Zs,a as Js,b as eo,L as to}from"./tiptap-7dc117f4.js";import{P as no,m as ro,a as io}from"./plyr.min-102398fd.js";(()=>{var qr,Yr;function e(s,c){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(s);c&&(f=f.filter(function(E){return Object.getOwnPropertyDescriptor(s,E).enumerable})),l.push.apply(l,f)}return l}function t(s){for(var c=1;c<arguments.length;c++){var l=arguments[c]!=null?arguments[c]:{};c%2?e(Object(l),!0).forEach(function(f){r(s,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):e(Object(l)).forEach(function(f){Object.defineProperty(s,f,Object.getOwnPropertyDescriptor(l,f))})}return s}function n(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(c){return typeof c}:n=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},n(s)}function r(s,c,l){return c in s?Object.defineProperty(s,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[c]=l,s}function i(){return i=Object.assign||function(s){for(var c=1;c<arguments.length;c++){var l=arguments[c];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])}return s},i.apply(this,arguments)}function a(s,c){if(s==null)return{};var l={},f=Object.keys(s),E,R;for(R=0;R<f.length;R++)E=f[R],!(c.indexOf(E)>=0)&&(l[E]=s[E]);return l}function o(s,c){if(s==null)return{};var l=a(s,c),f,E;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(s);for(E=0;E<R.length;E++)f=R[E],!(c.indexOf(f)>=0)&&Object.prototype.propertyIsEnumerable.call(s,f)&&(l[f]=s[f])}return l}var u="1.15.0";function d(s){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(s)}var p=d(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),g=d(/Edge/i),h=d(/firefox/i),_=d(/safari/i)&&!d(/chrome/i)&&!d(/android/i),b=d(/iP(ad|od|hone)/i),I=d(/chrome/i)&&d(/android/i),S={capture:!1,passive:!1};function T(s,c,l){s.addEventListener(c,l,!p&&S)}function v(s,c,l){s.removeEventListener(c,l,!p&&S)}function m(s,c){if(c){if(c[0]===">"&&(c=c.substring(1)),s)try{if(s.matches)return s.matches(c);if(s.msMatchesSelector)return s.msMatchesSelector(c);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(c)}catch{return!1}return!1}}function y(s){return s.host&&s!==document&&s.host.nodeType?s.host:s.parentNode}function A(s,c,l,f){if(s){l=l||document;do{if(c!=null&&(c[0]===">"?s.parentNode===l&&m(s,c):m(s,c))||f&&s===l)return s;if(s===l)break}while(s=y(s))}return null}var C=/\s+/g;function F(s,c,l){if(s&&c)if(s.classList)s.classList[l?"add":"remove"](c);else{var f=(" "+s.className+" ").replace(C," ").replace(" "+c+" "," ");s.className=(f+(l?" "+c:"")).replace(C," ")}}function P(s,c,l){var f=s&&s.style;if(f){if(l===void 0)return document.defaultView&&document.defaultView.getComputedStyle?l=document.defaultView.getComputedStyle(s,""):s.currentStyle&&(l=s.currentStyle),c===void 0?l:l[c];!(c in f)&&c.indexOf("webkit")===-1&&(c="-webkit-"+c),f[c]=l+(typeof l=="string"?"":"px")}}function L(s,c){var l="";if(typeof s=="string")l=s;else do{var f=P(s,"transform");f&&f!=="none"&&(l=f+" "+l)}while(!c&&(s=s.parentNode));var E=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return E&&new E(l)}function V(s,c,l){if(s){var f=s.getElementsByTagName(c),E=0,R=f.length;if(l)for(;E<R;E++)l(f[E],E);return f}return[]}function k(){var s=document.scrollingElement;return s||document.documentElement}function x(s,c,l,f,E){if(!(!s.getBoundingClientRect&&s!==window)){var R,D,B,M,Y,$,Q;if(s!==window&&s.parentNode&&s!==k()?(R=s.getBoundingClientRect(),D=R.top,B=R.left,M=R.bottom,Y=R.right,$=R.height,Q=R.width):(D=0,B=0,M=window.innerHeight,Y=window.innerWidth,$=window.innerHeight,Q=window.innerWidth),(c||l)&&s!==window&&(E=E||s.parentNode,!p))do if(E&&E.getBoundingClientRect&&(P(E,"transform")!=="none"||l&&P(E,"position")!=="static")){var se=E.getBoundingClientRect();D-=se.top+parseInt(P(E,"border-top-width")),B-=se.left+parseInt(P(E,"border-left-width")),M=D+R.height,Y=B+R.width;break}while(E=E.parentNode);if(f&&s!==window){var J=L(E||s),he=J&&J.a,re=J&&J.d;J&&(D/=re,B/=he,Q/=he,$/=re,M=D+$,Y=B+Q)}return{top:D,left:B,bottom:M,right:Y,width:Q,height:$}}}function q(s,c,l){for(var f=H(s,!0),E=x(s)[c];f;){var R=x(f)[l],D=void 0;if(l==="top"||l==="left"?D=E>=R:D=E<=R,!D)return f;if(f===k())break;f=H(f,!1)}return!1}function te(s,c,l,f){for(var E=0,R=0,D=s.children;R<D.length;){if(D[R].style.display!=="none"&&D[R]!==j.ghost&&(f||D[R]!==j.dragged)&&A(D[R],l.draggable,s,!1)){if(E===c)return D[R];E++}R++}return null}function N(s,c){for(var l=s.lastElementChild;l&&(l===j.ghost||P(l,"display")==="none"||c&&!m(l,c));)l=l.previousElementSibling;return l||null}function X(s,c){var l=0;if(!s||!s.parentNode)return-1;for(;s=s.previousElementSibling;)s.nodeName.toUpperCase()!=="TEMPLATE"&&s!==j.clone&&(!c||m(s,c))&&l++;return l}function w(s){var c=0,l=0,f=k();if(s)do{var E=L(s),R=E.a,D=E.d;c+=s.scrollLeft*R,l+=s.scrollTop*D}while(s!==f&&(s=s.parentNode));return[c,l]}function G(s,c){for(var l in s)if(s.hasOwnProperty(l)){for(var f in c)if(c.hasOwnProperty(f)&&c[f]===s[l][f])return Number(l)}return-1}function H(s,c){if(!s||!s.getBoundingClientRect)return k();var l=s,f=!1;do if(l.clientWidth<l.scrollWidth||l.clientHeight<l.scrollHeight){var E=P(l);if(l.clientWidth<l.scrollWidth&&(E.overflowX=="auto"||E.overflowX=="scroll")||l.clientHeight<l.scrollHeight&&(E.overflowY=="auto"||E.overflowY=="scroll")){if(!l.getBoundingClientRect||l===document.body)return k();if(f||c)return l;f=!0}}while(l=l.parentNode);return k()}function W(s,c){if(s&&c)for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l]);return s}function ee(s,c){return Math.round(s.top)===Math.round(c.top)&&Math.round(s.left)===Math.round(c.left)&&Math.round(s.height)===Math.round(c.height)&&Math.round(s.width)===Math.round(c.width)}var ne;function $e(s,c){return function(){if(!ne){var l=arguments,f=this;l.length===1?s.call(f,l[0]):s.apply(f,l),ne=setTimeout(function(){ne=void 0},c)}}}function vt(){clearTimeout(ne),ne=void 0}function Ae(s,c,l){s.scrollLeft+=c,s.scrollTop+=l}function bt(s){var c=window.Polymer,l=window.jQuery||window.Zepto;return c&&c.dom?c.dom(s).cloneNode(!0):l?l(s).clone(!0)[0]:s.cloneNode(!0)}var z="Sortable"+new Date().getTime();function me(){var s=[],c;return{captureAnimationState:function(){if(s=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(f){if(!(P(f,"display")==="none"||f===j.ghost)){s.push({target:f,rect:x(f)});var E=t({},s[s.length-1].rect);if(f.thisAnimationDuration){var R=L(f,!0);R&&(E.top-=R.f,E.left-=R.e)}f.fromRect=E}})}},addAnimationState:function(l){s.push(l)},removeAnimationState:function(l){s.splice(G(s,{target:l}),1)},animateAll:function(l){var f=this;if(!this.options.animation){clearTimeout(c),typeof l=="function"&&l();return}var E=!1,R=0;s.forEach(function(D){var B=0,M=D.target,Y=M.fromRect,$=x(M),Q=M.prevFromRect,se=M.prevToRect,J=D.rect,he=L(M,!0);he&&($.top-=he.f,$.left-=he.e),M.toRect=$,M.thisAnimationDuration&&ee(Q,$)&&!ee(Y,$)&&(J.top-$.top)/(J.left-$.left)===(Y.top-$.top)/(Y.left-$.left)&&(B=Ze(J,Q,se,f.options)),ee($,Y)||(M.prevFromRect=Y,M.prevToRect=$,B||(B=f.options.animation),f.animate(M,J,$,B)),B&&(E=!0,R=Math.max(R,B),clearTimeout(M.animationResetTimer),M.animationResetTimer=setTimeout(function(){M.animationTime=0,M.prevFromRect=null,M.fromRect=null,M.prevToRect=null,M.thisAnimationDuration=null},B),M.thisAnimationDuration=B)}),clearTimeout(c),E?c=setTimeout(function(){typeof l=="function"&&l()},R):typeof l=="function"&&l(),s=[]},animate:function(l,f,E,R){if(R){P(l,"transition",""),P(l,"transform","");var D=L(this.el),B=D&&D.a,M=D&&D.d,Y=(f.left-E.left)/(B||1),$=(f.top-E.top)/(M||1);l.animatingX=!!Y,l.animatingY=!!$,P(l,"transform","translate3d("+Y+"px,"+$+"px,0)"),this.forRepaintDummy=Be(l),P(l,"transition","transform "+R+"ms"+(this.options.easing?" "+this.options.easing:"")),P(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){P(l,"transition",""),P(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},R)}}}}function Be(s){return s.offsetWidth}function Ze(s,c,l,f){return Math.sqrt(Math.pow(c.top-s.top,2)+Math.pow(c.left-s.left,2))/Math.sqrt(Math.pow(c.top-l.top,2)+Math.pow(c.left-l.left,2))*f.animation}var ce=[],Je={initializeByDefault:!0},Ft={mount:function(s){for(var c in Je)Je.hasOwnProperty(c)&&!(c in s)&&(s[c]=Je[c]);ce.forEach(function(l){if(l.pluginName===s.pluginName)throw"Sortable: Cannot mount plugin ".concat(s.pluginName," more than once")}),ce.push(s)},pluginEvent:function(s,c,l){var f=this;this.eventCanceled=!1,l.cancel=function(){f.eventCanceled=!0};var E=s+"Global";ce.forEach(function(R){c[R.pluginName]&&(c[R.pluginName][E]&&c[R.pluginName][E](t({sortable:c},l)),c.options[R.pluginName]&&c[R.pluginName][s]&&c[R.pluginName][s](t({sortable:c},l)))})},initializePlugins:function(s,c,l,f){ce.forEach(function(D){var B=D.pluginName;if(!(!s.options[B]&&!D.initializeByDefault)){var M=new D(s,c,s.options);M.sortable=s,M.options=s.options,s[B]=M,i(l,M.defaults)}});for(var E in s.options)if(s.options.hasOwnProperty(E)){var R=this.modifyOption(s,E,s.options[E]);typeof R<"u"&&(s.options[E]=R)}},getEventProperties:function(s,c){var l={};return ce.forEach(function(f){typeof f.eventProperties=="function"&&i(l,f.eventProperties.call(c[f.pluginName],s))}),l},modifyOption:function(s,c,l){var f;return ce.forEach(function(E){s[E.pluginName]&&E.optionListeners&&typeof E.optionListeners[c]=="function"&&(f=E.optionListeners[c].call(s[E.pluginName],l))}),f}};function Ls(s){var c=s.sortable,l=s.rootEl,f=s.name,E=s.targetEl,R=s.cloneEl,D=s.toEl,B=s.fromEl,M=s.oldIndex,Y=s.newIndex,$=s.oldDraggableIndex,Q=s.newDraggableIndex,se=s.originalEvent,J=s.putSortable,he=s.extraEventProperties;if(c=c||l&&l[z],!!c){var re,Xe=c.options,ve="on"+f.charAt(0).toUpperCase()+f.substr(1);window.CustomEvent&&!p&&!g?re=new CustomEvent(f,{bubbles:!0,cancelable:!0}):(re=document.createEvent("Event"),re.initEvent(f,!0,!0)),re.to=D||l,re.from=B||l,re.item=E||l,re.clone=R,re.oldIndex=M,re.newIndex=Y,re.oldDraggableIndex=$,re.newDraggableIndex=Q,re.originalEvent=se,re.pullMode=J?J.lastPutMode:void 0;var ze=t(t({},he),Ft.getEventProperties(f,c));for(var Re in ze)re[Re]=ze[Re];l&&l.dispatchEvent(re),Xe[ve]&&Xe[ve].call(c,re)}}var Ns=["evt"],Oe=function(s,c){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},f=l.evt,E=o(l,Ns);Ft.pluginEvent.bind(j)(s,c,t({dragEl:U,parentEl:ae,ghostEl:Z,rootEl:ie,nextEl:ot,lastDownEl:en,cloneEl:oe,cloneHidden:et,dragStarted:Ut,putSortable:_e,activeSortable:j.active,originalEvent:f,oldIndex:St,oldDraggableIndex:Bt,newIndex:Me,newDraggableIndex:tt,hideGhostForTarget:Fr,unhideGhostForTarget:Br,cloneNowHidden:function(){et=!0},cloneNowShown:function(){et=!1},dispatchSortableEvent:function(R){ye({sortable:c,name:R,originalEvent:f})}},E))};function ye(s){Ls(t({putSortable:_e,cloneEl:oe,targetEl:U,rootEl:ie,oldIndex:St,oldDraggableIndex:Bt,newIndex:Me,newDraggableIndex:tt},s))}var U,ae,Z,ie,ot,en,oe,et,St,Me,Bt,tt,tn,_e,Dt=!1,nn=!1,rn=[],at,Ue,Un,Vn,Mr,Cr,Ut,At,Vt,Ht=!1,sn=!1,on,Te,Hn=[],qn=!1,an=[],ln=typeof document<"u",cn=b,Lr=g||p?"cssFloat":"float",Gs=ln&&!I&&!b&&"draggable"in document.createElement("div"),Nr=function(){if(ln){if(p)return!1;var s=document.createElement("x");return s.style.cssText="pointer-events:auto",s.style.pointerEvents==="auto"}}(),Gr=function(s,c){var l=P(s),f=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),E=te(s,0,c),R=te(s,1,c),D=E&&P(E),B=R&&P(R),M=D&&parseInt(D.marginLeft)+parseInt(D.marginRight)+x(E).width,Y=B&&parseInt(B.marginLeft)+parseInt(B.marginRight)+x(R).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(E&&D.float&&D.float!=="none"){var $=D.float==="left"?"left":"right";return R&&(B.clear==="both"||B.clear===$)?"vertical":"horizontal"}return E&&(D.display==="block"||D.display==="flex"||D.display==="table"||D.display==="grid"||M>=f&&l[Lr]==="none"||R&&l[Lr]==="none"&&M+Y>f)?"vertical":"horizontal"},xs=function(s,c,l){var f=l?s.left:s.top,E=l?s.right:s.bottom,R=l?s.width:s.height,D=l?c.left:c.top,B=l?c.right:c.bottom,M=l?c.width:c.height;return f===D||E===B||f+R/2===D+M/2},Fs=function(s,c){var l;return rn.some(function(f){var E=f[z].options.emptyInsertThreshold;if(!(!E||N(f))){var R=x(f),D=s>=R.left-E&&s<=R.right+E,B=c>=R.top-E&&c<=R.bottom+E;if(D&&B)return l=f}}),l},xr=function(s){function c(E,R){return function(D,B,M,Y){var $=D.options.group.name&&B.options.group.name&&D.options.group.name===B.options.group.name;if(E==null&&(R||$))return!0;if(E==null||E===!1)return!1;if(R&&E==="clone")return E;if(typeof E=="function")return c(E(D,B,M,Y),R)(D,B,M,Y);var Q=(R?D:B).options.group.name;return E===!0||typeof E=="string"&&E===Q||E.join&&E.indexOf(Q)>-1}}var l={},f=s.group;(!f||n(f)!="object")&&(f={name:f}),l.name=f.name,l.checkPull=c(f.pull,!0),l.checkPut=c(f.put),l.revertClone=f.revertClone,s.group=l},Fr=function(){!Nr&&Z&&P(Z,"display","none")},Br=function(){!Nr&&Z&&P(Z,"display","")};ln&&!I&&document.addEventListener("click",function(s){if(nn)return s.preventDefault(),s.stopPropagation&&s.stopPropagation(),s.stopImmediatePropagation&&s.stopImmediatePropagation(),nn=!1,!1},!0);var lt=function(s){if(U){s=s.touches?s.touches[0]:s;var c=Fs(s.clientX,s.clientY);if(c){var l={};for(var f in s)s.hasOwnProperty(f)&&(l[f]=s[f]);l.target=l.rootEl=c,l.preventDefault=void 0,l.stopPropagation=void 0,c[z]._onDragOver(l)}}},Bs=function(s){U&&U.parentNode[z]._isOutsideThisEl(s.target)};function j(s,c){if(!(s&&s.nodeType&&s.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(s));this.el=s,this.options=c=i({},c),s[z]=this;var l={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(s.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Gr(s,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(R,D){R.setData("Text",D.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:j.supportPointer!==!1&&"PointerEvent"in window&&!_,emptyInsertThreshold:5};Ft.initializePlugins(this,s,l);for(var f in l)!(f in c)&&(c[f]=l[f]);xr(c);for(var E in this)E.charAt(0)==="_"&&typeof this[E]=="function"&&(this[E]=this[E].bind(this));this.nativeDraggable=c.forceFallback?!1:Gs,this.nativeDraggable&&(this.options.touchStartThreshold=1),c.supportPointer?T(s,"pointerdown",this._onTapStart):(T(s,"mousedown",this._onTapStart),T(s,"touchstart",this._onTapStart)),this.nativeDraggable&&(T(s,"dragover",this),T(s,"dragenter",this)),rn.push(this.el),c.store&&c.store.get&&this.sort(c.store.get(this)||[]),i(this,me())}j.prototype={constructor:j,_isOutsideThisEl:function(s){!this.el.contains(s)&&s!==this.el&&(At=null)},_getDirection:function(s,c){return typeof this.options.direction=="function"?this.options.direction.call(this,s,c,U):this.options.direction},_onTapStart:function(s){if(s.cancelable){var c=this,l=this.el,f=this.options,E=f.preventOnFilter,R=s.type,D=s.touches&&s.touches[0]||s.pointerType&&s.pointerType==="touch"&&s,B=(D||s).target,M=s.target.shadowRoot&&(s.path&&s.path[0]||s.composedPath&&s.composedPath()[0])||B,Y=f.filter;if($s(l),!U&&!(/mousedown|pointerdown/.test(R)&&s.button!==0||f.disabled)&&!M.isContentEditable&&!(!this.nativeDraggable&&_&&B&&B.tagName.toUpperCase()==="SELECT")&&(B=A(B,f.draggable,l,!1),!(B&&B.animated)&&en!==B)){if(St=X(B),Bt=X(B,f.draggable),typeof Y=="function"){if(Y.call(this,s,B,this)){ye({sortable:c,rootEl:M,name:"filter",targetEl:B,toEl:l,fromEl:l}),Oe("filter",c,{evt:s}),E&&s.cancelable&&s.preventDefault();return}}else if(Y&&(Y=Y.split(",").some(function($){if($=A(M,$.trim(),l,!1),$)return ye({sortable:c,rootEl:$,name:"filter",targetEl:B,fromEl:l,toEl:l}),Oe("filter",c,{evt:s}),!0}),Y)){E&&s.cancelable&&s.preventDefault();return}f.handle&&!A(M,f.handle,l,!1)||this._prepareDragStart(s,D,B)}}},_prepareDragStart:function(s,c,l){var f=this,E=f.el,R=f.options,D=E.ownerDocument,B;if(l&&!U&&l.parentNode===E){var M=x(l);if(ie=E,U=l,ae=U.parentNode,ot=U.nextSibling,en=l,tn=R.group,j.dragged=U,at={target:U,clientX:(c||s).clientX,clientY:(c||s).clientY},Mr=at.clientX-M.left,Cr=at.clientY-M.top,this._lastX=(c||s).clientX,this._lastY=(c||s).clientY,U.style["will-change"]="all",B=function(){if(Oe("delayEnded",f,{evt:s}),j.eventCanceled){f._onDrop();return}f._disableDelayedDragEvents(),!h&&f.nativeDraggable&&(U.draggable=!0),f._triggerDragStart(s,c),ye({sortable:f,name:"choose",originalEvent:s}),F(U,R.chosenClass,!0)},R.ignore.split(",").forEach(function(Y){V(U,Y.trim(),Yn)}),T(D,"dragover",lt),T(D,"mousemove",lt),T(D,"touchmove",lt),T(D,"mouseup",f._onDrop),T(D,"touchend",f._onDrop),T(D,"touchcancel",f._onDrop),h&&this.nativeDraggable&&(this.options.touchStartThreshold=4,U.draggable=!0),Oe("delayStart",this,{evt:s}),R.delay&&(!R.delayOnTouchOnly||c)&&(!this.nativeDraggable||!(g||p))){if(j.eventCanceled){this._onDrop();return}T(D,"mouseup",f._disableDelayedDrag),T(D,"touchend",f._disableDelayedDrag),T(D,"touchcancel",f._disableDelayedDrag),T(D,"mousemove",f._delayedDragTouchMoveHandler),T(D,"touchmove",f._delayedDragTouchMoveHandler),R.supportPointer&&T(D,"pointermove",f._delayedDragTouchMoveHandler),f._dragStartTimer=setTimeout(B,R.delay)}else B()}},_delayedDragTouchMoveHandler:function(s){var c=s.touches?s.touches[0]:s;Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){U&&Yn(U),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var s=this.el.ownerDocument;v(s,"mouseup",this._disableDelayedDrag),v(s,"touchend",this._disableDelayedDrag),v(s,"touchcancel",this._disableDelayedDrag),v(s,"mousemove",this._delayedDragTouchMoveHandler),v(s,"touchmove",this._delayedDragTouchMoveHandler),v(s,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(s,c){c=c||s.pointerType=="touch"&&s,!this.nativeDraggable||c?this.options.supportPointer?T(document,"pointermove",this._onTouchMove):c?T(document,"touchmove",this._onTouchMove):T(document,"mousemove",this._onTouchMove):(T(U,"dragend",this),T(ie,"dragstart",this._onDragStart));try{document.selection?un(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(s,c){if(Dt=!1,ie&&U){Oe("dragStarted",this,{evt:c}),this.nativeDraggable&&T(document,"dragover",Bs);var l=this.options;!s&&F(U,l.dragClass,!1),F(U,l.ghostClass,!0),j.active=this,s&&this._appendGhost(),ye({sortable:this,name:"start",originalEvent:c})}else this._nulling()},_emulateDragOver:function(){if(Ue){this._lastX=Ue.clientX,this._lastY=Ue.clientY,Fr();for(var s=document.elementFromPoint(Ue.clientX,Ue.clientY),c=s;s&&s.shadowRoot&&(s=s.shadowRoot.elementFromPoint(Ue.clientX,Ue.clientY),s!==c);)c=s;if(U.parentNode[z]._isOutsideThisEl(s),c)do{if(c[z]){var l=void 0;if(l=c[z]._onDragOver({clientX:Ue.clientX,clientY:Ue.clientY,target:s,rootEl:c}),l&&!this.options.dragoverBubble)break}s=c}while(c=c.parentNode);Br()}},_onTouchMove:function(s){if(at){var c=this.options,l=c.fallbackTolerance,f=c.fallbackOffset,E=s.touches?s.touches[0]:s,R=Z&&L(Z,!0),D=Z&&R&&R.a,B=Z&&R&&R.d,M=cn&&Te&&w(Te),Y=(E.clientX-at.clientX+f.x)/(D||1)+(M?M[0]-Hn[0]:0)/(D||1),$=(E.clientY-at.clientY+f.y)/(B||1)+(M?M[1]-Hn[1]:0)/(B||1);if(!j.active&&!Dt){if(l&&Math.max(Math.abs(E.clientX-this._lastX),Math.abs(E.clientY-this._lastY))<l)return;this._onDragStart(s,!0)}if(Z){R?(R.e+=Y-(Un||0),R.f+=$-(Vn||0)):R={a:1,b:0,c:0,d:1,e:Y,f:$};var Q="matrix(".concat(R.a,",").concat(R.b,",").concat(R.c,",").concat(R.d,",").concat(R.e,",").concat(R.f,")");P(Z,"webkitTransform",Q),P(Z,"mozTransform",Q),P(Z,"msTransform",Q),P(Z,"transform",Q),Un=Y,Vn=$,Ue=E}s.cancelable&&s.preventDefault()}},_appendGhost:function(){if(!Z){var s=this.options.fallbackOnBody?document.body:ie,c=x(U,!0,cn,!0,s),l=this.options;if(cn){for(Te=s;P(Te,"position")==="static"&&P(Te,"transform")==="none"&&Te!==document;)Te=Te.parentNode;Te!==document.body&&Te!==document.documentElement?(Te===document&&(Te=k()),c.top+=Te.scrollTop,c.left+=Te.scrollLeft):Te=k(),Hn=w(Te)}Z=U.cloneNode(!0),F(Z,l.ghostClass,!1),F(Z,l.fallbackClass,!0),F(Z,l.dragClass,!0),P(Z,"transition",""),P(Z,"transform",""),P(Z,"box-sizing","border-box"),P(Z,"margin",0),P(Z,"top",c.top),P(Z,"left",c.left),P(Z,"width",c.width),P(Z,"height",c.height),P(Z,"opacity","0.8"),P(Z,"position",cn?"absolute":"fixed"),P(Z,"zIndex","100000"),P(Z,"pointerEvents","none"),j.ghost=Z,s.appendChild(Z),P(Z,"transform-origin",Mr/parseInt(Z.style.width)*100+"% "+Cr/parseInt(Z.style.height)*100+"%")}},_onDragStart:function(s,c){var l=this,f=s.dataTransfer,E=l.options;if(Oe("dragStart",this,{evt:s}),j.eventCanceled){this._onDrop();return}Oe("setupClone",this),j.eventCanceled||(oe=bt(U),oe.removeAttribute("id"),oe.draggable=!1,oe.style["will-change"]="",this._hideClone(),F(oe,this.options.chosenClass,!1),j.clone=oe),l.cloneId=un(function(){Oe("clone",l),!j.eventCanceled&&(l.options.removeCloneOnHide||ie.insertBefore(oe,U),l._hideClone(),ye({sortable:l,name:"clone"}))}),!c&&F(U,E.dragClass,!0),c?(nn=!0,l._loopId=setInterval(l._emulateDragOver,50)):(v(document,"mouseup",l._onDrop),v(document,"touchend",l._onDrop),v(document,"touchcancel",l._onDrop),f&&(f.effectAllowed="move",E.setData&&E.setData.call(l,f,U)),T(document,"drop",l),P(U,"transform","translateZ(0)")),Dt=!0,l._dragStartId=un(l._dragStarted.bind(l,c,s)),T(document,"selectstart",l),Ut=!0,_&&P(document.body,"user-select","none")},_onDragOver:function(s){var c=this.el,l=s.target,f,E,R,D=this.options,B=D.group,M=j.active,Y=tn===B,$=D.sort,Q=_e||M,se,J=this,he=!1;if(qn)return;function re(Wt,js){Oe(Wt,J,t({evt:s,isOwner:Y,axis:se?"vertical":"horizontal",revert:R,dragRect:f,targetRect:E,canSort:$,fromSortable:Q,target:l,completed:ve,onMove:function(kr,Qs){return dn(ie,c,U,f,kr,x(kr),s,Qs)},changed:ze},js))}function Xe(){re("dragOverAnimationCapture"),J.captureAnimationState(),J!==Q&&Q.captureAnimationState()}function ve(Wt){return re("dragOverCompleted",{insertion:Wt}),Wt&&(Y?M._hideClone():M._showClone(J),J!==Q&&(F(U,_e?_e.options.ghostClass:M.options.ghostClass,!1),F(U,D.ghostClass,!0)),_e!==J&&J!==j.active?_e=J:J===j.active&&_e&&(_e=null),Q===J&&(J._ignoreWhileAnimating=l),J.animateAll(function(){re("dragOverAnimationComplete"),J._ignoreWhileAnimating=null}),J!==Q&&(Q.animateAll(),Q._ignoreWhileAnimating=null)),(l===U&&!U.animated||l===c&&!l.animated)&&(At=null),!D.dragoverBubble&&!s.rootEl&&l!==document&&(U.parentNode[z]._isOutsideThisEl(s.target),!Wt&&lt(s)),!D.dragoverBubble&&s.stopPropagation&&s.stopPropagation(),he=!0}function ze(){Me=X(U),tt=X(U,D.draggable),ye({sortable:J,name:"change",toEl:c,newIndex:Me,newDraggableIndex:tt,originalEvent:s})}if(s.preventDefault!==void 0&&s.cancelable&&s.preventDefault(),l=A(l,D.draggable,c,!0),re("dragOver"),j.eventCanceled)return he;if(U.contains(s.target)||l.animated&&l.animatingX&&l.animatingY||J._ignoreWhileAnimating===l)return ve(!1);if(nn=!1,M&&!D.disabled&&(Y?$||(R=ae!==ie):_e===this||(this.lastPutMode=tn.checkPull(this,M,U,s))&&B.checkPut(this,M,U,s))){if(se=this._getDirection(s,l)==="vertical",f=x(U),re("dragOverValid"),j.eventCanceled)return he;if(R)return ae=ie,Xe(),this._hideClone(),re("revert"),j.eventCanceled||(ot?ie.insertBefore(U,ot):ie.appendChild(U)),ve(!0);var Re=N(c,D.draggable);if(!Re||qs(s,se,this)&&!Re.animated){if(Re===U)return ve(!1);if(Re&&c===s.target&&(l=Re),l&&(E=x(l)),dn(ie,c,U,f,l,E,s,!!l)!==!1)return Xe(),Re&&Re.nextSibling?c.insertBefore(U,Re.nextSibling):c.appendChild(U),ae=c,ze(),ve(!0)}else if(Re&&Hs(s,se,this)){var ct=te(c,0,D,!0);if(ct===U)return ve(!1);if(l=ct,E=x(l),dn(ie,c,U,f,l,E,s,!1)!==!1)return Xe(),c.insertBefore(U,ct),ae=c,ze(),ve(!0)}else if(l.parentNode===c){E=x(l);var Ye=0,dt,kt=U.parentNode!==c,Ot=!xs(U.animated&&U.toRect||f,l.animated&&l.toRect||E,se),Ce=se?"top":"left",nt=q(l,"top","top")||q(U,"top","top"),gn=nt?nt.scrollTop:void 0;At!==l&&(dt=E[Ce],Ht=!1,sn=!Ot&&D.invertSwap||kt),Ye=Ys(s,l,E,se,Ot?1:D.swapThreshold,D.invertedSwapThreshold==null?D.swapThreshold:D.invertedSwapThreshold,sn,At===l);var je;if(Ye!==0){var wt=X(U);do wt-=Ye,je=ae.children[wt];while(je&&(P(je,"display")==="none"||je===Z))}if(Ye===0||je===l)return ve(!1);At=l,Vt=Ye;var ut=l.nextElementSibling,rt=!1;rt=Ye===1;var ft=dn(ie,c,U,f,l,E,s,rt);if(ft!==!1)return(ft===1||ft===-1)&&(rt=ft===1),qn=!0,setTimeout(Vs,30),Xe(),rt&&!ut?c.appendChild(U):l.parentNode.insertBefore(U,rt?ut:l),nt&&Ae(nt,0,gn-nt.scrollTop),ae=U.parentNode,dt!==void 0&&!sn&&(on=Math.abs(dt-x(l)[Ce])),ze(),ve(!0)}if(c.contains(U))return ve(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",lt),v(document,"mousemove",lt),v(document,"touchmove",lt)},_offUpEvents:function(){var s=this.el.ownerDocument;v(s,"mouseup",this._onDrop),v(s,"touchend",this._onDrop),v(s,"pointerup",this._onDrop),v(s,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(s){var c=this.el,l=this.options;if(Me=X(U),tt=X(U,l.draggable),Oe("drop",this,{evt:s}),ae=U&&U.parentNode,Me=X(U),tt=X(U,l.draggable),j.eventCanceled){this._nulling();return}Dt=!1,sn=!1,Ht=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),kn(this.cloneId),kn(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(c,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_&&P(document.body,"user-select",""),P(U,"transform",""),s&&(Ut&&(s.cancelable&&s.preventDefault(),!l.dropBubble&&s.stopPropagation()),Z&&Z.parentNode&&Z.parentNode.removeChild(Z),(ie===ae||_e&&_e.lastPutMode!=="clone")&&oe&&oe.parentNode&&oe.parentNode.removeChild(oe),U&&(this.nativeDraggable&&v(U,"dragend",this),Yn(U),U.style["will-change"]="",Ut&&!Dt&&F(U,_e?_e.options.ghostClass:this.options.ghostClass,!1),F(U,this.options.chosenClass,!1),ye({sortable:this,name:"unchoose",toEl:ae,newIndex:null,newDraggableIndex:null,originalEvent:s}),ie!==ae?(Me>=0&&(ye({rootEl:ae,name:"add",toEl:ae,fromEl:ie,originalEvent:s}),ye({sortable:this,name:"remove",toEl:ae,originalEvent:s}),ye({rootEl:ae,name:"sort",toEl:ae,fromEl:ie,originalEvent:s}),ye({sortable:this,name:"sort",toEl:ae,originalEvent:s})),_e&&_e.save()):Me!==St&&Me>=0&&(ye({sortable:this,name:"update",toEl:ae,originalEvent:s}),ye({sortable:this,name:"sort",toEl:ae,originalEvent:s})),j.active&&((Me==null||Me===-1)&&(Me=St,tt=Bt),ye({sortable:this,name:"end",toEl:ae,originalEvent:s}),this.save()))),this._nulling()},_nulling:function(){Oe("nulling",this),ie=U=ae=Z=ot=oe=en=et=at=Ue=Ut=Me=tt=St=Bt=At=Vt=_e=tn=j.dragged=j.ghost=j.clone=j.active=null,an.forEach(function(s){s.checked=!0}),an.length=Un=Vn=0},handleEvent:function(s){switch(s.type){case"drop":case"dragend":this._onDrop(s);break;case"dragenter":case"dragover":U&&(this._onDragOver(s),Us(s));break;case"selectstart":s.preventDefault();break}},toArray:function(){for(var s=[],c,l=this.el.children,f=0,E=l.length,R=this.options;f<E;f++)c=l[f],A(c,R.draggable,this.el,!1)&&s.push(c.getAttribute(R.dataIdAttr)||Ws(c));return s},sort:function(s,c){var l={},f=this.el;this.toArray().forEach(function(E,R){var D=f.children[R];A(D,this.options.draggable,f,!1)&&(l[E]=D)},this),c&&this.captureAnimationState(),s.forEach(function(E){l[E]&&(f.removeChild(l[E]),f.appendChild(l[E]))}),c&&this.animateAll()},save:function(){var s=this.options.store;s&&s.set&&s.set(this)},closest:function(s,c){return A(s,c||this.options.draggable,this.el,!1)},option:function(s,c){var l=this.options;if(c===void 0)return l[s];var f=Ft.modifyOption(this,s,c);typeof f<"u"?l[s]=f:l[s]=c,s==="group"&&xr(l)},destroy:function(){Oe("destroy",this);var s=this.el;s[z]=null,v(s,"mousedown",this._onTapStart),v(s,"touchstart",this._onTapStart),v(s,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(s,"dragover",this),v(s,"dragenter",this)),Array.prototype.forEach.call(s.querySelectorAll("[draggable]"),function(c){c.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),rn.splice(rn.indexOf(this.el),1),this.el=s=null},_hideClone:function(){if(!et){if(Oe("hideClone",this),j.eventCanceled)return;P(oe,"display","none"),this.options.removeCloneOnHide&&oe.parentNode&&oe.parentNode.removeChild(oe),et=!0}},_showClone:function(s){if(s.lastPutMode!=="clone"){this._hideClone();return}if(et){if(Oe("showClone",this),j.eventCanceled)return;U.parentNode==ie&&!this.options.group.revertClone?ie.insertBefore(oe,U):ot?ie.insertBefore(oe,ot):ie.appendChild(oe),this.options.group.revertClone&&this.animate(U,oe),P(oe,"display",""),et=!1}}};function Us(s){s.dataTransfer&&(s.dataTransfer.dropEffect="move"),s.cancelable&&s.preventDefault()}function dn(s,c,l,f,E,R,D,B){var M,Y=s[z],$=Y.options.onMove,Q;return window.CustomEvent&&!p&&!g?M=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(M=document.createEvent("Event"),M.initEvent("move",!0,!0)),M.to=c,M.from=s,M.dragged=l,M.draggedRect=f,M.related=E||c,M.relatedRect=R||x(c),M.willInsertAfter=B,M.originalEvent=D,s.dispatchEvent(M),$&&(Q=$.call(Y,M,D)),Q}function Yn(s){s.draggable=!1}function Vs(){qn=!1}function Hs(s,c,l){var f=x(te(l.el,0,l.options,!0)),E=10;return c?s.clientX<f.left-E||s.clientY<f.top&&s.clientX<f.right:s.clientY<f.top-E||s.clientY<f.bottom&&s.clientX<f.left}function qs(s,c,l){var f=x(N(l.el,l.options.draggable)),E=10;return c?s.clientX>f.right+E||s.clientX<=f.right&&s.clientY>f.bottom&&s.clientX>=f.left:s.clientX>f.right&&s.clientY>f.top||s.clientX<=f.right&&s.clientY>f.bottom+E}function Ys(s,c,l,f,E,R,D,B){var M=f?s.clientY:s.clientX,Y=f?l.height:l.width,$=f?l.top:l.left,Q=f?l.bottom:l.right,se=!1;if(!D){if(B&&on<Y*E){if(!Ht&&(Vt===1?M>$+Y*R/2:M<Q-Y*R/2)&&(Ht=!0),Ht)se=!0;else if(Vt===1?M<$+on:M>Q-on)return-Vt}else if(M>$+Y*(1-E)/2&&M<Q-Y*(1-E)/2)return ks(c)}return se=se||D,se&&(M<$+Y*R/2||M>Q-Y*R/2)?M>$+Y/2?1:-1:0}function ks(s){return X(U)<X(s)?1:-1}function Ws(s){for(var c=s.tagName+s.className+s.src+s.href+s.textContent,l=c.length,f=0;l--;)f+=c.charCodeAt(l);return f.toString(36)}function $s(s){an.length=0;for(var c=s.getElementsByTagName("input"),l=c.length;l--;){var f=c[l];f.checked&&an.push(f)}}function un(s){return setTimeout(s,0)}function kn(s){return clearTimeout(s)}ln&&T(document,"touchmove",function(s){(j.active||Dt)&&s.cancelable&&s.preventDefault()}),j.utils={on:T,off:v,css:P,find:V,is:function(s,c){return!!A(s,c,s,!1)},extend:W,throttle:$e,closest:A,toggleClass:F,clone:bt,index:X,nextTick:un,cancelNextTick:kn,detectDirection:Gr,getChild:te},j.get=function(s){return s[z]},j.mount=function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];c[0].constructor===Array&&(c=c[0]),c.forEach(function(f){if(!f.prototype||!f.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(f));f.utils&&(j.utils=t(t({},j.utils),f.utils)),Ft.mount(f)})},j.create=function(s,c){return new j(s,c)},j.version=u;var fe=[],qt,Wn,$n=!1,Xn,zn,fn,Yt;function Xs(){function s(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var c in this)c.charAt(0)==="_"&&typeof this[c]=="function"&&(this[c]=this[c].bind(this))}return s.prototype={dragStarted:function(c){var l=c.originalEvent;this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):this.options.supportPointer?T(document,"pointermove",this._handleFallbackAutoScroll):l.touches?T(document,"touchmove",this._handleFallbackAutoScroll):T(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(c){var l=c.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll)),Ur(),pn(),vt()},nulling:function(){fn=Wn=qt=$n=Yt=Xn=zn=null,fe.length=0},_handleFallbackAutoScroll:function(c){this._handleAutoScroll(c,!0)},_handleAutoScroll:function(c,l){var f=this,E=(c.touches?c.touches[0]:c).clientX,R=(c.touches?c.touches[0]:c).clientY,D=document.elementFromPoint(E,R);if(fn=c,l||this.options.forceAutoScrollFallback||g||p||_){jn(c,this.options,D,l);var B=H(D,!0);$n&&(!Yt||E!==Xn||R!==zn)&&(Yt&&Ur(),Yt=setInterval(function(){var M=H(document.elementFromPoint(E,R),!0);M!==B&&(B=M,pn()),jn(c,f.options,M,l)},10),Xn=E,zn=R)}else{if(!this.options.bubbleScroll||H(D,!0)===k()){pn();return}jn(c,this.options,H(D,!1),!1)}}},i(s,{pluginName:"scroll",initializeByDefault:!0})}function pn(){fe.forEach(function(s){clearInterval(s.pid)}),fe=[]}function Ur(){clearInterval(Yt)}var jn=$e(function(s,c,l,f){if(c.scroll){var E=(s.touches?s.touches[0]:s).clientX,R=(s.touches?s.touches[0]:s).clientY,D=c.scrollSensitivity,B=c.scrollSpeed,M=k(),Y=!1,$;Wn!==l&&(Wn=l,pn(),qt=c.scroll,$=c.scrollFn,qt===!0&&(qt=H(l,!0)));var Q=0,se=qt;do{var J=se,he=x(J),re=he.top,Xe=he.bottom,ve=he.left,ze=he.right,Re=he.width,ct=he.height,Ye=void 0,dt=void 0,kt=J.scrollWidth,Ot=J.scrollHeight,Ce=P(J),nt=J.scrollLeft,gn=J.scrollTop;J===M?(Ye=Re<kt&&(Ce.overflowX==="auto"||Ce.overflowX==="scroll"||Ce.overflowX==="visible"),dt=ct<Ot&&(Ce.overflowY==="auto"||Ce.overflowY==="scroll"||Ce.overflowY==="visible")):(Ye=Re<kt&&(Ce.overflowX==="auto"||Ce.overflowX==="scroll"),dt=ct<Ot&&(Ce.overflowY==="auto"||Ce.overflowY==="scroll"));var je=Ye&&(Math.abs(ze-E)<=D&&nt+Re<kt)-(Math.abs(ve-E)<=D&&!!nt),wt=dt&&(Math.abs(Xe-R)<=D&&gn+ct<Ot)-(Math.abs(re-R)<=D&&!!gn);if(!fe[Q])for(var ut=0;ut<=Q;ut++)fe[ut]||(fe[ut]={});(fe[Q].vx!=je||fe[Q].vy!=wt||fe[Q].el!==J)&&(fe[Q].el=J,fe[Q].vx=je,fe[Q].vy=wt,clearInterval(fe[Q].pid),(je!=0||wt!=0)&&(Y=!0,fe[Q].pid=setInterval((function(){f&&this.layer===0&&j.active._onTouchMove(fn);var rt=fe[this.layer].vy?fe[this.layer].vy*B:0,ft=fe[this.layer].vx?fe[this.layer].vx*B:0;typeof $=="function"&&$.call(j.dragged.parentNode[z],ft,rt,s,fn,fe[this.layer].el)!=="continue"||Ae(fe[this.layer].el,ft,rt)}).bind({layer:Q}),24))),Q++}while(c.bubbleScroll&&se!==M&&(se=H(se,!1)));$n=Y}},30),Vr=function(s){var c=s.originalEvent,l=s.putSortable,f=s.dragEl,E=s.activeSortable,R=s.dispatchSortableEvent,D=s.hideGhostForTarget,B=s.unhideGhostForTarget;if(c){var M=l||E;D();var Y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:c,$=document.elementFromPoint(Y.clientX,Y.clientY);B(),M&&!M.el.contains($)&&(R("spill"),this.onSpill({dragEl:f,putSortable:l}))}};function Qn(){}Qn.prototype={startIndex:null,dragStart:function(s){var c=s.oldDraggableIndex;this.startIndex=c},onSpill:function(s){var c=s.dragEl,l=s.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var f=te(this.sortable.el,this.startIndex,this.options);f?this.sortable.el.insertBefore(c,f):this.sortable.el.appendChild(c),this.sortable.animateAll(),l&&l.animateAll()},drop:Vr},i(Qn,{pluginName:"revertOnSpill"});function Kn(){}Kn.prototype={onSpill:function(s){var c=s.dragEl,l=s.putSortable,f=l||this.sortable;f.captureAnimationState(),c.parentNode&&c.parentNode.removeChild(c),f.animateAll()},drop:Vr},i(Kn,{pluginName:"removeOnSpill"}),j.mount(new Xs),j.mount(Kn,Qn);var zs=j;window.Sortable=zs;var Hr=s=>{let c=Array.from(s.childNodes).filter(l=>{var f;return l.nodeType===8&&["[if ENDBLOCK]><![endif]","__ENDBLOCK__"].includes((f=l.nodeValue)==null?void 0:f.trim())})[0];c&&s.appendChild(c)};(qr=window.Livewire)==null||qr.directive("sortable",({el:s,directive:c,component:l})=>{if(c.modifiers.length>0)return;let f={};s.hasAttribute("wire:sortable.options")&&(f=new Function(`return ${s.getAttribute("wire:sortable.options")};`)()),s.livewire_sortable=window.Sortable.create(s,{sort:!0,...f,draggable:"[wire\\:sortable\\.item]",handle:s.querySelector("[wire\\:sortable\\.handle]")?"[wire\\:sortable\\.handle]":null,dataIdAttr:"wire:sortable.item",group:{pull:!1,put:!1,...f.group,name:s.getAttribute("wire:sortable")},store:{...f.store,set:function(D){let B=D.toArray().map((M,Y)=>({order:Y+1,value:M}));Hr(s),l.$wire.call(c.method,B)}}});let E=s.querySelector("[wire\\:sortable\\.item]")!==null;if(E)return;let R=l;Livewire.hook("commit",({component:D,succeed:B})=>{D.id===R.id&&(E||B(()=>{queueMicrotask(()=>{s.livewire_sortable.option("handle",s.querySelector("[wire\\:sortable\\.handle]")?"[wire\\:sortable\\.handle]":null),E=s.querySelector("[wire\\:sortable\\.item]")!==null})}))})}),(Yr=window.Livewire)==null||Yr.directive("sortable-group",({el:s,directive:c,component:l})=>{if(!c.modifiers.includes("item-group"))return;let f={};s.hasAttribute("wire:sortable-group.options")&&(f=new Function(`return ${s.getAttribute("wire:sortable-group.options")};`)()),s.livewire_sortable=window.Sortable.create(s,{sort:!0,...f,draggable:"[wire\\:sortable-group\\.item]",handle:"[wire\\:sortable-group\\.handle]",dataIdAttr:"wire:sortable-group.item",group:{pull:!0,put:!0,...f.group,name:s.closest("[wire\\:sortable-group]").getAttribute("wire:sortable-group")},onSort:E=>{if(E.to!==E.from&&s===E.from)return;let R=s.closest("[wire\\:sortable-group]"),D=Array.from(R.querySelectorAll("[wire\\:sortable-group\\.item-group]")).map((B,M)=>(Hr(B),{order:M+1,value:B.getAttribute("wire:sortable-group.item-group"),items:B.livewire_sortable.toArray().map((Y,$)=>({order:$+1,value:Y}))}));l.$wire.call(R.getAttribute("wire:sortable-group"),D)}})})})();/*! Bundled license information:

sortablejs/modular/sortable.esm.js:
  (**!
   * Sortable 1.15.0
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   *)
*//*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const so=e=>e instanceof HTMLElement,oo=(e,t=[],n=[])=>{const r={...e},i=[],a=[],o=()=>({...r}),u=()=>{const I=[...i];return i.length=0,I},d=()=>{const I=[...a];a.length=0,I.forEach(({type:S,data:T})=>{p(S,T)})},p=(I,S,T)=>{if(T&&!document.hidden){a.push({type:I,data:S});return}b[I]&&b[I](S),i.push({type:I,data:S})},g=(I,...S)=>_[I]?_[I](...S):null,h={getState:o,processActionQueue:u,processDispatchQueue:d,dispatch:p,query:g};let _={};t.forEach(I=>{_={...I(r),..._}});let b={};return n.forEach(I=>{b={...I(p,g,r),...b}}),h},ao=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},le=(e,t)=>{for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])},st=e=>{const t={};return le(e,n=>{ao(t,n,e[n])}),t},pe=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},lo="http://www.w3.org/2000/svg",co=["svg","path"],Wr=e=>co.includes(e),An=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const r=Wr(e)?document.createElementNS(lo,e):document.createElement(e);return t&&(Wr(e)?pe(r,"class",t):r.className=t),le(n,(i,a)=>{pe(r,i,a)}),r},uo=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},fo=(e,t)=>(n,r)=>(typeof r<"u"?t.splice(r,0,n):t.push(n),n),po=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),go=(()=>typeof window<"u"&&typeof window.document<"u")(),Fi=()=>go,ho=Fi()?An("svg"):{},Eo="children"in ho?e=>e.children.length:e=>e.childNodes.length,Bi=(e,t,n,r)=>{const i=n[0]||e.left,a=n[1]||e.top,o=i+e.width,u=a+e.height*(r[1]||1),d={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:i,top:a,right:o,bottom:u}};return t.filter(p=>!p.isRectIgnored()).map(p=>p.rect).forEach(p=>{$r(d.inner,{...p.inner}),$r(d.outer,{...p.outer})}),Xr(d.inner),d.outer.bottom+=d.element.marginBottom,d.outer.right+=d.element.marginRight,Xr(d.outer),d},$r=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},Xr=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},ht=e=>typeof e=="number",mo=(e,t,n,r=.001)=>Math.abs(e-t)<r&&Math.abs(n)<r,Io=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let r=null,i=null,a=0,o=!1;const p=st({interpolate:(g,h)=>{if(o)return;if(!(ht(r)&&ht(i))){o=!0,a=0;return}const _=-(i-r)*e;a+=_/n,i+=a,a*=t,mo(i,r,a)||h?(i=r,a=0,o=!0,p.onupdate(i),p.oncomplete(i)):p.onupdate(i)},target:{set:g=>{if(ht(g)&&!ht(i)&&(i=g),r===null&&(r=g,i=g),r=g,i===r||typeof r>"u"){o=!0,a=0,p.onupdate(i),p.oncomplete(i);return}o=!1},get:()=>r},resting:{get:()=>o},onupdate:g=>{},oncomplete:g=>{}});return p},_o=e=>e<.5?2*e*e:-1+(4-2*e)*e,To=({duration:e=500,easing:t=_o,delay:n=0}={})=>{let r=null,i,a,o=!0,u=!1,d=null;const g=st({interpolate:(h,_)=>{o||d===null||(r===null&&(r=h),!(h-r<n)&&(i=h-r-n,i>=e||_?(i=1,a=u?0:1,g.onupdate(a*d),g.oncomplete(a*d),o=!0):(a=i/e,g.onupdate((i>=0?t(u?1-a:a):0)*d))))},target:{get:()=>u?0:d,set:h=>{if(d===null){d=h,g.onupdate(h),g.oncomplete(h);return}h<d?(d=1,u=!0):(u=!1,d=h),o=!1,r=null}},resting:{get:()=>o},onupdate:h=>{},oncomplete:h=>{}});return g},zr={spring:Io,tween:To},Ro=(e,t,n)=>{const r=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,i=typeof r=="string"?r:r.type,a=typeof r=="object"?{...r}:{};return zr[i]?zr[i](a):null},Ir=(e,t,n,r=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(i=>{e.forEach(a=>{let o=a,u=()=>n[a],d=p=>n[a]=p;typeof a=="object"&&(o=a.key,u=a.getter||u,d=a.setter||d),!(i[o]&&!r)&&(i[o]={get:u,set:d})})})},yo=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r})=>{const i={...t},a=[];return le(e,(o,u)=>{const d=Ro(u);if(!d)return;d.onupdate=g=>{t[o]=g},d.target=i[o],Ir([{key:o,setter:g=>{d.target!==g&&(d.target=g)},getter:()=>t[o]}],[n,r],t,!0),a.push(d)}),{write:o=>{let u=document.hidden,d=!0;return a.forEach(p=>{p.resting||(d=!1),p.interpolate(o,u)}),d},destroy:()=>{}}},vo=e=>(t,n)=>{e.addEventListener(t,n)},bo=e=>(t,n)=>{e.removeEventListener(t,n)},So=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,viewState:i,view:a})=>{const o=[],u=vo(a.element),d=bo(a.element);return r.on=(p,g)=>{o.push({type:p,fn:g}),u(p,g)},r.off=(p,g)=>{o.splice(o.findIndex(h=>h.type===p&&h.fn===g),1),d(p,g)},{write:()=>!0,destroy:()=>{o.forEach(p=>{d(p.type,p.fn)})}}},Do=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{Ir(e,n,t)},be=e=>e!=null,Ao={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Oo=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,view:i})=>{const a={...t},o={};Ir(e,[n,r],t);const u=()=>[t.translateX||0,t.translateY||0],d=()=>[t.scaleX||0,t.scaleY||0],p=()=>i.rect?Bi(i.rect,i.childViews,u(),d()):null;return n.rect={get:p},r.rect={get:p},e.forEach(g=>{t[g]=typeof a[g]>"u"?Ao[g]:a[g]}),{write:()=>{if(wo(o,t))return Po(i.element,t),Object.assign(o,{...t}),!0},destroy:()=>{}}},wo=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},Po=(e,{opacity:t,perspective:n,translateX:r,translateY:i,scaleX:a,scaleY:o,rotateX:u,rotateY:d,rotateZ:p,originX:g,originY:h,width:_,height:b})=>{let I="",S="";(be(g)||be(h))&&(S+=`transform-origin: ${g||0}px ${h||0}px;`),be(n)&&(I+=`perspective(${n}px) `),(be(r)||be(i))&&(I+=`translate3d(${r||0}px, ${i||0}px, 0) `),(be(a)||be(o))&&(I+=`scale3d(${be(a)?a:1}, ${be(o)?o:1}, 1) `),be(p)&&(I+=`rotateZ(${p}rad) `),be(u)&&(I+=`rotateX(${u}rad) `),be(d)&&(I+=`rotateY(${d}rad) `),I.length&&(S+=`transform:${I};`),be(t)&&(S+=`opacity:${t};`,t===0&&(S+="visibility:hidden;"),t<1&&(S+="pointer-events:none;")),be(b)&&(S+=`height:${b}px;`),be(_)&&(S+=`width:${_}px;`);const T=e.elementCurrentStyle||"";(S.length!==T.length||S!==T)&&(e.style.cssText=S,e.elementCurrentStyle=S)},Mo={styles:Oo,listeners:So,animations:yo,apis:Do},jr=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),ge=({tag:e="div",name:t=null,attributes:n={},read:r=()=>{},write:i=()=>{},create:a=()=>{},destroy:o=()=>{},filterFrameActionsForChild:u=(b,I)=>I,didCreateView:d=()=>{},didWriteView:p=()=>{},ignoreRect:g=!1,ignoreRectUpdate:h=!1,mixins:_=[]}={})=>(b,I={})=>{const S=An(e,`filepond--${t}`,n),T=window.getComputedStyle(S,null),v=jr();let m=null,y=!1;const A=[],C=[],F={},P={},L=[i],V=[r],k=[o],x=()=>S,q=()=>A.concat(),te=()=>F,N=z=>(me,Be)=>me(z,Be),X=()=>m||(m=Bi(v,A,[0,0],[1,1]),m),w=()=>T,G=()=>{m=null,A.forEach(Be=>Be._read()),!(h&&v.width&&v.height)&&jr(v,S,T);const me={root:Ae,props:I,rect:v};V.forEach(Be=>Be(me))},H=(z,me,Be)=>{let Ze=me.length===0;return L.forEach(ce=>{ce({props:I,root:Ae,actions:me,timestamp:z,shouldOptimize:Be})===!1&&(Ze=!1)}),C.forEach(ce=>{ce.write(z)===!1&&(Ze=!1)}),A.filter(ce=>!!ce.element.parentNode).forEach(ce=>{ce._write(z,u(ce,me),Be)||(Ze=!1)}),A.forEach((ce,Je)=>{ce.element.parentNode||(Ae.appendChild(ce.element,Je),ce._read(),ce._write(z,u(ce,me),Be),Ze=!1)}),y=Ze,p({props:I,root:Ae,actions:me,timestamp:z}),Ze},W=()=>{C.forEach(z=>z.destroy()),k.forEach(z=>{z({root:Ae,props:I})}),A.forEach(z=>z._destroy())},ee={element:{get:x},style:{get:w},childViews:{get:q}},ne={...ee,rect:{get:X},ref:{get:te},is:z=>t===z,appendChild:uo(S),createChildView:N(b),linkView:z=>(A.push(z),z),unlinkView:z=>{A.splice(A.indexOf(z),1)},appendChildView:fo(S,A),removeChildView:po(S,A),registerWriter:z=>L.push(z),registerReader:z=>V.push(z),registerDestroyer:z=>k.push(z),invalidateLayout:()=>S.layoutCalculated=!1,dispatch:b.dispatch,query:b.query},$e={element:{get:x},childViews:{get:q},rect:{get:X},resting:{get:()=>y},isRectIgnored:()=>g,_read:G,_write:H,_destroy:W},vt={...ee,rect:{get:()=>v}};Object.keys(_).sort((z,me)=>z==="styles"?1:me==="styles"?-1:0).forEach(z=>{const me=Mo[z]({mixinConfig:_[z],viewProps:I,viewState:P,viewInternalAPI:ne,viewExternalAPI:$e,view:st(vt)});me&&C.push(me)});const Ae=st(ne);a({root:Ae,props:I});const bt=Eo(S);return A.forEach((z,me)=>{Ae.appendChild(z.element,bt+me)}),d(Ae),st($e)},Co=(e,t,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(e),window[r].writers.push(t);return}window[r]={readers:[e],writers:[t]};const i=window[r],a=1e3/n;let o=null,u=null,d=null,p=null;const g=()=>{document.hidden?(d=()=>window.setTimeout(()=>h(performance.now()),a),p=()=>window.clearTimeout(u)):(d=()=>window.requestAnimationFrame(h),p=()=>window.cancelAnimationFrame(u))};document.addEventListener("visibilitychange",()=>{p&&p(),g(),h(performance.now())});const h=_=>{u=d(h),o||(o=_);const b=_-o;b<=a||(o=_-b%a,i.readers.forEach(I=>I()),i.writers.forEach(I=>I(_)))};return g(),h(performance.now()),{pause:()=>{p(u)}}},De=(e,t)=>({root:n,props:r,actions:i=[],timestamp:a,shouldOptimize:o})=>{i.filter(u=>e[u.type]).forEach(u=>e[u.type]({root:n,props:r,action:u.data,timestamp:a,shouldOptimize:o})),t&&t({root:n,props:r,actions:i,timestamp:a,shouldOptimize:o})},Qr=(e,t)=>t.parentNode.insertBefore(e,t),Kr=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Cn=e=>Array.isArray(e),Qe=e=>e==null,Lo=e=>e.trim(),Ln=e=>""+e,No=(e,t=",")=>Qe(e)?[]:Cn(e)?e:Ln(e).split(t).map(Lo).filter(n=>n.length),Ui=e=>typeof e=="boolean",Vi=e=>Ui(e)?e:e==="true",Se=e=>typeof e=="string",Hi=e=>ht(e)?e:Se(e)?Ln(e).replace(/[a-z]+/gi,""):0,vn=e=>parseInt(Hi(e),10),Zr=e=>parseFloat(Hi(e)),xt=e=>ht(e)&&isFinite(e)&&Math.floor(e)===e,Jr=(e,t=1e3)=>{if(xt(e))return e;let n=Ln(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),vn(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),vn(n)*t):vn(n)},Et=e=>typeof e=="function",Go=e=>{let t=self,n=e.split("."),r=null;for(;r=n.shift();)if(t=t[r],!t)return null;return t},ei={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},xo=e=>{const t={};return t.url=Se(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},le(ei,n=>{t[n]=Fo(n,e[n],ei[n],t.timeout,t.headers)}),t.process=e.process||Se(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},Fo=(e,t,n,r,i)=>{if(t===null)return null;if(typeof t=="function")return t;const a={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:i,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(Se(t))return a.url=t,a;if(Object.assign(a,t),Se(a.headers)){const o=a.headers.split(/:(.+)/);a.headers={header:o[0],value:o[1]}}return a.withCredentials=Vi(a.withCredentials),a},Bo=e=>xo(e),Uo=e=>e===null,Ie=e=>typeof e=="object"&&e!==null,Vo=e=>Ie(e)&&Se(e.url)&&Ie(e.process)&&Ie(e.revert)&&Ie(e.restore)&&Ie(e.fetch),sr=e=>Cn(e)?"array":Uo(e)?"null":xt(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":Vo(e)?"api":typeof e,Ho=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),qo={array:No,boolean:Vi,int:e=>sr(e)==="bytes"?Jr(e):vn(e),number:Zr,float:Zr,bytes:Jr,string:e=>Et(e)?e:Ln(e),function:e=>Go(e),serverapi:Bo,object:e=>{try{return JSON.parse(Ho(e))}catch{return null}}},Yo=(e,t)=>qo[t](e),qi=(e,t,n)=>{if(e===t)return e;let r=sr(e);if(r!==n){const i=Yo(e,n);if(r=sr(i),i===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=i}return e},ko=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:r=>{n=qi(r,e,t)}}},Wo=e=>{const t={};return le(e,n=>{const r=e[n];t[n]=ko(r[0],r[1])}),st(t)},$o=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Wo(e)}),Nn=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),Xo=(e,t)=>{const n={};return le(t,r=>{n[r]={get:()=>e.getState().options[r],set:i=>{e.dispatch(`SET_${Nn(r,"_").toUpperCase()}`,{value:i})}}}),n},zo=e=>(t,n,r)=>{const i={};return le(e,a=>{const o=Nn(a,"_").toUpperCase();i[`SET_${o}`]=u=>{try{r.options[a]=u.value}catch{}t(`DID_SET_${o}`,{value:r.options[a]})}}),i},jo=e=>t=>{const n={};return le(e,r=>{n[`GET_${Nn(r,"_").toUpperCase()}`]=i=>t.options[r]}),n},Fe={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},_r=()=>Math.random().toString(36).substring(2,11),Tr=(e,t)=>e.splice(t,1),Qo=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},Gn=()=>{const e=[],t=(r,i)=>{Tr(e,e.findIndex(a=>a.event===r&&(a.cb===i||!i)))},n=(r,i,a)=>{e.filter(o=>o.event===r).map(o=>o.cb).forEach(o=>Qo(()=>o(...i),a))};return{fireSync:(r,...i)=>{n(r,i,!0)},fire:(r,...i)=>{n(r,i,!1)},on:(r,i)=>{e.push({event:r,cb:i})},onOnce:(r,i)=>{e.push({event:r,cb:(...a)=>{t(r,i),i(...a)}})},off:t}},Yi=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},Ko=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],we=e=>{const t={};return Yi(e,t,Ko),t},Zo=e=>{e.forEach((t,n)=>{t.released&&Tr(e,n)})},K={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Ee={INPUT:1,LIMBO:2,LOCAL:3},ki=e=>/[^0-9]+/.exec(e),Wi=()=>ki(1.1.toLocaleString())[0],Jo=()=>{const e=Wi(),t=1e3.toLocaleString(),n=1e3.toString();return t!==n?ki(t)[0]:e==="."?",":"."},O={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Rr=[],Ve=(e,t,n)=>new Promise((r,i)=>{const a=Rr.filter(u=>u.key===e).map(u=>u.cb);if(a.length===0){r(t);return}const o=a.shift();a.reduce((u,d)=>u.then(p=>d(p,n)),o(t,n)).then(u=>r(u)).catch(u=>i(u))}),Rt=(e,t,n)=>Rr.filter(r=>r.key===e).map(r=>r.cb(t,n)),ea=(e,t)=>Rr.push({key:e,cb:t}),ta=e=>Object.assign(Pt,e),On=()=>({...Pt}),na=e=>{le(e,(t,n)=>{Pt[t]&&(Pt[t][0]=qi(n,Pt[t][0],Pt[t][1]))})},Pt={id:[null,O.STRING],name:["filepond",O.STRING],disabled:[!1,O.BOOLEAN],className:[null,O.STRING],required:[!1,O.BOOLEAN],captureMethod:[null,O.STRING],allowSyncAcceptAttribute:[!0,O.BOOLEAN],allowDrop:[!0,O.BOOLEAN],allowBrowse:[!0,O.BOOLEAN],allowPaste:[!0,O.BOOLEAN],allowMultiple:[!1,O.BOOLEAN],allowReplace:[!0,O.BOOLEAN],allowRevert:[!0,O.BOOLEAN],allowRemove:[!0,O.BOOLEAN],allowProcess:[!0,O.BOOLEAN],allowReorder:[!1,O.BOOLEAN],allowDirectoriesOnly:[!1,O.BOOLEAN],storeAsFile:[!1,O.BOOLEAN],forceRevert:[!1,O.BOOLEAN],maxFiles:[null,O.INT],checkValidity:[!1,O.BOOLEAN],itemInsertLocationFreedom:[!0,O.BOOLEAN],itemInsertLocation:["before",O.STRING],itemInsertInterval:[75,O.INT],dropOnPage:[!1,O.BOOLEAN],dropOnElement:[!0,O.BOOLEAN],dropValidation:[!1,O.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],O.ARRAY],instantUpload:[!0,O.BOOLEAN],maxParallelUploads:[2,O.INT],allowMinimumUploadDuration:[!0,O.BOOLEAN],chunkUploads:[!1,O.BOOLEAN],chunkForce:[!1,O.BOOLEAN],chunkSize:[5e6,O.INT],chunkRetryDelays:[[500,1e3,3e3],O.ARRAY],server:[null,O.SERVER_API],fileSizeBase:[1e3,O.INT],labelFileSizeBytes:["bytes",O.STRING],labelFileSizeKilobytes:["KB",O.STRING],labelFileSizeMegabytes:["MB",O.STRING],labelFileSizeGigabytes:["GB",O.STRING],labelDecimalSeparator:[Wi(),O.STRING],labelThousandsSeparator:[Jo(),O.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',O.STRING],labelInvalidField:["Field contains invalid files",O.STRING],labelFileWaitingForSize:["Waiting for size",O.STRING],labelFileSizeNotAvailable:["Size not available",O.STRING],labelFileCountSingular:["file in list",O.STRING],labelFileCountPlural:["files in list",O.STRING],labelFileLoading:["Loading",O.STRING],labelFileAdded:["Added",O.STRING],labelFileLoadError:["Error during load",O.STRING],labelFileRemoved:["Removed",O.STRING],labelFileRemoveError:["Error during remove",O.STRING],labelFileProcessing:["Uploading",O.STRING],labelFileProcessingComplete:["Upload complete",O.STRING],labelFileProcessingAborted:["Upload cancelled",O.STRING],labelFileProcessingError:["Error during upload",O.STRING],labelFileProcessingRevertError:["Error during revert",O.STRING],labelTapToCancel:["tap to cancel",O.STRING],labelTapToRetry:["tap to retry",O.STRING],labelTapToUndo:["tap to undo",O.STRING],labelButtonRemoveItem:["Remove",O.STRING],labelButtonAbortItemLoad:["Abort",O.STRING],labelButtonRetryItemLoad:["Retry",O.STRING],labelButtonAbortItemProcessing:["Cancel",O.STRING],labelButtonUndoItemProcessing:["Undo",O.STRING],labelButtonRetryItemProcessing:["Retry",O.STRING],labelButtonProcessItem:["Upload",O.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',O.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',O.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',O.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',O.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',O.STRING],oninit:[null,O.FUNCTION],onwarning:[null,O.FUNCTION],onerror:[null,O.FUNCTION],onactivatefile:[null,O.FUNCTION],oninitfile:[null,O.FUNCTION],onaddfilestart:[null,O.FUNCTION],onaddfileprogress:[null,O.FUNCTION],onaddfile:[null,O.FUNCTION],onprocessfilestart:[null,O.FUNCTION],onprocessfileprogress:[null,O.FUNCTION],onprocessfileabort:[null,O.FUNCTION],onprocessfilerevert:[null,O.FUNCTION],onprocessfile:[null,O.FUNCTION],onprocessfiles:[null,O.FUNCTION],onremovefile:[null,O.FUNCTION],onpreparefile:[null,O.FUNCTION],onupdatefiles:[null,O.FUNCTION],onreorderfiles:[null,O.FUNCTION],beforeDropFile:[null,O.FUNCTION],beforeAddFile:[null,O.FUNCTION],beforeRemoveFile:[null,O.FUNCTION],beforePrepareFile:[null,O.FUNCTION],stylePanelLayout:[null,O.STRING],stylePanelAspectRatio:[null,O.STRING],styleItemPanelAspectRatio:[null,O.STRING],styleButtonRemoveItemPosition:["left",O.STRING],styleButtonProcessItemPosition:["right",O.STRING],styleLoadIndicatorPosition:["right",O.STRING],styleProgressIndicatorPosition:["right",O.STRING],styleButtonRemoveItemAlign:[!1,O.BOOLEAN],files:[[],O.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],O.ARRAY]},mt=(e,t)=>Qe(t)?e[0]||null:xt(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),$i=e=>{if(Qe(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},He=e=>e.filter(t=>!t.archived),Xi={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let hn=null;const ra=()=>{if(hn===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,hn=t.files.length===1}catch{hn=!1}return hn},ia=[K.LOAD_ERROR,K.PROCESSING_ERROR,K.PROCESSING_REVERT_ERROR],sa=[K.LOADING,K.PROCESSING,K.PROCESSING_QUEUED,K.INIT],oa=[K.PROCESSING_COMPLETE],aa=e=>ia.includes(e.status),la=e=>sa.includes(e.status),ca=e=>oa.includes(e.status),ti=e=>Ie(e.options.server)&&(Ie(e.options.server.process)||Et(e.options.server.process)),da=e=>({GET_STATUS:()=>{const t=He(e.items),{EMPTY:n,ERROR:r,BUSY:i,IDLE:a,READY:o}=Xi;return t.length===0?n:t.some(aa)?r:t.some(la)?i:t.some(ca)?o:a},GET_ITEM:t=>mt(e.items,t),GET_ACTIVE_ITEM:t=>mt(He(e.items),t),GET_ACTIVE_ITEMS:()=>He(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=mt(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=mt(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:$i(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>He(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>He(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&ra()&&!ti(e),IS_ASYNC:()=>ti(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),ua=e=>{const t=He(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},zi=(e,t,n)=>Math.max(Math.min(n,e),t),fa=(e,t,n)=>e.splice(t,0,n),pa=(e,t,n)=>Qe(t)?null:typeof n>"u"?(e.push(t),t):(n=zi(n,0,e.length),fa(e,n,t),t),or=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),Jt=e=>e.split("/").pop().split("?").shift(),xn=e=>e.split(".").pop(),ga=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},$t=(e,t="")=>(t+e).slice(-t.length),ji=(e=new Date)=>`${e.getFullYear()}-${$t(e.getMonth()+1,"00")}-${$t(e.getDate(),"00")}_${$t(e.getHours(),"00")}-${$t(e.getMinutes(),"00")}-${$t(e.getSeconds(),"00")}`,Nt=(e,t,n=null,r=null)=>{const i=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return i.lastModifiedDate=new Date,e._relativePath&&(i._relativePath=e._relativePath),Se(t)||(t=ji()),t&&r===null&&xn(t)?i.name=t:(r=r||ga(i.type),i.name=t+(r?"."+r:"")),i},ha=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Qi=(e,t)=>{const n=ha();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},Ea=(e,t)=>{const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return Qi(n,t)},Ki=e=>(/^data:(.+);/.exec(e)||[])[1]||null,ma=e=>e.split(",")[1].replace(/\s/g,""),Ia=e=>atob(ma(e)),_a=e=>{const t=Ki(e),n=Ia(e);return Ea(n,t)},Ta=(e,t,n)=>Nt(_a(e),t,null,n),Ra=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},ya=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},va=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,yr=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let r of n){const i=Ra(r);if(i){t.name=i;continue}const a=ya(r);if(a){t.size=a;continue}const o=va(r);if(o){t.source=o;continue}}return t},ba=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,r=()=>{t.request&&t.request.abort&&t.request.abort()},i=()=>{const u=t.source;o.fire("init",u),u instanceof File?o.fire("load",u):u instanceof Blob?o.fire("load",Nt(u,u.name)):or(u)?o.fire("load",Ta(u)):a(u)},a=u=>{if(!e){o.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(u,d=>{t.duration=Date.now()-t.timestamp,t.complete=!0,d instanceof Blob&&(d=Nt(d,d.name||Jt(u))),o.fire("load",d instanceof Blob?d:d?d.body:null)},d=>{o.fire("error",typeof d=="string"?{type:"error",code:0,body:d}:d)},(d,p,g)=>{if(g&&(t.size=g),t.duration=Date.now()-t.timestamp,!d){t.progress=null;return}t.progress=p/g,o.fire("progress",t.progress)},()=>{o.fire("abort")},d=>{const p=yr(typeof d=="string"?d:d.headers);o.fire("meta",{size:t.size||p.size,filename:p.name,source:p.source})})},o={...Gn(),setSource:u=>t.source=u,getProgress:n,abort:r,load:i};return o},ni=e=>/GET|HEAD/.test(e),It=(e,t,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{i=!0,o.abort()}};let i=!1,a=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),ni(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const o=new XMLHttpRequest,u=ni(n.method)?o:o.upload;return u.onprogress=d=>{i||r.onprogress(d.lengthComputable,d.loaded,d.total)},o.onreadystatechange=()=>{o.readyState<2||o.readyState===4&&o.status===0||a||(a=!0,r.onheaders(o))},o.onload=()=>{o.status>=200&&o.status<300?r.onload(o):r.onerror(o)},o.onerror=()=>r.onerror(o),o.onabort=()=>{i=!0,r.onabort()},o.ontimeout=()=>r.ontimeout(o),o.open(n.method,t,!0),xt(n.timeout)&&(o.timeout=n.timeout),Object.keys(n.headers).forEach(d=>{const p=unescape(encodeURIComponent(n.headers[d]));o.setRequestHeader(d,p)}),n.responseType&&(o.responseType=n.responseType),n.withCredentials&&(o.withCredentials=!0),o.send(e),r},de=(e,t,n,r)=>({type:e,code:t,body:n,headers:r}),_t=e=>t=>{e(de("error",0,"Timeout",t.getAllResponseHeaders()))},ri=e=>/\?/.test(e),jt=(...e)=>{let t="";return e.forEach(n=>{t+=ri(t)&&ri(n)?n.replace(/\?/,"&"):n}),t},Zn=(e="",t)=>{if(typeof t=="function")return t;if(!t||!Se(t.url))return null;const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,a,o,u,d,p)=>{const g=It(i,jt(e,t.url),{...t,responseType:"blob"});return g.onload=h=>{const _=h.getAllResponseHeaders(),b=yr(_).name||Jt(i);a(de("load",h.status,t.method==="HEAD"?null:Nt(n(h.response),b),_))},g.onerror=h=>{o(de("error",h.status,r(h.response)||h.statusText,h.getAllResponseHeaders()))},g.onheaders=h=>{p(de("headers",h.status,null,h.getAllResponseHeaders()))},g.ontimeout=_t(o),g.onprogress=u,g.onabort=d,g}},Ne={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},Sa=(e,t,n,r,i,a,o,u,d,p,g)=>{const h=[],{chunkTransferId:_,chunkServer:b,chunkSize:I,chunkRetryDelays:S}=g,T={serverId:_,aborted:!1},v=t.ondata||(N=>N),m=t.onload||((N,X)=>X==="HEAD"?N.getResponseHeader("Upload-Offset"):N.response),y=t.onerror||(N=>null),A=N=>{const X=new FormData;Ie(i)&&X.append(n,JSON.stringify(i));const w=typeof t.headers=="function"?t.headers(r,i):{...t.headers,"Upload-Length":r.size},G={...t,headers:w},H=It(v(X),jt(e,t.url),G);H.onload=W=>N(m(W,G.method)),H.onerror=W=>o(de("error",W.status,y(W.response)||W.statusText,W.getAllResponseHeaders())),H.ontimeout=_t(o)},C=N=>{const X=jt(e,b.url,T.serverId),G={headers:typeof t.headers=="function"?t.headers(T.serverId):{...t.headers},method:"HEAD"},H=It(null,X,G);H.onload=W=>N(m(W,G.method)),H.onerror=W=>o(de("error",W.status,y(W.response)||W.statusText,W.getAllResponseHeaders())),H.ontimeout=_t(o)},F=Math.floor(r.size/I);for(let N=0;N<=F;N++){const X=N*I,w=r.slice(X,X+I,"application/offset+octet-stream");h[N]={index:N,size:w.size,offset:X,data:w,file:r,progress:0,retries:[...S],status:Ne.QUEUED,error:null,request:null,timeout:null}}const P=()=>a(T.serverId),L=N=>N.status===Ne.QUEUED||N.status===Ne.ERROR,V=N=>{if(T.aborted)return;if(N=N||h.find(L),!N){h.every(ee=>ee.status===Ne.COMPLETE)&&P();return}N.status=Ne.PROCESSING,N.progress=null;const X=b.ondata||(ee=>ee),w=b.onerror||(ee=>null),G=jt(e,b.url,T.serverId),H=typeof b.headers=="function"?b.headers(N):{...b.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":N.offset,"Upload-Length":r.size,"Upload-Name":r.name},W=N.request=It(X(N.data),G,{...b,headers:H});W.onload=()=>{N.status=Ne.COMPLETE,N.request=null,q()},W.onprogress=(ee,ne,$e)=>{N.progress=ee?ne:null,x()},W.onerror=ee=>{N.status=Ne.ERROR,N.request=null,N.error=w(ee.response)||ee.statusText,k(N)||o(de("error",ee.status,w(ee.response)||ee.statusText,ee.getAllResponseHeaders()))},W.ontimeout=ee=>{N.status=Ne.ERROR,N.request=null,k(N)||_t(o)(ee)},W.onabort=()=>{N.status=Ne.QUEUED,N.request=null,d()}},k=N=>N.retries.length===0?!1:(N.status=Ne.WAITING,clearTimeout(N.timeout),N.timeout=setTimeout(()=>{V(N)},N.retries.shift()),!0),x=()=>{const N=h.reduce((w,G)=>w===null||G.progress===null?null:w+G.progress,0);if(N===null)return u(!1,0,0);const X=h.reduce((w,G)=>w+G.size,0);u(!0,N,X)},q=()=>{h.filter(X=>X.status===Ne.PROCESSING).length>=1||V()},te=()=>{h.forEach(N=>{clearTimeout(N.timeout),N.request&&N.request.abort()})};return T.serverId?C(N=>{T.aborted||(h.filter(X=>X.offset<N).forEach(X=>{X.status=Ne.COMPLETE,X.progress=X.size}),q())}):A(N=>{T.aborted||(p(N),T.serverId=N,q())}),{abort:()=>{T.aborted=!0,te()}}},Da=(e,t,n,r)=>(i,a,o,u,d,p,g)=>{if(!i)return;const h=r.chunkUploads,_=h&&i.size>r.chunkSize,b=h&&(_||r.chunkForce);if(i instanceof Blob&&b)return Sa(e,t,n,i,a,o,u,d,p,g,r);const I=t.ondata||(C=>C),S=t.onload||(C=>C),T=t.onerror||(C=>null),v=typeof t.headers=="function"?t.headers(i,a)||{}:{...t.headers},m={...t,headers:v};var y=new FormData;Ie(a)&&y.append(n,JSON.stringify(a)),(i instanceof Blob?[{name:null,file:i}]:i).forEach(C=>{y.append(n,C.file,C.name===null?C.file.name:`${C.name}${C.file.name}`)});const A=It(I(y),jt(e,t.url),m);return A.onload=C=>{o(de("load",C.status,S(C.response),C.getAllResponseHeaders()))},A.onerror=C=>{u(de("error",C.status,T(C.response)||C.statusText,C.getAllResponseHeaders()))},A.ontimeout=_t(u),A.onprogress=d,A.onabort=p,A},Aa=(e="",t,n,r)=>typeof t=="function"?(...i)=>t(n,...i,r):!t||!Se(t.url)?null:Da(e,t,n,r),Xt=(e="",t)=>{if(typeof t=="function")return t;if(!t||!Se(t.url))return(i,a)=>a();const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,a,o)=>{const u=It(i,e+t.url,t);return u.onload=d=>{a(de("load",d.status,n(d.response),d.getAllResponseHeaders()))},u.onerror=d=>{o(de("error",d.status,r(d.response)||d.statusText,d.getAllResponseHeaders()))},u.ontimeout=_t(o),u}},Zi=(e=0,t=1)=>e+Math.random()*(t-e),Oa=(e,t=1e3,n=0,r=25,i=250)=>{let a=null;const o=Date.now(),u=()=>{let d=Date.now()-o,p=Zi(r,i);d+p>t&&(p=d+p-t);let g=d/t;if(g>=1||document.hidden){e(1);return}e(g),a=setTimeout(u,p)};return t>0&&u(),{clear:()=>{clearTimeout(a)}}},wa=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=t,i=(g,h)=>{const _=()=>{n.duration===0||n.progress===null||p.fire("progress",p.getProgress())},b=()=>{n.complete=!0,p.fire("load-perceived",n.response.body)};p.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=Oa(I=>{n.perceivedProgress=I,n.perceivedDuration=Date.now()-n.timestamp,_(),n.response&&n.perceivedProgress===1&&!n.complete&&b()},r?Zi(750,1500):0),n.request=e(g,h,I=>{n.response=Ie(I)?I:{type:"load",code:200,body:`${I}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,p.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&b()},I=>{n.perceivedPerformanceUpdater.clear(),p.fire("error",Ie(I)?I:{type:"error",code:0,body:`${I}`})},(I,S,T)=>{n.duration=Date.now()-n.timestamp,n.progress=I?S/T:null,_()},()=>{n.perceivedPerformanceUpdater.clear(),p.fire("abort",n.response?n.response.body:null)},I=>{p.fire("transfer",I)})},a=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},o=()=>{a(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},u=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,d=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,p={...Gn(),process:i,abort:a,getProgress:u,getDuration:d,reset:o};return p},Ji=e=>e.substring(0,e.lastIndexOf("."))||e,Pa=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||or(e)?t[0]=e.name||ji():or(e)?(t[1]=e.length,t[2]=Ki(e)):Se(e)&&(t[0]=Jt(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},Gt=e=>!!(e instanceof File||e instanceof Blob&&e.name),es=e=>{if(!Ie(e))return e;const t=Cn(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];t[n]=r&&Ie(r)?es(r):r}return t},Ma=(e=null,t=null,n=null)=>{const r=_r(),i={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?K.PROCESSING_COMPLETE:K.INIT,activeLoader:null,activeProcessor:null};let a=null;const o={},u=L=>i.status=L,d=(L,...V)=>{i.released||i.frozen||F.fire(L,...V)},p=()=>xn(i.file.name),g=()=>i.file.type,h=()=>i.file.size,_=()=>i.file,b=(L,V,k)=>{if(i.source=L,F.fireSync("init"),i.file){F.fireSync("load-skip");return}i.file=Pa(L),V.on("init",()=>{d("load-init")}),V.on("meta",x=>{i.file.size=x.size,i.file.filename=x.filename,x.source&&(e=Ee.LIMBO,i.serverFileReference=x.source,i.status=K.PROCESSING_COMPLETE),d("load-meta")}),V.on("progress",x=>{u(K.LOADING),d("load-progress",x)}),V.on("error",x=>{u(K.LOAD_ERROR),d("load-request-error",x)}),V.on("abort",()=>{u(K.INIT),d("load-abort")}),V.on("load",x=>{i.activeLoader=null;const q=N=>{i.file=Gt(N)?N:i.file,e===Ee.LIMBO&&i.serverFileReference?u(K.PROCESSING_COMPLETE):u(K.IDLE),d("load")},te=N=>{i.file=x,d("load-meta"),u(K.LOAD_ERROR),d("load-file-error",N)};if(i.serverFileReference){q(x);return}k(x,q,te)}),V.setSource(L),i.activeLoader=V,V.load()},I=()=>{i.activeLoader&&i.activeLoader.load()},S=()=>{if(i.activeLoader){i.activeLoader.abort();return}u(K.INIT),d("load-abort")},T=(L,V)=>{if(i.processingAborted){i.processingAborted=!1;return}if(u(K.PROCESSING),a=null,!(i.file instanceof Blob)){F.on("load",()=>{T(L,V)});return}L.on("load",q=>{i.transferId=null,i.serverFileReference=q}),L.on("transfer",q=>{i.transferId=q}),L.on("load-perceived",q=>{i.activeProcessor=null,i.transferId=null,i.serverFileReference=q,u(K.PROCESSING_COMPLETE),d("process-complete",q)}),L.on("start",()=>{d("process-start")}),L.on("error",q=>{i.activeProcessor=null,u(K.PROCESSING_ERROR),d("process-error",q)}),L.on("abort",q=>{i.activeProcessor=null,i.serverFileReference=q,u(K.IDLE),d("process-abort"),a&&a()}),L.on("progress",q=>{d("process-progress",q)});const k=q=>{i.archived||L.process(q,{...o})},x=console.error;V(i.file,k,x),i.activeProcessor=L},v=()=>{i.processingAborted=!1,u(K.PROCESSING_QUEUED)},m=()=>new Promise(L=>{if(!i.activeProcessor){i.processingAborted=!0,u(K.IDLE),d("process-abort"),L();return}a=()=>{L()},i.activeProcessor.abort()}),y=(L,V)=>new Promise((k,x)=>{const q=i.serverFileReference!==null?i.serverFileReference:i.transferId;if(q===null){k();return}L(q,()=>{i.serverFileReference=null,i.transferId=null,k()},te=>{if(!V){k();return}u(K.PROCESSING_REVERT_ERROR),d("process-revert-error"),x(te)}),u(K.IDLE),d("process-revert")}),A=(L,V,k)=>{const x=L.split("."),q=x[0],te=x.pop();let N=o;x.forEach(X=>N=N[X]),JSON.stringify(N[te])!==JSON.stringify(V)&&(N[te]=V,d("metadata-update",{key:q,value:o[q],silent:k}))},F={id:{get:()=>r},origin:{get:()=>e,set:L=>e=L},serverId:{get:()=>i.serverFileReference},transferId:{get:()=>i.transferId},status:{get:()=>i.status},filename:{get:()=>i.file.name},filenameWithoutExtension:{get:()=>Ji(i.file.name)},fileExtension:{get:p},fileType:{get:g},fileSize:{get:h},file:{get:_},relativePath:{get:()=>i.file._relativePath},source:{get:()=>i.source},getMetadata:L=>es(L?o[L]:o),setMetadata:(L,V,k)=>{if(Ie(L)){const x=L;return Object.keys(x).forEach(q=>{A(q,x[q],V)}),L}return A(L,V,k),V},extend:(L,V)=>P[L]=V,abortLoad:S,retryLoad:I,requestProcessing:v,abortProcessing:m,load:b,process:T,revert:y,...Gn(),freeze:()=>i.frozen=!0,release:()=>i.released=!0,released:{get:()=>i.released},archive:()=>i.archived=!0,archived:{get:()=>i.archived}},P=st(F);return P},Ca=(e,t)=>Qe(t)?0:Se(t)?e.findIndex(n=>n.id===t):-1,ii=(e,t)=>{const n=Ca(e,t);if(!(n<0))return e[n]||null},si=(e,t,n,r,i,a)=>{const o=It(null,e,{method:"GET",responseType:"blob"});return o.onload=u=>{const d=u.getAllResponseHeaders(),p=yr(d).name||Jt(e);t(de("load",u.status,Nt(u.response,p),d))},o.onerror=u=>{n(de("error",u.status,u.statusText,u.getAllResponseHeaders()))},o.onheaders=u=>{a(de("headers",u.status,null,u.getAllResponseHeaders()))},o.ontimeout=_t(n),o.onprogress=r,o.onabort=i,o},oi=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),La=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&oi(location.href)!==oi(e),En=e=>(...t)=>Et(e)?e(...t):e,Na=e=>!Gt(e.file),Jn=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:He(t.items)})},0)},ai=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const r=e(...t);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),er=(e,t)=>{e.items.sort((n,r)=>t(we(n),we(r)))},Ge=(e,t)=>({query:n,success:r=()=>{},failure:i=()=>{},...a}={})=>{const o=mt(e.items,n);if(!o){i({error:de("error",0,"Item not found"),file:null});return}t(o,r,i,a||{})},Ga=(e,t,n)=>({ABORT_ALL:()=>{He(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const i=r.map(o=>({source:o.source?o.source:o,options:o.options}));let a=He(n.items);a.forEach(o=>{i.find(u=>u.source===o.source||u.source===o.file)||e("REMOVE_ITEM",{query:o,remove:!1})}),a=He(n.items),i.forEach((o,u)=>{a.find(d=>d.source===o.source||d.file===o.source)||e("ADD_ITEM",{...o,interactionMethod:Fe.NONE,index:u})})},DID_UPDATE_ITEM_METADATA:({id:r,action:i,change:a})=>{a.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const o=ii(n.items,r);if(!t("IS_ASYNC")){Ve("SHOULD_PREPARE_OUTPUT",!1,{item:o,query:t,action:i,change:a}).then(g=>{const h=t("GET_BEFORE_PREPARE_FILE");h&&(g=h(o,g)),g&&e("REQUEST_PREPARE_OUTPUT",{query:r,item:o,success:_=>{e("DID_PREPARE_OUTPUT",{id:r,file:_})}},!0)});return}o.origin===Ee.LOCAL&&e("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.source});const u=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:r})},32)},d=g=>{o.revert(Xt(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(g?u:()=>{}).catch(()=>{})},p=g=>{o.abortProcessing().then(g?u:()=>{})};if(o.status===K.PROCESSING_COMPLETE)return d(n.options.instantUpload);if(o.status===K.PROCESSING)return p(n.options.instantUpload);n.options.instantUpload&&u()},0))},MOVE_ITEM:({query:r,index:i})=>{const a=mt(n.items,r);if(!a)return;const o=n.items.indexOf(a);i=zi(i,0,n.items.length-1),o!==i&&n.items.splice(i,0,n.items.splice(o,1)[0])},SORT:({compare:r})=>{er(n,r),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:i,interactionMethod:a,success:o=()=>{},failure:u=()=>{}})=>{let d=i;if(i===-1||typeof i>"u"){const b=t("GET_ITEM_INSERT_LOCATION"),I=t("GET_TOTAL_ITEMS");d=b==="before"?0:I}const p=t("GET_IGNORED_FILES"),g=b=>Gt(b)?!p.includes(b.name.toLowerCase()):!Qe(b),_=r.filter(g).map(b=>new Promise((I,S)=>{e("ADD_ITEM",{interactionMethod:a,source:b.source||b,success:I,failure:S,index:d++,options:b.options||{}})}));Promise.all(_).then(o).catch(u)},ADD_ITEM:({source:r,index:i=-1,interactionMethod:a,success:o=()=>{},failure:u=()=>{},options:d={}})=>{if(Qe(r)){u({error:de("error",0,"No source"),file:null});return}if(Gt(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!ua(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const m=de("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:r,error:m}),u({error:m,file:null});return}const v=He(n.items)[0];if(v.status===K.PROCESSING_COMPLETE||v.status===K.PROCESSING_REVERT_ERROR){const m=t("GET_FORCE_REVERT");if(v.revert(Xt(n.options.server.url,n.options.server.revert),m).then(()=>{m&&e("ADD_ITEM",{source:r,index:i,interactionMethod:a,success:o,failure:u,options:d})}).catch(()=>{}),m)return}e("REMOVE_ITEM",{query:v.id})}const p=d.type==="local"?Ee.LOCAL:d.type==="limbo"?Ee.LIMBO:Ee.INPUT,g=Ma(p,p===Ee.INPUT?null:r,d.file);Object.keys(d.metadata||{}).forEach(v=>{g.setMetadata(v,d.metadata[v])}),Rt("DID_CREATE_ITEM",g,{query:t,dispatch:e});const h=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(i=h==="before"?-1:n.items.length),pa(n.items,g,i),Et(h)&&r&&er(n,h);const _=g.id;g.on("init",()=>{e("DID_INIT_ITEM",{id:_})}),g.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:_})}),g.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:_})}),g.on("load-progress",v=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:_,progress:v})}),g.on("load-request-error",v=>{const m=En(n.options.labelFileLoadError)(v);if(v.code>=400&&v.code<500){e("DID_THROW_ITEM_INVALID",{id:_,error:v,status:{main:m,sub:`${v.code} (${v.body})`}}),u({error:v,file:we(g)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:_,error:v,status:{main:m,sub:n.options.labelTapToRetry}})}),g.on("load-file-error",v=>{e("DID_THROW_ITEM_INVALID",{id:_,error:v.status,status:v.status}),u({error:v.status,file:we(g)})}),g.on("load-abort",()=>{e("REMOVE_ITEM",{query:_})}),g.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:_,item:g,data:{source:r,success:o}})}),g.on("load",()=>{const v=m=>{if(!m){e("REMOVE_ITEM",{query:_});return}g.on("metadata-update",y=>{e("DID_UPDATE_ITEM_METADATA",{id:_,change:y})}),Ve("SHOULD_PREPARE_OUTPUT",!1,{item:g,query:t}).then(y=>{const A=t("GET_BEFORE_PREPARE_FILE");A&&(y=A(g,y));const C=()=>{e("COMPLETE_LOAD_ITEM",{query:_,item:g,data:{source:r,success:o}}),Jn(e,n)};if(y){e("REQUEST_PREPARE_OUTPUT",{query:_,item:g,success:F=>{e("DID_PREPARE_OUTPUT",{id:_,file:F}),C()}},!0);return}C()})};Ve("DID_LOAD_ITEM",g,{query:t,dispatch:e}).then(()=>{ai(t("GET_BEFORE_ADD_FILE"),we(g)).then(v)}).catch(m=>{if(!m||!m.error||!m.status)return v(!1);e("DID_THROW_ITEM_INVALID",{id:_,error:m.error,status:m.status})})}),g.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:_})}),g.on("process-progress",v=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:_,progress:v})}),g.on("process-error",v=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:_,error:v,status:{main:En(n.options.labelFileProcessingError)(v),sub:n.options.labelTapToRetry}})}),g.on("process-revert-error",v=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:_,error:v,status:{main:En(n.options.labelFileProcessingRevertError)(v),sub:n.options.labelTapToRetry}})}),g.on("process-complete",v=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:_,error:null,serverFileReference:v}),e("DID_DEFINE_VALUE",{id:_,value:v})}),g.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:_})}),g.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:_}),e("DID_DEFINE_VALUE",{id:_,value:null})}),e("DID_ADD_ITEM",{id:_,index:i,interactionMethod:a}),Jn(e,n);const{url:b,load:I,restore:S,fetch:T}=n.options.server||{};g.load(r,ba(p===Ee.INPUT?Se(r)&&La(r)&&T?Zn(b,T):si:p===Ee.LIMBO?Zn(b,S):Zn(b,I)),(v,m,y)=>{Ve("LOAD_FILE",v,{query:t}).then(m).catch(y)})},REQUEST_PREPARE_OUTPUT:({item:r,success:i,failure:a=()=>{}})=>{const o={error:de("error",0,"Item not found"),file:null};if(r.archived)return a(o);Ve("PREPARE_OUTPUT",r.file,{query:t,item:r}).then(u=>{Ve("COMPLETE_PREPARE_OUTPUT",u,{query:t,item:r}).then(d=>{if(r.archived)return a(o);i(d)})})},COMPLETE_LOAD_ITEM:({item:r,data:i})=>{const{success:a,source:o}=i,u=t("GET_ITEM_INSERT_LOCATION");if(Et(u)&&o&&er(n,u),e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===Ee.INPUT?null:o}),a(we(r)),r.origin===Ee.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===Ee.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:o}),e("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||o});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:Ge(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:Ge(n,(r,i,a)=>{e("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:o=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:o}),i({file:r,output:o})},failure:a},!0)}),REQUEST_ITEM_PROCESSING:Ge(n,(r,i,a)=>{if(!(r.status===K.IDLE||r.status===K.PROCESSING_ERROR)){const u=()=>e("REQUEST_ITEM_PROCESSING",{query:r,success:i,failure:a}),d=()=>document.hidden?u():setTimeout(u,32);r.status===K.PROCESSING_COMPLETE||r.status===K.PROCESSING_REVERT_ERROR?r.revert(Xt(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(d).catch(()=>{}):r.status===K.PROCESSING&&r.abortProcessing().then(d);return}r.status!==K.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:i,failure:a},!0))}),PROCESS_ITEM:Ge(n,(r,i,a)=>{const o=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",K.PROCESSING).length===o){n.processingQueue.push({id:r.id,success:i,failure:a});return}if(r.status===K.PROCESSING)return;const d=()=>{const g=n.processingQueue.shift();if(!g)return;const{id:h,success:_,failure:b}=g,I=mt(n.items,h);if(!I||I.archived){d();return}e("PROCESS_ITEM",{query:h,success:_,failure:b},!0)};r.onOnce("process-complete",()=>{i(we(r)),d();const g=n.options.server;if(n.options.instantUpload&&r.origin===Ee.LOCAL&&Et(g.remove)){const b=()=>{};r.origin=Ee.LIMBO,n.options.server.remove(r.source,b,b)}t("GET_ITEMS_BY_STATUS",K.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",g=>{a({error:g,file:we(r)}),d()});const p=n.options;r.process(wa(Aa(p.server.url,p.server.process,p.name,{chunkTransferId:r.transferId,chunkServer:p.server.patch,chunkUploads:p.chunkUploads,chunkForce:p.chunkForce,chunkSize:p.chunkSize,chunkRetryDelays:p.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(g,h,_)=>{Ve("PREPARE_OUTPUT",g,{query:t,item:r}).then(b=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:b}),h(b)}).catch(_)})}),RETRY_ITEM_PROCESSING:Ge(n,r=>{e("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:Ge(n,r=>{ai(t("GET_BEFORE_REMOVE_FILE"),we(r)).then(i=>{i&&e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:Ge(n,r=>{r.release()}),REMOVE_ITEM:Ge(n,(r,i,a,o)=>{const u=()=>{const p=r.id;ii(n.items,p).archive(),e("DID_REMOVE_ITEM",{error:null,id:p,item:r}),Jn(e,n),i(we(r))},d=n.options.server;r.origin===Ee.LOCAL&&d&&Et(d.remove)&&o.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:r.id}),d.remove(r.source,()=>u(),p=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:de("error",0,p,null),status:{main:En(n.options.labelFileRemoveError)(p),sub:n.options.labelTapToRetry}})})):((o.revert&&r.origin!==Ee.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(Xt(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),u())}),ABORT_ITEM_LOAD:Ge(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:Ge(n,r=>{if(r.serverId){e("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:Ge(n,r=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:r});return}const i=u=>{u&&e("REVERT_ITEM_PROCESSING",{query:r})},a=t("GET_BEFORE_REMOVE_FILE");if(!a)return i(!0);const o=a(we(r));if(o==null)return i(!0);if(typeof o=="boolean")return i(o);typeof o.then=="function"&&o.then(i)}),REVERT_ITEM_PROCESSING:Ge(n,r=>{r.revert(Xt(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||Na(r))&&e("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const i=Object.keys(r),a=xa.filter(u=>i.includes(u));[...a,...Object.keys(r).filter(u=>!a.includes(u))].forEach(u=>{e(`SET_${Nn(u,"_").toUpperCase()}`,{value:r[u]})})}}),xa=["server"],vr=e=>e,Ke=e=>document.createElement(e),ue=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},li=(e,t,n,r)=>{const i=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}},Fa=(e,t,n,r,i,a)=>{const o=li(e,t,n,i),u=li(e,t,n,r);return["M",o.x,o.y,"A",n,n,0,a,0,u.x,u.y].join(" ")},Ba=(e,t,n,r,i)=>{let a=1;return i>r&&i-r<=.5&&(a=0),r>i&&r-i>=.5&&(a=0),Fa(e,t,n,Math.min(.9999,r)*360,Math.min(.9999,i)*360,a)},Ua=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=An("svg");e.ref.path=An("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},Va=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(pe(e.ref.path,"stroke-width"),10),r=e.rect.element.width*.5;let i=0,a=0;t.spin?(i=0,a=.5):(i=0,a=t.progress);const o=Ba(r,r,r-n,i,a);pe(e.ref.path,"d",o),pe(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},ci=ge({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:Ua,write:Va,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Ha=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},qa=({root:e,props:t})=>{const{isDisabled:n}=t,r=e.query("GET_DISABLED")||t.opacity===0;r&&!n?(t.isDisabled=!0,pe(e.element,"disabled","disabled")):!r&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},ts=ge({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:Ha,write:qa}),ns=(e,t=".",n=1e3,r={})=>{const{labelBytes:i="bytes",labelKilobytes:a="KB",labelMegabytes:o="MB",labelGigabytes:u="GB"}=r;e=Math.round(Math.abs(e));const d=n,p=n*n,g=n*n*n;return e<d?`${e} ${i}`:e<p?`${Math.floor(e/d)} ${a}`:e<g?`${di(e/p,1,t)} ${o}`:`${di(e/g,2,t)} ${u}`},di=(e,t,n)=>e.toFixed(t).split(".").filter(r=>r!=="0").join(n),Ya=({root:e,props:t})=>{const n=Ke("span");n.className="filepond--file-info-main",pe(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const r=Ke("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,ue(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),ue(n,vr(e.query("GET_ITEM_NAME",t.id)))},ar=({root:e,props:t})=>{ue(e.ref.fileSize,ns(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),ue(e.ref.fileName,vr(e.query("GET_ITEM_NAME",t.id)))},ui=({root:e,props:t})=>{if(xt(e.query("GET_ITEM_SIZE",t.id))){ar({root:e,props:t});return}ue(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},ka=ge({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:De({DID_LOAD_ITEM:ar,DID_UPDATE_ITEM_META:ar,DID_THROW_ITEM_LOAD_ERROR:ui,DID_THROW_ITEM_INVALID:ui}),didCreateView:e=>{Rt("CREATE_VIEW",{...e,view:e})},create:Ya,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),rs=e=>Math.round(e*100),Wa=({root:e})=>{const t=Ke("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=Ke("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,is({root:e,action:{progress:null}})},is=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${rs(t.progress)}%`;ue(e.ref.main,n),ue(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},$a=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${rs(t.progress)}%`;ue(e.ref.main,n),ue(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Xa=({root:e})=>{ue(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),ue(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},za=({root:e})=>{ue(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),ue(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},ja=({root:e})=>{ue(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),ue(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},fi=({root:e})=>{ue(e.ref.main,""),ue(e.ref.sub,"")},zt=({root:e,action:t})=>{ue(e.ref.main,t.status.main),ue(e.ref.sub,t.status.sub)},Qa=ge({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:De({DID_LOAD_ITEM:fi,DID_REVERT_ITEM_PROCESSING:fi,DID_REQUEST_ITEM_PROCESSING:Xa,DID_ABORT_ITEM_PROCESSING:za,DID_COMPLETE_ITEM_PROCESSING:ja,DID_UPDATE_ITEM_PROCESS_PROGRESS:$a,DID_UPDATE_ITEM_LOAD_PROGRESS:is,DID_THROW_ITEM_LOAD_ERROR:zt,DID_THROW_ITEM_INVALID:zt,DID_THROW_ITEM_PROCESSING_ERROR:zt,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:zt,DID_THROW_ITEM_REMOVE_ERROR:zt}),didCreateView:e=>{Rt("CREATE_VIEW",{...e,view:e})},create:Wa,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),lr={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},cr=[];le(lr,e=>{cr.push(e)});const Le=e=>{if(dr(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Ka=e=>e.ref.buttonAbortItemLoad.rect.element.width,mn=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Za=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),Ja=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),el=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),dr=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),tl={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:Ja},processProgressIndicator:{opacity:0,align:el},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},pi={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Le},status:{translateX:Le}},tr={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Mt={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Le},status:{translateX:Le,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Le},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:dr},info:{translateX:Le},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:dr},buttonRemoveItem:{opacity:1},info:{translateX:Le},status:{opacity:1,translateX:Le}},DID_LOAD_ITEM:pi,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Le},status:{translateX:Le}},DID_START_ITEM_PROCESSING:tr,DID_REQUEST_ITEM_PROCESSING:tr,DID_UPDATE_ITEM_PROCESS_PROGRESS:tr,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Le}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Le},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:pi},nl=ge({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),rl=({root:e,props:t})=>{const n=Object.keys(lr).reduce((I,S)=>(I[S]={...lr[S]},I),{}),{id:r}=t,i=e.query("GET_ALLOW_REVERT"),a=e.query("GET_ALLOW_REMOVE"),o=e.query("GET_ALLOW_PROCESS"),u=e.query("GET_INSTANT_UPLOAD"),d=e.query("IS_ASYNC"),p=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let g;d?o&&!i?g=I=>!/RevertItemProcessing/.test(I):!o&&i?g=I=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(I):!o&&!i&&(g=I=>!/Process/.test(I)):g=I=>!/Process/.test(I);const h=g?cr.filter(g):cr.concat();if(u&&i&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),d&&!i){const I=Mt.DID_COMPLETE_ITEM_PROCESSING;I.info.translateX=Za,I.info.translateY=mn,I.status.translateY=mn,I.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(d&&!o&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(I=>{Mt[I].status.translateY=mn}),Mt.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Ka),p&&i){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const I=Mt.DID_COMPLETE_ITEM_PROCESSING;I.info.translateX=Le,I.status.translateY=mn,I.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}a||(n.RemoveItem.disabled=!0),le(n,(I,S)=>{const T=e.createChildView(ts,{label:e.query(S.label),icon:e.query(S.icon),opacity:0});h.includes(I)&&e.appendChildView(T),S.disabled&&(T.element.setAttribute("disabled","disabled"),T.element.setAttribute("hidden","hidden")),T.element.dataset.align=e.query(`GET_STYLE_${S.align}`),T.element.classList.add(S.className),T.on("click",v=>{v.stopPropagation(),!S.disabled&&e.dispatch(S.action,{query:r})}),e.ref[`button${I}`]=T}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(nl)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(ka,{id:r})),e.ref.status=e.appendChildView(e.createChildView(Qa,{id:r}));const _=e.appendChildView(e.createChildView(ci,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));_.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=_;const b=e.appendChildView(e.createChildView(ci,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));b.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=b,e.ref.activeStyles=[]},il=({root:e,actions:t,props:n})=>{sl({root:e,actions:t,props:n});let r=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>Mt[i.type]);if(r){e.ref.activeStyles=[];const i=Mt[r.type];le(tl,(a,o)=>{const u=e.ref[a];le(o,(d,p)=>{const g=i[a]&&typeof i[a][d]<"u"?i[a][d]:p;e.ref.activeStyles.push({control:u,key:d,value:g})})})}e.ref.activeStyles.forEach(({control:i,key:a,value:o})=>{i[a]=typeof o=="function"?o(e):o})},sl=De({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),ol=ge({create:rl,write:il,didCreateView:e=>{Rt("CREATE_VIEW",{...e,view:e})},name:"file"}),al=({root:e,props:t})=>{e.ref.fileName=Ke("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(ol,{id:t.id})),e.ref.data=!1},ll=({root:e,props:t})=>{ue(e.ref.fileName,vr(e.query("GET_ITEM_NAME",t.id)))},cl=ge({create:al,ignoreRect:!0,write:De({DID_LOAD_ITEM:ll}),didCreateView:e=>{Rt("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),gi={type:"spring",damping:.6,mass:7},dl=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:gi},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:gi},styles:["translateY"]}}].forEach(n=>{ul(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},ul=(e,t,n)=>{const r=ge({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),i=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(i)},fl=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=Ui(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,r=e.ref.bottom.rect.element,i=Math.max(n.height+r.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(i-n.height-r.height)/100,e.ref.bottom.translateY=i-r.height},ss=ge({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:fl,create:dl,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),pl=e=>{const t=e.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>t.indexOf(r.id)}},hi={type:"spring",stiffness:.75,damping:.45,mass:10},Ei="spring",mi={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},gl=({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(cl,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(ss,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let i=!1;const a={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const o=pl(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:o});const u=p=>{if(!p.isPrimary)return;p.stopPropagation(),p.preventDefault(),t.dragOffset={x:p.pageX-a.x,y:p.pageY-a.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!i&&(i=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:o})},d=p=>{p.isPrimary&&(document.removeEventListener("pointermove",u),document.removeEventListener("pointerup",d),t.dragOffset={x:p.pageX-a.x,y:p.pageY-a.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:o}),i&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",u),document.addEventListener("pointerup",d)};e.element.addEventListener("pointerdown",n)},hl=De({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),El=De({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:r})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let i=t.concat().filter(o=>/^DID_/.test(o.type)).reverse().find(o=>mi[o.type]);i&&i.type!==n.currentState&&(n.currentState=i.type,e.element.dataset.filepondItemState=mi[n.currentState]||"");const a=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");a?r||(e.height=e.rect.element.width*a):(hl({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),ml=ge({create:gl,write:El,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Ei,scaleY:Ei,translateX:hi,translateY:hi,opacity:{type:"tween",duration:150}}}});var br=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Sr=(e,t,n)=>{if(!n)return;const r=e.rect.element.width,i=t.length;let a=null;if(i===0||n.top<t[0].rect.element.top)return-1;const u=t[0].rect.element,d=u.marginLeft+u.marginRight,p=u.width+d,g=br(r,p);if(g===1){for(let b=0;b<i;b++){const I=t[b],S=I.rect.outer.top+I.rect.element.height*.5;if(n.top<S)return b}return i}const h=u.marginTop+u.marginBottom,_=u.height+h;for(let b=0;b<i;b++){const I=b%g,S=Math.floor(b/g),T=I*p,v=S*_,m=v-u.marginTop,y=T+p,A=v+_+u.marginBottom;if(n.top<A&&n.top>m){if(n.left<y)return b;b!==i-1?a=b:a=null}}return a!==null?a:i},In={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},Il=({root:e})=>{pe(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},_l=({root:e,action:t})=>{const{id:n,index:r,interactionMethod:i}=t;e.ref.addIndex=r;const a=Date.now();let o=a,u=1;if(i!==Fe.NONE){u=0;const d=e.query("GET_ITEM_INSERT_INTERVAL"),p=a-e.ref.lastItemSpanwDate;o=p<d?a+(d-p):a}e.ref.lastItemSpanwDate=o,e.appendChildView(e.createChildView(ml,{spawnDate:o,id:n,opacity:u,interactionMethod:i}),r)},Ii=(e,t,n,r=0,i=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&Tl(e,t,n,r,i),e.scaleX=1,e.scaleY=1,e.opacity=1))},Tl=(e,t,n,r,i)=>{e.interactionMethod===Fe.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===Fe.DROP?(e.translateX=null,e.translateX=t-r*20,e.translateY=null,e.translateY=n-i*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===Fe.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===Fe.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Rl=({root:e,action:t})=>{const{id:n}=t,r=e.childViews.find(i=>i.id===n);r&&(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},nr=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,yl=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,vl=({root:e,action:t})=>{const{id:n,dragState:r}=t,i=e.query("GET_ITEM",{id:n}),a=e.childViews.find(T=>T.id===n),o=e.childViews.length,u=r.getItemIndex(i);if(!a)return;const d={x:a.dragOrigin.x+a.dragOffset.x+a.dragCenter.x,y:a.dragOrigin.y+a.dragOffset.y+a.dragCenter.y},p=nr(a),g=yl(a);let h=Math.floor(e.rect.outer.width/g);h>o&&(h=o);const _=Math.floor(o/h+1);In.setHeight=p*_,In.setWidth=g*h;var b={y:Math.floor(d.y/p),x:Math.floor(d.x/g),getGridIndex:function(){return d.y>In.getHeight||d.y<0||d.x>In.getWidth||d.x<0?u:this.y*h+this.x},getColIndex:function(){const v=e.query("GET_ACTIVE_ITEMS"),m=e.childViews.filter(x=>x.rect.element.height),y=v.map(x=>m.find(q=>q.id===x.id)),A=y.findIndex(x=>x===a),C=nr(a),F=y.length;let P=F,L=0,V=0,k=0;for(let x=0;x<F;x++)if(L=nr(y[x]),k=V,V=k+L,d.y<V){if(A>x){if(d.y<k+C){P=x;break}continue}P=x;break}return P}};const I=h>1?b.getGridIndex():b.getColIndex();e.dispatch("MOVE_ITEM",{query:a,index:I});const S=r.getIndex();if(S===void 0||S!==I){if(r.setIndex(I),S===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:u,target:I})}},bl=De({DID_ADD_ITEM:_l,DID_REMOVE_ITEM:Rl,DID_DRAG_ITEM:vl}),Sl=({root:e,props:t,actions:n,shouldOptimize:r})=>{bl({root:e,props:t,actions:n});const{dragCoordinates:i}=t,a=e.rect.element.width,o=e.childViews.filter(y=>y.rect.element.height),u=e.query("GET_ACTIVE_ITEMS").map(y=>o.find(A=>A.id===y.id)).filter(y=>y),d=i?Sr(e,u,i):null,p=e.ref.addIndex||null;e.ref.addIndex=null;let g=0,h=0,_=0;if(u.length===0)return;const b=u[0].rect.element,I=b.marginTop+b.marginBottom,S=b.marginLeft+b.marginRight,T=b.width+S,v=b.height+I,m=br(a,T);if(m===1){let y=0,A=0;u.forEach((C,F)=>{if(d){let V=F-d;V===-2?A=-I*.25:V===-1?A=-I*.75:V===0?A=I*.75:V===1?A=I*.25:A=0}r&&(C.translateX=null,C.translateY=null),C.markedForRemoval||Ii(C,0,y+A);let L=(C.rect.element.height+I)*(C.markedForRemoval?C.opacity:1);y+=L})}else{let y=0,A=0;u.forEach((C,F)=>{F===d&&(g=1),F===p&&(_+=1),C.markedForRemoval&&C.opacity<.5&&(h-=1);const P=F+_+g+h,L=P%m,V=Math.floor(P/m),k=L*T,x=V*v,q=Math.sign(k-y),te=Math.sign(x-A);y=k,A=x,!C.markedForRemoval&&(r&&(C.translateX=null,C.translateY=null),Ii(C,k,x,q,te))})}},Dl=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),Al=ge({create:Il,write:Sl,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:Dl,mixins:{apis:["dragCoordinates"]}}),Ol=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(Al)),t.dragCoordinates=null,t.overflowing=!1},wl=({root:e,props:t,action:n})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Pl=({props:e})=>{e.dragCoordinates=null},Ml=De({DID_DRAG:wl,DID_END_DRAG:Pl}),Cl=({root:e,props:t,actions:n})=>{if(Ml({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},Ll=ge({create:Ol,write:Cl,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),qe=(e,t,n,r="")=>{n?pe(e,t,r):e.removeAttribute(t)},Nl=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=Ke("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}},Gl=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,pe(e.element,"name",e.query("GET_NAME")),pe(e.element,"aria-controls",`filepond--assistant-${t.id}`),pe(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),os({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),as({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),ls({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),ur({root:e}),cs({root:e,action:{value:e.query("GET_REQUIRED")}}),ds({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const r=Array.from(e.element.files).map(i=>(i._relativePath=i.webkitRelativePath,i));setTimeout(()=>{t.onload(r),Nl(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},os=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&qe(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},as=({root:e,action:t})=>{qe(e.element,"multiple",t.value)},ls=({root:e,action:t})=>{qe(e.element,"webkitdirectory",t.value)},ur=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),r=t||!n;qe(e.element,"disabled",r)},cs=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&qe(e.element,"required",!0):qe(e.element,"required",!1)},ds=({root:e,action:t})=>{qe(e.element,"capture",!!t.value,t.value===!0?"":t.value)},_i=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(qe(t,"required",!1),qe(t,"name",!1)):(qe(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&qe(t,"required",!0))},xl=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},Fl=ge({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Gl,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:De({DID_LOAD_ITEM:_i,DID_REMOVE_ITEM:_i,DID_THROW_ITEM_INVALID:xl,DID_SET_DISABLED:ur,DID_SET_ALLOW_BROWSE:ur,DID_SET_ALLOW_DIRECTORIES_ONLY:ls,DID_SET_ALLOW_MULTIPLE:as,DID_SET_ACCEPTED_FILE_TYPES:os,DID_SET_CAPTURE_METHOD:ds,DID_SET_REQUIRED:cs})}),Ti={ENTER:13,SPACE:32},Bl=({root:e,props:t})=>{const n=Ke("label");pe(n,"for",`filepond--browser-${t.id}`),pe(n,"id",`filepond--drop-label-${t.id}`),pe(n,"aria-hidden","true"),e.ref.handleKeyDown=r=>{(r.keyCode===Ti.ENTER||r.keyCode===Ti.SPACE)&&(r.preventDefault(),e.ref.label.click())},e.ref.handleClick=r=>{r.target===n||n.contains(r.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),us(n,t.caption),e.appendChild(n),e.ref.label=n},us=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&pe(n,"tabindex","0"),t},Ul=ge({name:"drop-label",ignoreRect:!0,create:Bl,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:De({DID_SET_LABEL_IDLE:({root:e,action:t})=>{us(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Vl=ge({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Hl=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(Vl,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},ql=({root:e,action:t})=>{if(!e.ref.blob){Hl({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},Yl=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},kl=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},Wl=({root:e,props:t,actions:n})=>{$l({root:e,props:t,actions:n});const{blob:r}=e.ref;n.length===0&&r&&r.opacity===0&&(e.removeChildView(r),e.ref.blob=null)},$l=De({DID_DRAG:ql,DID_DROP:kl,DID_END_DRAG:Yl}),Xl=ge({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:Wl}),fs=(e,t)=>{try{const n=new DataTransfer;t.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),e.files=n.files}catch{return!1}return!0},zl=({root:e})=>e.ref.fields={},Fn=(e,t)=>e.ref.fields[t],Dr=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},Ri=({root:e})=>Dr(e),jl=({root:e,action:t})=>{const i=!(e.query("GET_ITEM",t.id).origin===Ee.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),a=Ke("input");a.type=i?"file":"hidden",a.name=e.query("GET_NAME"),a.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=a,Dr(e)},Ql=({root:e,action:t})=>{const n=Fn(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=e.query("GET_ITEM",t.id);fs(n,[r.file])},Kl=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=Fn(e,t.id);n&&fs(n,[t.file])},0)},Zl=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},Jl=({root:e,action:t})=>{const n=Fn(e,t.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},ec=({root:e,action:t})=>{const n=Fn(e,t.id);n&&(t.value===null?n.removeAttribute("value"):n.value=t.value,Dr(e))},tc=De({DID_SET_DISABLED:Zl,DID_ADD_ITEM:jl,DID_LOAD_ITEM:Ql,DID_REMOVE_ITEM:Jl,DID_DEFINE_VALUE:ec,DID_PREPARE_OUTPUT:Kl,DID_REORDER_ITEMS:Ri,DID_SORT_ITEMS:Ri}),nc=ge({tag:"fieldset",name:"data",create:zl,write:tc,ignoreRect:!0}),rc=e=>"getRootNode"in e?e.getRootNode():document,ic=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],sc=["css","csv","html","txt"],oc={zip:"zip|compressed",epub:"application/epub+zip"},ps=(e="")=>(e=e.toLowerCase(),ic.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):sc.includes(e)?"text/"+e:oc[e]||""),Ar=e=>new Promise((t,n)=>{const r=gc(e);if(r.length&&!ac(e))return t(r);lc(e).then(t)}),ac=e=>e.files?e.files.length>0:!1,lc=e=>new Promise((t,n)=>{const r=(e.items?Array.from(e.items):[]).filter(i=>cc(i)).map(i=>dc(i));if(!r.length){t(e.files?Array.from(e.files):[]);return}Promise.all(r).then(i=>{const a=[];i.forEach(o=>{a.push.apply(a,o)}),t(a.filter(o=>o).map(o=>(o._relativePath||(o._relativePath=o.webkitRelativePath),o)))}).catch(console.error)}),cc=e=>{if(gs(e)){const t=Or(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},dc=e=>new Promise((t,n)=>{if(pc(e)){uc(Or(e)).then(t).catch(n);return}t([e.getAsFile()])}),uc=e=>new Promise((t,n)=>{const r=[];let i=0,a=0;const o=()=>{a===0&&i===0&&t(r)},u=d=>{i++;const p=d.createReader(),g=()=>{p.readEntries(h=>{if(h.length===0){i--,o();return}h.forEach(_=>{_.isDirectory?u(_):(a++,_.file(b=>{const I=fc(b);_.fullPath&&(I._relativePath=_.fullPath),r.push(I),a--,o()}))}),g()},n)};g()};u(e)}),fc=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,r=ps(xn(e.name));return r.length&&(e=e.slice(0,e.size,r),e.name=n,e.lastModifiedDate=t),e},pc=e=>gs(e)&&(Or(e)||{}).isDirectory,gs=e=>"webkitGetAsEntry"in e,Or=e=>e.webkitGetAsEntry(),gc=e=>{let t=[];try{if(t=Ec(e),t.length)return t;t=hc(e)}catch{}return t},hc=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},Ec=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},wn=[],Tt=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),mc=(e,t,n)=>{const r=Ic(t),i={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return i.destroy=r.addListener(i),i},Ic=e=>{const t=wn.find(r=>r.element===e);if(t)return t;const n=_c(e);return wn.push(n),n},_c=e=>{const t=[],n={dragenter:Rc,dragover:yc,dragleave:bc,drop:vc},r={};le(n,(a,o)=>{r[a]=o(e,t),e.addEventListener(a,r[a],!1)});const i={element:e,addListener:a=>(t.push(a),()=>{t.splice(t.indexOf(a),1),t.length===0&&(wn.splice(wn.indexOf(i),1),le(n,o=>{e.removeEventListener(o,r[o],!1)}))})};return i},Tc=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),wr=(e,t)=>{const n=rc(t),r=Tc(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)};let hs=null;const _n=(e,t)=>{try{e.dropEffect=t}catch{}},Rc=(e,t)=>n=>{n.preventDefault(),hs=n.target,t.forEach(r=>{const{element:i,onenter:a}=r;wr(n,i)&&(r.state="enter",a(Tt(n)))})},yc=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Ar(r).then(i=>{let a=!1;t.some(o=>{const{filterElement:u,element:d,onenter:p,onexit:g,ondrag:h,allowdrop:_}=o;_n(r,"copy");const b=_(i);if(!b){_n(r,"none");return}if(wr(n,d)){if(a=!0,o.state===null){o.state="enter",p(Tt(n));return}if(o.state="over",u&&!b){_n(r,"none");return}h(Tt(n))}else u&&!a&&_n(r,"none"),o.state&&(o.state=null,g(Tt(n)))})})},vc=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Ar(r).then(i=>{t.forEach(a=>{const{filterElement:o,element:u,ondrop:d,onexit:p,allowdrop:g}=a;if(a.state=null,!(o&&!wr(n,u))){if(!g(i))return p(Tt(n));d(Tt(n),i)}})})},bc=(e,t)=>n=>{hs===n.target&&t.forEach(r=>{const{onexit:i}=r;r.state=null,i(Tt(n))})},Sc=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:i,filterItems:a=g=>g}=n,o=mc(e,r?document.documentElement:e,i);let u="",d="";o.allowdrop=g=>t(a(g)),o.ondrop=(g,h)=>{const _=a(h);if(!t(_)){p.ondragend(g);return}d="drag-drop",p.onload(_,g)},o.ondrag=g=>{p.ondrag(g)},o.onenter=g=>{d="drag-over",p.ondragstart(g)},o.onexit=g=>{d="drag-exit",p.ondragend(g)};const p={updateHopperState:()=>{u!==d&&(e.dataset.hopperState=d,u=d)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{o.destroy()}};return p};let fr=!1;const Lt=[],Es=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){n=!0;break}r=r.parentNode}if(!n)return}Ar(e.clipboardData).then(n=>{n.length&&Lt.forEach(r=>r(n))})},Dc=e=>{Lt.includes(e)||(Lt.push(e),!fr&&(fr=!0,document.addEventListener("paste",Es)))},Ac=e=>{Tr(Lt,Lt.indexOf(e)),Lt.length===0&&(document.removeEventListener("paste",Es),fr=!1)},Oc=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{Ac(e)},onload:()=>{}};return Dc(e),t},wc=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,pe(e.element,"role","status"),pe(e.element,"aria-live","polite"),pe(e.element,"aria-relevant","additions")};let yi=null,vi=null;const rr=[],Bn=(e,t)=>{e.element.textContent=t},Pc=e=>{e.element.textContent=""},ms=(e,t,n)=>{const r=e.query("GET_TOTAL_ITEMS");Bn(e,`${n} ${t}, ${r} ${r===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(vi),vi=setTimeout(()=>{Pc(e)},1500)},Is=e=>e.element.parentNode.contains(document.activeElement),Mc=({root:e,action:t})=>{if(!Is(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);rr.push(n.filename),clearTimeout(yi),yi=setTimeout(()=>{ms(e,rr.join(", "),e.query("GET_LABEL_FILE_ADDED")),rr.length=0},750)},Cc=({root:e,action:t})=>{if(!Is(e))return;const n=t.item;ms(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},Lc=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Bn(e,`${r} ${i}`)},bi=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Bn(e,`${r} ${i}`)},Tn=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;Bn(e,`${t.status.main} ${r} ${t.status.sub}`)},Nc=ge({create:wc,ignoreRect:!0,ignoreRectUpdate:!0,write:De({DID_LOAD_ITEM:Mc,DID_REMOVE_ITEM:Cc,DID_COMPLETE_ITEM_PROCESSING:Lc,DID_ABORT_ITEM_PROCESSING:bi,DID_REVERT_ITEM_PROCESSING:bi,DID_THROW_ITEM_REMOVE_ERROR:Tn,DID_THROW_ITEM_LOAD_ERROR:Tn,DID_THROW_ITEM_INVALID:Tn,DID_THROW_ITEM_PROCESSING_ERROR:Tn}),tag:"span",name:"assistant"}),_s=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),Ts=(e,t=16,n=!0)=>{let r=Date.now(),i=null;return(...a)=>{clearTimeout(i);const o=Date.now()-r,u=()=>{r=Date.now(),e(...a)};o<t?n||(i=setTimeout(u,t-o)):u()}},Gc=1e6,Pn=e=>e.preventDefault(),xc=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter(d=>d.length).forEach(d=>{e.element.classList.add(d)}),e.ref.label=e.appendChildView(e.createChildView(Ul,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(Ll,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(ss,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(Nc,{...t})),e.ref.data=e.appendChildView(e.createChildView(nc,{...t})),e.ref.measure=Ke("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(d=>!Qe(d.value)).map(({name:d,value:p})=>{e.element.dataset[d]=p}),e.ref.widthPrevious=null,e.ref.widthUpdated=Ts(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const i=window.matchMedia("(pointer: fine) and (hover: hover)").matches,a="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&a&&!i&&(e.element.addEventListener("touchmove",Pn,{passive:!1}),e.element.addEventListener("gesturestart",Pn));const o=e.query("GET_CREDITS");if(o.length===2){const d=document.createElement("a");d.className="filepond--credits",d.setAttribute("aria-hidden","true"),d.href=o[0],d.tabindex=-1,d.target="_blank",d.rel="noopener noreferrer",d.textContent=o[1],e.element.appendChild(d),e.ref.credits=d}},Fc=({root:e,props:t,actions:n})=>{if(qc({root:e,props:t,actions:n}),n.filter(F=>/^DID_SET_STYLE_/.test(F.type)).filter(F=>!Qe(F.data.value)).map(({type:F,data:P})=>{const L=_s(F.substring(8).toLowerCase(),"_");e.element.dataset[L]=P.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let r=e.ref.bounds;r||(r=e.ref.bounds=Vc(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:i,label:a,list:o,panel:u}=e.ref;i&&i.updateHopperState();const d=e.query("GET_PANEL_ASPECT_RATIO"),p=e.query("GET_ALLOW_MULTIPLE"),g=e.query("GET_TOTAL_ITEMS"),h=p?e.query("GET_MAX_FILES")||Gc:1,_=g===h,b=n.find(F=>F.type==="DID_ADD_ITEM");if(_&&b){const F=b.data.interactionMethod;a.opacity=0,p?a.translateY=-40:F===Fe.API?a.translateX=40:F===Fe.BROWSE?a.translateY=40:a.translateY=30}else _||(a.opacity=1,a.translateX=0,a.translateY=0);const I=Bc(e),S=Uc(e),T=a.rect.element.height,v=!p||_?0:T,m=_?o.rect.element.marginTop:0,y=g===0?0:o.rect.element.marginBottom,A=v+m+S.visual+y,C=v+m+S.bounds+y;if(o.translateY=Math.max(0,v-o.rect.element.marginTop)-I.top,d){const F=e.rect.element.width,P=F*d;d!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=d,e.ref.updateHistory=[]);const L=e.ref.updateHistory;L.push(F);const V=2;if(L.length>V*2){const x=L.length,q=x-10;let te=0;for(let N=x;N>=q;N--)if(L[N]===L[N-2]&&te++,te>=V)return}u.scalable=!1,u.height=P;const k=P-v-(y-I.bottom)-(_?m:0);S.visual>k?o.overflow=k:o.overflow=null,e.height=P}else if(r.fixedHeight){u.scalable=!1;const F=r.fixedHeight-v-(y-I.bottom)-(_?m:0);S.visual>F?o.overflow=F:o.overflow=null}else if(r.cappedHeight){const F=A>=r.cappedHeight,P=Math.min(r.cappedHeight,A);u.scalable=!0,u.height=F?P:P-I.top-I.bottom;const L=P-v-(y-I.bottom)-(_?m:0);A>r.cappedHeight&&S.visual>L?o.overflow=L:o.overflow=null,e.height=Math.min(r.cappedHeight,C-I.top-I.bottom)}else{const F=g>0?I.top+I.bottom:0;u.scalable=!0,u.height=Math.max(T,A-F),e.height=Math.max(T,C-F)}e.ref.credits&&u.heightCurrent&&(e.ref.credits.style.transform=`translateY(${u.heightCurrent}px)`)},Bc=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Uc=e=>{let t=0,n=0;const r=e.ref.list,i=r.childViews[0],a=i.childViews.filter(m=>m.rect.element.height),o=e.query("GET_ACTIVE_ITEMS").map(m=>a.find(y=>y.id===m.id)).filter(m=>m);if(o.length===0)return{visual:t,bounds:n};const u=i.rect.element.width,d=Sr(i,o,r.dragCoordinates),p=o[0].rect.element,g=p.marginTop+p.marginBottom,h=p.marginLeft+p.marginRight,_=p.width+h,b=p.height+g,I=typeof d<"u"&&d>=0?1:0,S=o.find(m=>m.markedForRemoval&&m.opacity<.45)?-1:0,T=o.length+I+S,v=br(u,_);return v===1?o.forEach(m=>{const y=m.rect.element.height+g;n+=y,t+=y*m.opacity}):(n=Math.ceil(T/v)*b,t=n),{visual:t,bounds:n}},Vc=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},Pr=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),i=e.query("GET_TOTAL_ITEMS");let a=e.query("GET_MAX_FILES");const o=t.length;return!r&&o>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:de("warning",0,"Max files")}),!0):(a=r?a:1,!r&&n?!1:xt(a)&&i+o>a?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:de("warning",0,"Max files")}),!0):!1)},Hc=(e,t,n)=>{const r=e.childViews[0];return Sr(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Si=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){const i=Sc(e.element,a=>{const o=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?a.every(d=>Rt("ALLOW_HOPPER_ITEM",d,{query:e.query}).every(p=>p===!0)&&o(d)):!0},{filterItems:a=>{const o=e.query("GET_IGNORED_FILES");return a.filter(u=>Gt(u)?!o.includes(u.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});i.onload=(a,o)=>{const d=e.ref.list.childViews[0].childViews.filter(g=>g.rect.element.height),p=e.query("GET_ACTIVE_ITEMS").map(g=>d.find(h=>h.id===g.id)).filter(g=>g);Ve("ADD_ITEMS",a,{dispatch:e.dispatch}).then(g=>{if(Pr(e,g))return!1;e.dispatch("ADD_ITEMS",{items:g,index:Hc(e.ref.list,p,o),interactionMethod:Fe.DROP})}),e.dispatch("DID_DROP",{position:o}),e.dispatch("DID_END_DRAG",{position:o})},i.ondragstart=a=>{e.dispatch("DID_START_DRAG",{position:a})},i.ondrag=Ts(a=>{e.dispatch("DID_DRAG",{position:a})}),i.ondragend=a=>{e.dispatch("DID_END_DRAG",{position:a})},e.ref.hopper=i,e.ref.drip=e.appendChildView(e.createChildView(Xl))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Di=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),i=n&&!r;i&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Fl,{...t,onload:a=>{Ve("ADD_ITEMS",a,{dispatch:e.dispatch}).then(o=>{if(Pr(e,o))return!1;e.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:Fe.BROWSE})})}}),0):!i&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Ai=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=Oc(),e.ref.paster.onload=i=>{Ve("ADD_ITEMS",i,{dispatch:e.dispatch}).then(a=>{if(Pr(e,a))return!1;e.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:Fe.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},qc=De({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{Di(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{Si(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Ai(e)},DID_SET_DISABLED:({root:e,props:t})=>{Si(e),Ai(e),Di(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),Yc=ge({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:xc,write:Fc,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",Pn),e.element.removeEventListener("gesturestart",Pn)},mixins:{styles:["height"]}}),kc=(e={})=>{let t=null;const n=On(),r=oo($o(n),[da,jo(n)],[Ga,zo(n)]);r.dispatch("SET_OPTIONS",{options:e});const i=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",i);let a=null,o=!1,u=!1,d=null,p=null;const g=()=>{o||(o=!0),clearTimeout(a),a=setTimeout(()=>{o=!1,d=null,p=null,u&&(u=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",g);const h=Yc(r,{id:_r()});let _=!1,b=!1;const I={_read:()=>{o&&(p=window.innerWidth,d||(d=p),!u&&p!==d&&(r.dispatch("DID_START_RESIZE"),u=!0)),b&&_&&(_=h.element.offsetParent===null),!_&&(h._read(),b=h.rect.element.hidden)},_write:w=>{const G=r.processActionQueue().filter(H=>!/^SET_/.test(H.type));_&&!G.length||(m(G),_=h._write(w,G,u),Zo(r.query("GET_ITEMS")),_&&r.processDispatchQueue())}},S=w=>G=>{const H={type:w};if(!G)return H;if(G.hasOwnProperty("error")&&(H.error=G.error?{...G.error}:null),G.status&&(H.status={...G.status}),G.file&&(H.output=G.file),G.source)H.file=G.source;else if(G.item||G.id){const W=G.item?G.item:r.query("GET_ITEM",G.id);H.file=W?we(W):null}return G.items&&(H.items=G.items.map(we)),/progress/.test(w)&&(H.progress=G.progress),G.hasOwnProperty("origin")&&G.hasOwnProperty("target")&&(H.origin=G.origin,H.target=G.target),H},T={DID_DESTROY:S("destroy"),DID_INIT:S("init"),DID_THROW_MAX_FILES:S("warning"),DID_INIT_ITEM:S("initfile"),DID_START_ITEM_LOAD:S("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:S("addfileprogress"),DID_LOAD_ITEM:S("addfile"),DID_THROW_ITEM_INVALID:[S("error"),S("addfile")],DID_THROW_ITEM_LOAD_ERROR:[S("error"),S("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[S("error"),S("removefile")],DID_PREPARE_OUTPUT:S("preparefile"),DID_START_ITEM_PROCESSING:S("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:S("processfileprogress"),DID_ABORT_ITEM_PROCESSING:S("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:S("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:S("processfiles"),DID_REVERT_ITEM_PROCESSING:S("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[S("error"),S("processfile")],DID_REMOVE_ITEM:S("removefile"),DID_UPDATE_ITEMS:S("updatefiles"),DID_ACTIVATE_ITEM:S("activatefile"),DID_REORDER_ITEMS:S("reorderfiles")},v=w=>{const G={pond:X,...w};delete G.type,h.element.dispatchEvent(new CustomEvent(`FilePond:${w.type}`,{detail:G,bubbles:!0,cancelable:!0,composed:!0}));const H=[];w.hasOwnProperty("error")&&H.push(w.error),w.hasOwnProperty("file")&&H.push(w.file);const W=["type","error","file"];Object.keys(w).filter(ne=>!W.includes(ne)).forEach(ne=>H.push(w[ne])),X.fire(w.type,...H);const ee=r.query(`GET_ON${w.type.toUpperCase()}`);ee&&ee(...H)},m=w=>{w.length&&w.filter(G=>T[G.type]).forEach(G=>{const H=T[G.type];(Array.isArray(H)?H:[H]).forEach(W=>{G.type==="DID_INIT_ITEM"?v(W(G.data)):setTimeout(()=>{v(W(G.data))},0)})})},y=w=>r.dispatch("SET_OPTIONS",{options:w}),A=w=>r.query("GET_ACTIVE_ITEM",w),C=w=>new Promise((G,H)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:w,success:W=>{G(W)},failure:W=>{H(W)}})}),F=(w,G={})=>new Promise((H,W)=>{V([{source:w,options:G}],{index:G.index}).then(ee=>H(ee&&ee[0])).catch(W)}),P=w=>w.file&&w.id,L=(w,G)=>(typeof w=="object"&&!P(w)&&!G&&(G=w,w=void 0),r.dispatch("REMOVE_ITEM",{...G,query:w}),r.query("GET_ACTIVE_ITEM",w)===null),V=(...w)=>new Promise((G,H)=>{const W=[],ee={};if(Cn(w[0]))W.push.apply(W,w[0]),Object.assign(ee,w[1]||{});else{const ne=w[w.length-1];typeof ne=="object"&&!(ne instanceof Blob)&&Object.assign(ee,w.pop()),W.push(...w)}r.dispatch("ADD_ITEMS",{items:W,index:ee.index,interactionMethod:Fe.API,success:G,failure:H})}),k=()=>r.query("GET_ACTIVE_ITEMS"),x=w=>new Promise((G,H)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:w,success:W=>{G(W)},failure:W=>{H(W)}})}),q=(...w)=>{const G=Array.isArray(w[0])?w[0]:w,H=G.length?G:k();return Promise.all(H.map(C))},te=(...w)=>{const G=Array.isArray(w[0])?w[0]:w;if(!G.length){const H=k().filter(W=>!(W.status===K.IDLE&&W.origin===Ee.LOCAL)&&W.status!==K.PROCESSING&&W.status!==K.PROCESSING_COMPLETE&&W.status!==K.PROCESSING_REVERT_ERROR);return Promise.all(H.map(x))}return Promise.all(G.map(x))},N=(...w)=>{const G=Array.isArray(w[0])?w[0]:w;let H;typeof G[G.length-1]=="object"?H=G.pop():Array.isArray(w[0])&&(H=w[1]);const W=k();return G.length?G.map(ne=>ht(ne)?W[ne]?W[ne].id:null:ne).filter(ne=>ne).map(ne=>L(ne,H)):Promise.all(W.map(ne=>L(ne,H)))},X={...Gn(),...I,...Xo(r,n),setOptions:y,addFile:F,addFiles:V,getFile:A,processFile:x,prepareFile:C,removeFile:L,moveFile:(w,G)=>r.dispatch("MOVE_ITEM",{query:w,index:G}),getFiles:k,processFiles:te,removeFiles:N,prepareFiles:q,sort:w=>r.dispatch("SORT",{compare:w}),browse:()=>{var w=h.element.querySelector("input[type=file]");w&&w.click()},destroy:()=>{X.fire("destroy",h.element),r.dispatch("ABORT_ALL"),h._destroy(),window.removeEventListener("resize",g),document.removeEventListener("visibilitychange",i),r.dispatch("DID_DESTROY")},insertBefore:w=>Qr(h.element,w),insertAfter:w=>Kr(h.element,w),appendTo:w=>w.appendChild(h.element),replaceElement:w=>{Qr(h.element,w),w.parentNode.removeChild(w),t=w},restoreElement:()=>{t&&(Kr(t,h.element),h.element.parentNode.removeChild(h.element),t=null)},isAttachedTo:w=>h.element===w||t===w,element:{get:()=>h.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),st(X)},Rs=(e={})=>{const t={};return le(On(),(r,i)=>{t[r]=i[0]}),kc({...t,...e})},Wc=e=>e.charAt(0).toLowerCase()+e.slice(1),$c=e=>_s(e.replace(/^data-/,"")),ys=(e,t)=>{le(t,(n,r)=>{le(e,(i,a)=>{const o=new RegExp(n);if(!o.test(i)||(delete e[i],r===!1))return;if(Se(r)){e[r]=a;return}const d=r.group;Ie(r)&&!e[d]&&(e[d]={}),e[d][Wc(i.replace(o,""))]=a}),r.mapping&&ys(e[r.group],r.mapping)})},Xc=(e,t={})=>{const n=[];le(e.attributes,i=>{n.push(e.attributes[i])});const r=n.filter(i=>i.name).reduce((i,a)=>{const o=pe(e,a.name);return i[$c(a.name)]=o===a.name?!0:o,i},{});return ys(r,t),r},zc=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Rt("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...t},i=Xc(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(i).forEach(o=>{Ie(i[o])?(Ie(r[o])||(r[o]={}),Object.assign(r[o],i[o])):r[o]=i[o]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(o=>({source:o.value,options:{type:o.dataset.type}})));const a=Rs(r);return e.files&&Array.from(e.files).forEach(o=>{a.addFile(o)}),a.replaceElement(e),a},jc=(...e)=>so(e[0])?zc(...e):Rs(...e),Qc=["fire","_read","_write"],Oi=e=>{const t={};return Yi(e,t,Qc),t},Kc=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>t[r]),Zc=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:(i,a)=>{},post:(i,a,o)=>{const u=_r();r.onmessage=d=>{d.data.id===u&&a(d.data.message)},r.postMessage({id:u,message:i},o)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},Jc=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),vs=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},ed=e=>vs(e,e.name),wi=[],td=e=>{if(wi.includes(e))return;wi.push(e);const t=e({addFilter:ea,utils:{Type:O,forin:le,isString:Se,isFile:Gt,toNaturalFileSize:ns,replaceInString:Kc,getExtensionFromFilename:xn,getFilenameWithoutExtension:Ji,guesstimateMimeType:ps,getFileFromBlob:Nt,getFilenameFromURL:Jt,createRoute:De,createWorker:Zc,createView:ge,createItemAPI:we,loadImage:Jc,copyFile:ed,renameFile:vs,createBlob:Qi,applyFilterChain:Ve,text:ue,getNumericAspectRatioFromString:$i},views:{fileActionButton:ts}});ta(t.options)},nd=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",rd=()=>"Promise"in window,id=()=>"slice"in Blob.prototype,sd=()=>"URL"in window&&"createObjectURL"in window.URL,od=()=>"visibilityState"in document,ad=()=>"performance"in window,ld=()=>"supports"in(window.CSS||{}),cd=()=>/MSIE|Trident/.test(window.navigator.userAgent),pr=(()=>{const e=Fi()&&!nd()&&od()&&rd()&&id()&&sd()&&ad()&&(ld()||cd());return()=>e})(),it={apps:[]},dd="filepond",yt=()=>{};let bs={},Ss={},Ds={},gr={},bn=yt,Sn=yt,hr=yt,Er=yt,Kt=yt,mr=yt,Mn=yt;if(pr()){Co(()=>{it.apps.forEach(n=>n._read())},n=>{it.apps.forEach(r=>r._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:pr,create:bn,destroy:Sn,parse:hr,find:Er,registerPlugin:Kt,setOptions:Mn}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>le(On(),(n,r)=>{gr[n]=r[1]});bs={...Xi},Ds={...Ee},Ss={...K},gr={},t(),bn=(...n)=>{const r=jc(...n);return r.on("destroy",Sn),it.apps.push(r),Oi(r)},Sn=n=>{const r=it.apps.findIndex(i=>i.isAttachedTo(n));return r>=0?(it.apps.splice(r,1)[0].restoreElement(),!0):!1},hr=n=>Array.from(n.querySelectorAll(`.${dd}`)).filter(a=>!it.apps.find(o=>o.isAttachedTo(a))).map(a=>bn(a)),Er=n=>{const r=it.apps.find(i=>i.isAttachedTo(n));return r?Oi(r):null},Kt=(...n)=>{n.forEach(td),t()},mr=()=>{const n={};return le(On(),(r,i)=>{n[r]=i[0]}),n},Mn=n=>(Ie(n)&&(it.apps.forEach(r=>{r.setOptions(n)}),na(n)),mr())}const ud=Object.freeze(Object.defineProperty({__proto__:null,get FileOrigin(){return Ds},get FileStatus(){return Ss},get OptionTypes(){return gr},get Status(){return bs},get create(){return bn},get destroy(){return Sn},get find(){return Er},get getOptions(){return mr},get parse(){return hr},get registerPlugin(){return Kt},get setOptions(){return Mn},supported:pr},Symbol.toStringTag,{value:"Module"}));/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const fd=e=>/^image/.test(e.type),Pi=(e,t)=>Zt(e.x*t,e.y*t),Mi=(e,t)=>Zt(e.x+t.x,e.y+t.y),pd=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:Zt(e.x/t,e.y/t)},Rn=(e,t,n)=>{const r=Math.cos(t),i=Math.sin(t),a=Zt(e.x-n.x,e.y-n.y);return Zt(n.x+r*a.x-i*a.y,n.y+i*a.x+r*a.y)},Zt=(e=0,t=0)=>({x:e,y:t}),Pe=(e,t,n=1,r)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(r?t[r]:Math.min(t.width,t.height))},gd=(e,t,n)=>{const r=e.borderStyle||e.lineStyle||"solid",i=e.backgroundColor||e.fontColor||"transparent",a=e.borderColor||e.lineColor||"transparent",o=Pe(e.borderWidth||e.lineWidth,t,n),u=e.lineCap||"round",d=e.lineJoin||"round",p=typeof r=="string"?"":r.map(h=>Pe(h,t,n)).join(","),g=e.opacity||1;return{"stroke-linecap":u,"stroke-linejoin":d,"stroke-width":o||0,"stroke-dasharray":p,stroke:a,fill:i,opacity:g}},xe=e=>e!=null,hd=(e,t,n=1)=>{let r=Pe(e.x,t,n,"width")||Pe(e.left,t,n,"width"),i=Pe(e.y,t,n,"height")||Pe(e.top,t,n,"height"),a=Pe(e.width,t,n,"width"),o=Pe(e.height,t,n,"height"),u=Pe(e.right,t,n,"width"),d=Pe(e.bottom,t,n,"height");return xe(i)||(xe(o)&&xe(d)?i=t.height-o-d:i=d),xe(r)||(xe(a)&&xe(u)?r=t.width-a-u:r=u),xe(a)||(xe(r)&&xe(u)?a=t.width-r-u:a=0),xe(o)||(xe(i)&&xe(d)?o=t.height-i-d:o=0),{x:r||0,y:i||0,width:a||0,height:o||0}},Ed=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),We=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),md="http://www.w3.org/2000/svg",Ct=(e,t)=>{const n=document.createElementNS(md,e);return t&&We(n,t),n},Id=e=>We(e,{...e.rect,...e.styles}),_d=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,r=e.rect.width*.5,i=e.rect.height*.5;return We(e,{cx:t,cy:n,rx:r,ry:i,...e.styles})},Td={contain:"xMidYMid meet",cover:"xMidYMid slice"},Rd=(e,t)=>{We(e,{...e.rect,...e.styles,preserveAspectRatio:Td[t.fit]||"none"})},yd={left:"start",center:"middle",right:"end"},vd=(e,t,n,r)=>{const i=Pe(t.fontSize,n,r),a=t.fontFamily||"sans-serif",o=t.fontWeight||"normal",u=yd[t.textAlign]||"start";We(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":o,"font-size":i,"font-family":a,"text-anchor":u}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},bd=(e,t,n,r)=>{We(e,{...e.rect,...e.styles,fill:"none"});const i=e.childNodes[0],a=e.childNodes[1],o=e.childNodes[2],u=e.rect,d={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(We(i,{x1:u.x,y1:u.y,x2:d.x,y2:d.y}),!t.lineDecoration)return;a.style.display="none",o.style.display="none";const p=pd({x:d.x-u.x,y:d.y-u.y}),g=Pe(.05,n,r);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const h=Pi(p,g),_=Mi(u,h),b=Rn(u,2,_),I=Rn(u,-2,_);We(a,{style:"display:block;",d:`M${b.x},${b.y} L${u.x},${u.y} L${I.x},${I.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const h=Pi(p,-g),_=Mi(d,h),b=Rn(d,2,_),I=Rn(d,-2,_);We(o,{style:"display:block;",d:`M${b.x},${b.y} L${d.x},${d.y} L${I.x},${I.y}`})}},Sd=(e,t,n,r)=>{We(e,{...e.styles,fill:"none",d:Ed(t.points.map(i=>({x:Pe(i.x,n,r,"width"),y:Pe(i.y,n,r,"height")})))})},yn=e=>t=>Ct(e,{id:t.id}),Dd=e=>{const t=Ct("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},Ad=e=>{const t=Ct("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=Ct("line");t.appendChild(n);const r=Ct("path");t.appendChild(r);const i=Ct("path");return t.appendChild(i),t},Od={image:Dd,rect:yn("rect"),ellipse:yn("ellipse"),text:yn("text"),path:yn("path"),line:Ad},wd={rect:Id,ellipse:_d,image:Rd,text:vd,path:Sd,line:bd},Pd=(e,t)=>Od[e](t),Md=(e,t,n,r,i)=>{t!=="path"&&(e.rect=hd(n,r,i)),e.styles=gd(n,r,i),wd[t](e,n,r,i)},Cd=["x","y","left","top","right","bottom","width","height"],Ld=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,Nd=e=>{const[t,n]=e,r=n.points?{}:Cd.reduce((i,a)=>(i[a]=Ld(n[a]),i),{});return[t,{zIndex:0,...n,...r}]},Gd=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,xd=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:r,resize:i,markup:a}=n,o=n.width,u=n.height;let d=r.width,p=r.height;if(i){const{size:b}=i;let I=b&&b.width,S=b&&b.height;const T=i.mode,v=i.upscale;I&&!S&&(S=I),S&&!I&&(I=S);const m=d<I&&p<S;if(!m||m&&v){let y=I/d,A=S/p;if(T==="force")d=I,p=S;else{let C;T==="cover"?C=Math.max(y,A):T==="contain"&&(C=Math.min(y,A)),d=d*C,p=p*C}}}const g={width:o,height:u};t.element.setAttribute("width",g.width),t.element.setAttribute("height",g.height);const h=Math.min(o/d,u/p);t.element.innerHTML="";const _=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");a.filter(_).map(Nd).sort(Gd).forEach(b=>{const[I,S]=b,T=Pd(I,S);Md(T,I,S,g,h),t.element.appendChild(T)})}}),Qt=(e,t)=>({x:e,y:t}),Fd=(e,t)=>e.x*t.x+e.y*t.y,Ci=(e,t)=>Qt(e.x-t.x,e.y-t.y),Bd=(e,t)=>Fd(Ci(e,t),Ci(e,t)),Li=(e,t)=>Math.sqrt(Bd(e,t)),Ni=(e,t)=>{const n=e,r=1.5707963267948966,i=t,a=1.5707963267948966-t,o=Math.sin(r),u=Math.sin(i),d=Math.sin(a),p=Math.cos(a),g=n/o,h=g*u,_=g*d;return Qt(p*h,p*_)},Ud=(e,t)=>{const n=e.width,r=e.height,i=Ni(n,t),a=Ni(r,t),o=Qt(e.x+Math.abs(i.x),e.y-Math.abs(i.y)),u=Qt(e.x+e.width+Math.abs(a.y),e.y+Math.abs(a.x)),d=Qt(e.x-Math.abs(a.y),e.y+e.height-Math.abs(a.x));return{width:Li(o,u),height:Li(o,d)}},Vd=(e,t,n=1)=>{const r=e.height/e.width;let i=1,a=t,o=1,u=r;u>a&&(u=a,o=u/r);const d=Math.max(i/o,a/u),p=e.width/(n*d*o),g=p*t;return{width:p,height:g}},As=(e,t,n,r)=>{const i=r.x>.5?1-r.x:r.x,a=r.y>.5?1-r.y:r.y,o=i*2*e.width,u=a*2*e.height,d=Ud(t,n);return Math.max(d.width/o,d.height/u)},Os=(e,t)=>{let n=e.width,r=n*t;r>e.height&&(r=e.height,n=r/t);const i=(e.width-n)*.5,a=(e.height-r)*.5;return{x:i,y:a,width:n,height:r}},Hd=(e,t={})=>{let{zoom:n,rotation:r,center:i,aspectRatio:a}=t;a||(a=e.height/e.width);const o=Vd(e,a,n),u={x:o.width*.5,y:o.height*.5},d={x:0,y:0,width:o.width,height:o.height,center:u},p=typeof t.scaleToFit>"u"||t.scaleToFit,g=As(e,Os(d,a),r,p?i:{x:.5,y:.5}),h=n*g;return{widthFloat:o.width/h,heightFloat:o.height/h,width:Math.round(o.width/h),height:Math.round(o.height/h)}},ke={type:"spring",stiffness:.5,damping:.45,mass:10},qd=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),Yd=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:ke,originY:ke,scaleX:ke,scaleY:ke,translateX:ke,translateY:ke,rotateZ:ke}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(qd(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:r}=n.crop,{bitmap:i}=t.ref;i.scaleX=r.horizontal?-1:1,i.scaleY=r.vertical?-1:1}}),kd=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){n.background&&(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(Yd(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(xd(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const r=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");r!==null&&(r==="grid"?t.element.dataset.transparencyIndicator=r:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:r})=>{const{crop:i,markup:a,resize:o,dirty:u,width:d,height:p}=n;t.ref.image.crop=i;const g={x:0,y:0,width:d,height:p,center:{x:d*.5,y:p*.5}},h={width:t.ref.image.width,height:t.ref.image.height},_={x:i.center.x*h.width,y:i.center.y*h.height},b={x:g.center.x-h.width*i.center.x,y:g.center.y-h.height*i.center.y},I=Math.PI*2+i.rotation%(Math.PI*2),S=i.aspectRatio||h.height/h.width,T=typeof i.scaleToFit>"u"||i.scaleToFit,v=As(h,Os(g,S),I,T?i.center:{x:.5,y:.5}),m=i.zoom*v;a&&a.length?(t.ref.createMarkup(),t.ref.markup.width=d,t.ref.markup.height=p,t.ref.markup.resize=o,t.ref.markup.dirty=u,t.ref.markup.markup=a,t.ref.markup.crop=Hd(h,i)):t.ref.markup&&t.ref.destroyMarkup();const y=t.ref.image;if(r){y.originX=null,y.originY=null,y.translateX=null,y.translateY=null,y.rotateZ=null,y.scaleX=null,y.scaleY=null;return}y.originX=_.x,y.originY=_.y,y.translateX=b.x,y.translateY=b.y,y.rotateZ=I,y.scaleX=m,y.scaleY=m}}),Wd=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:ke,scaleY:ke,translateY:ke,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(kd(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:r})=>{const{clip:i}=t.ref,{image:a,crop:o,markup:u,resize:d,dirty:p}=n;if(i.crop=o,i.markup=u,i.resize=d,i.dirty=p,i.opacity=r?0:1,r||t.rect.element.hidden)return;const g=a.height/a.width;let h=o.aspectRatio||g;const _=t.rect.inner.width,b=t.rect.inner.height;let I=t.query("GET_IMAGE_PREVIEW_HEIGHT");const S=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),T=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),v=t.query("GET_PANEL_ASPECT_RATIO"),m=t.query("GET_ALLOW_MULTIPLE");v&&!m&&(I=_*v,h=v);let y=I!==null?I:Math.max(S,Math.min(_*h,T)),A=y/h;A>_&&(A=_,y=A*h),y>b&&(y=b,A=b/h),i.width=A,i.height=y}});let $d=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,Gi=0;const Xd=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let r=$d;if(document.querySelector("base")){const i=new URL(window.location.href.replace(window.location.hash,"")).href;r=r.replace(/url\(\#/g,"url("+i+"#")}Gi++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=r.replace(/__UID__/g,Gi)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),zd=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},jd=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,r=t.data,i=r.length,a=n[0],o=n[1],u=n[2],d=n[3],p=n[4],g=n[5],h=n[6],_=n[7],b=n[8],I=n[9],S=n[10],T=n[11],v=n[12],m=n[13],y=n[14],A=n[15],C=n[16],F=n[17],P=n[18],L=n[19];let V=0,k=0,x=0,q=0,te=0;for(;V<i;V+=4)k=r[V]/255,x=r[V+1]/255,q=r[V+2]/255,te=r[V+3]/255,r[V]=Math.max(0,Math.min((k*a+x*o+q*u+te*d+p)*255,255)),r[V+1]=Math.max(0,Math.min((k*g+x*h+q*_+te*b+I)*255,255)),r[V+2]=Math.max(0,Math.min((k*S+x*T+q*v+te*m+y)*255,255)),r[V+3]=Math.max(0,Math.min((k*A+x*C+q*F+te*P+L)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},Qd=(e,t)=>{let n=new Image;n.onload=()=>{const r=n.naturalWidth,i=n.naturalHeight;n=null,t(r,i)},n.src=e},Kd={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},Zd=(e,t,n,r)=>{r!==-1&&e.transform.apply(e,Kd[r](t,n))},Jd=(e,t,n,r)=>{t=Math.round(t),n=Math.round(n);const i=document.createElement("canvas");i.width=t,i.height=n;const a=i.getContext("2d");return r>=5&&r<=8&&([t,n]=[n,t]),Zd(a,t,n,r),a.drawImage(e,0,0,t,n),i},ws=e=>/^image/.test(e.type)&&!/svg/.test(e.type),eu=10,tu=10,nu=e=>{const t=Math.min(eu/e.width,tu/e.height),n=document.createElement("canvas"),r=n.getContext("2d"),i=n.width=Math.ceil(e.width*t),a=n.height=Math.ceil(e.height*t);r.drawImage(e,0,0,i,a);let o=null;try{o=r.getImageData(0,0,i,a).data}catch{return null}const u=o.length;let d=0,p=0,g=0,h=0;for(;h<u;h+=4)d+=o[h]*o[h],p+=o[h+1]*o[h+1],g+=o[h+2]*o[h+2];return d=ir(d,u),p=ir(p,u),g=ir(g,u),{r:d,g:p,b:g}},ir=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),ru=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),iu=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},su=e=>new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),ou=e=>{const t=Xd(e),n=Wd(e),{createWorker:r}=e.utils,i=(m,y,A)=>new Promise(C=>{m.ref.imageData||(m.ref.imageData=A.getContext("2d").getImageData(0,0,A.width,A.height));const F=iu(m.ref.imageData);if(!y||y.length!==20)return A.getContext("2d").putImageData(F,0,0),C();const P=r(jd);P.post({imageData:F,colorMatrix:y},L=>{A.getContext("2d").putImageData(L,0,0),P.terminate(),C()},[F.data.buffer])}),a=(m,y)=>{m.removeChildView(y),y.image.width=1,y.image.height=1,y._destroy()},o=({root:m})=>{const y=m.ref.images.shift();return y.opacity=0,y.translateY=-15,m.ref.imageViewBin.push(y),y},u=({root:m,props:y,image:A})=>{const C=y.id,F=m.query("GET_ITEM",{id:C});if(!F)return;const P=F.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},L=m.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let V,k,x=!1;m.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(V=F.getMetadata("markup")||[],k=F.getMetadata("resize"),x=!0);const q=m.appendChildView(m.createChildView(n,{id:C,image:A,crop:P,resize:k,markup:V,dirty:x,background:L,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),m.childViews.length);m.ref.images.push(q),q.opacity=1,q.scaleX=1,q.scaleY=1,q.translateY=0,setTimeout(()=>{m.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:C})},250)},d=({root:m,props:y})=>{const A=m.query("GET_ITEM",{id:y.id});if(!A)return;const C=m.ref.images[m.ref.images.length-1];C.crop=A.getMetadata("crop"),C.background=m.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),m.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(C.dirty=!0,C.resize=A.getMetadata("resize"),C.markup=A.getMetadata("markup"))},p=({root:m,props:y,action:A})=>{if(!/crop|filter|markup|resize/.test(A.change.key)||!m.ref.images.length)return;const C=m.query("GET_ITEM",{id:y.id});if(C){if(/filter/.test(A.change.key)){const F=m.ref.images[m.ref.images.length-1];i(m,A.change.value,F.image);return}if(/crop|markup|resize/.test(A.change.key)){const F=C.getMetadata("crop"),P=m.ref.images[m.ref.images.length-1];if(F&&F.aspectRatio&&P.crop&&P.crop.aspectRatio&&Math.abs(F.aspectRatio-P.crop.aspectRatio)>1e-5){const L=o({root:m});u({root:m,props:y,image:ru(L.image)})}else d({root:m,props:y})}}},g=m=>{const A=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(A?parseInt(A[1]):null)<=58?!1:"createImageBitmap"in window&&ws(m)},h=({root:m,props:y})=>{const{id:A}=y,C=m.query("GET_ITEM",A);if(!C)return;const F=URL.createObjectURL(C.file);Qd(F,(P,L)=>{m.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:A,width:P,height:L})})},_=({root:m,props:y})=>{const{id:A}=y,C=m.query("GET_ITEM",A);if(!C)return;const F=URL.createObjectURL(C.file),P=()=>{su(F).then(L)},L=V=>{URL.revokeObjectURL(F);const x=(C.getMetadata("exif")||{}).orientation||-1;let{width:q,height:te}=V;if(!q||!te)return;x>=5&&x<=8&&([q,te]=[te,q]);const N=Math.max(1,window.devicePixelRatio*.75),w=m.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*N,G=te/q,H=m.rect.element.width,W=m.rect.element.height;let ee=H,ne=ee*G;G>1?(ee=Math.min(q,H*w),ne=ee*G):(ne=Math.min(te,W*w),ee=ne/G);const $e=Jd(V,ee,ne,x),vt=()=>{const bt=m.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?nu(data):null;C.setMetadata("color",bt,!0),"close"in V&&V.close(),m.ref.overlayShadow.opacity=1,u({root:m,props:y,image:$e})},Ae=C.getMetadata("filter");Ae?i(m,Ae,$e).then(vt):vt()};if(g(C.file)){const V=r(zd);V.post({file:C.file},k=>{if(V.terminate(),!k){P();return}L(k)})}else P()},b=({root:m})=>{const y=m.ref.images[m.ref.images.length-1];y.translateY=0,y.scaleX=1,y.scaleY=1,y.opacity=1},I=({root:m})=>{m.ref.overlayShadow.opacity=1,m.ref.overlayError.opacity=0,m.ref.overlaySuccess.opacity=0},S=({root:m})=>{m.ref.overlayShadow.opacity=.25,m.ref.overlayError.opacity=1},T=({root:m})=>{m.ref.overlayShadow.opacity=.25,m.ref.overlaySuccess.opacity=1},v=({root:m})=>{m.ref.images=[],m.ref.imageData=null,m.ref.imageViewBin=[],m.ref.overlayShadow=m.appendChildView(m.createChildView(t,{opacity:0,status:"idle"})),m.ref.overlaySuccess=m.appendChildView(m.createChildView(t,{opacity:0,status:"success"})),m.ref.overlayError=m.appendChildView(m.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:v,styles:["height"],apis:["height"],destroy:({root:m})=>{m.ref.images.forEach(y=>{y.image.width=1,y.image.height=1})},didWriteView:({root:m})=>{m.ref.images.forEach(y=>{y.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:b,DID_IMAGE_PREVIEW_CONTAINER_CREATE:h,DID_FINISH_CALCULATE_PREVIEWSIZE:_,DID_UPDATE_ITEM_METADATA:p,DID_THROW_ITEM_LOAD_ERROR:S,DID_THROW_ITEM_PROCESSING_ERROR:S,DID_THROW_ITEM_INVALID:S,DID_COMPLETE_ITEM_PROCESSING:T,DID_START_ITEM_PROCESSING:I,DID_REVERT_ITEM_PROCESSING:I},({root:m})=>{const y=m.ref.imageViewBin.filter(A=>A.opacity===0);m.ref.imageViewBin=m.ref.imageViewBin.filter(A=>A.opacity>0),y.forEach(A=>a(m,A)),y.length=0})})},Ps=e=>{const{addFilter:t,utils:n}=e,{Type:r,createRoute:i,isFile:a}=n,o=ou(e);return t("CREATE_VIEW",u=>{const{is:d,view:p,query:g}=u;if(!d("file")||!g("GET_ALLOW_IMAGE_PREVIEW"))return;const h=({root:T,props:v})=>{const{id:m}=v,y=g("GET_ITEM",m);if(!y||!a(y.file)||y.archived)return;const A=y.file;if(!fd(A)||!g("GET_IMAGE_PREVIEW_FILTER_ITEM")(y))return;const C="createImageBitmap"in(window||{}),F=g("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!C&&F&&A.size>F)return;T.ref.imagePreview=p.appendChildView(p.createChildView(o,{id:m}));const P=T.query("GET_IMAGE_PREVIEW_HEIGHT");P&&T.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:y.id,height:P});const L=!C&&A.size>g("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");T.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:m},L)},_=(T,v)=>{if(!T.ref.imagePreview)return;let{id:m}=v;const y=T.query("GET_ITEM",{id:m});if(!y)return;const A=T.query("GET_PANEL_ASPECT_RATIO"),C=T.query("GET_ITEM_PANEL_ASPECT_RATIO"),F=T.query("GET_IMAGE_PREVIEW_HEIGHT");if(A||C||F)return;let{imageWidth:P,imageHeight:L}=T.ref;if(!P||!L)return;const V=T.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),k=T.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),q=(y.getMetadata("exif")||{}).orientation||-1;if(q>=5&&q<=8&&([P,L]=[L,P]),!ws(y.file)||T.query("GET_IMAGE_PREVIEW_UPSCALE")){const H=2048/P;P*=H,L*=H}const te=L/P,N=(y.getMetadata("crop")||{}).aspectRatio||te;let X=Math.max(V,Math.min(L,k));const w=T.rect.element.width,G=Math.min(w*N,X);T.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:y.id,height:G})},b=({root:T})=>{T.ref.shouldRescale=!0},I=({root:T,action:v})=>{v.change.key==="crop"&&(T.ref.shouldRescale=!0)},S=({root:T,action:v})=>{T.ref.imageWidth=v.width,T.ref.imageHeight=v.height,T.ref.shouldRescale=!0,T.ref.shouldDrawPreview=!0,T.dispatch("KICK")};p.registerWriter(i({DID_RESIZE_ROOT:b,DID_STOP_RESIZE:b,DID_LOAD_ITEM:h,DID_IMAGE_PREVIEW_CALCULATE_SIZE:S,DID_UPDATE_ITEM_METADATA:I},({root:T,props:v})=>{T.ref.imagePreview&&(T.rect.element.hidden||(T.ref.shouldRescale&&(_(T,v),T.ref.shouldRescale=!1),T.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{T.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:v.id})})}),T.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,r.BOOLEAN],imagePreviewFilterItem:[()=>!0,r.FUNCTION],imagePreviewHeight:[null,r.INT],imagePreviewMinHeight:[44,r.INT],imagePreviewMaxHeight:[256,r.INT],imagePreviewMaxFileSize:[null,r.INT],imagePreviewZoomFactor:[2,r.INT],imagePreviewUpscale:[!1,r.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,r.INT],imagePreviewTransparencyIndicator:[null,r.STRING],imagePreviewCalculateAverageImageColor:[!1,r.BOOLEAN],imagePreviewMarkupShow:[!0,r.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,r.FUNCTION]}}},au=typeof window<"u"&&typeof window.document<"u";au&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ps}));/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const lu=e=>/^image\/jpeg/.test(e.type),pt={JPEG:65496,APP1:65505,EXIF:1165519206,TIFF:18761,Orientation:274,Unknown:65280},gt=(e,t,n=!1)=>e.getUint16(t,n),xi=(e,t,n=!1)=>e.getUint32(t,n),cu=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=function(i){const a=new DataView(i.target.result);if(gt(a,0)!==pt.JPEG){t(-1);return}const o=a.byteLength;let u=2;for(;u<o;){const d=gt(a,u);if(u+=2,d===pt.APP1){if(xi(a,u+=2)!==pt.EXIF)break;const p=gt(a,u+=6)===pt.TIFF;u+=xi(a,u+4,p);const g=gt(a,u,p);u+=2;for(let h=0;h<g;h++)if(gt(a,u+h*12,p)===pt.Orientation){t(gt(a,u+h*12+8,p));return}}else{if((d&pt.Unknown)!==pt.Unknown)break;u+=gt(a,u)}}t(-1)},r.readAsArrayBuffer(e.slice(0,64*1024))}),du=(()=>typeof window<"u"&&typeof window.document<"u")(),uu=()=>du,fu="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let Ms;const Dn=uu()?new Image:{};Dn.onload=()=>Ms=Dn.naturalWidth>Dn.naturalHeight;Dn.src=fu;const pu=()=>Ms,Cs=({addFilter:e,utils:t})=>{const{Type:n,isFile:r}=t;return e("DID_LOAD_ITEM",(i,{query:a})=>new Promise((o,u)=>{const d=i.file;if(!r(d)||!lu(d)||!a("GET_ALLOW_IMAGE_EXIF_ORIENTATION")||!pu())return o(i);cu(d).then(p=>{i.setMetadata("exif",{orientation:p}),o(i)})})),{options:{allowImageExifOrientation:[!0,n.BOOLEAN]}}},gu=typeof window<"u"&&typeof window.document<"u";gu&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Cs}));const hu={labelIdle:'Dateien ablegen oder <span class="filepond--label-action"> auswählen </span>',labelInvalidField:"Feld beinhaltet ungültige Dateien",labelFileWaitingForSize:"Dateigröße berechnen",labelFileSizeNotAvailable:"Dateigröße nicht verfügbar",labelFileLoading:"Laden",labelFileLoadError:"Fehler beim Laden",labelFileProcessing:"Upload läuft",labelFileProcessingComplete:"Upload abgeschlossen",labelFileProcessingAborted:"Upload abgebrochen",labelFileProcessingError:"Fehler beim Upload",labelFileProcessingRevertError:"Fehler beim Wiederherstellen",labelFileRemoveError:"Fehler beim Löschen",labelTapToCancel:"abbrechen",labelTapToRetry:"erneut versuchen",labelTapToUndo:"rückgängig",labelButtonRemoveItem:"Entfernen",labelButtonAbortItemLoad:"Verwerfen",labelButtonRetryItemLoad:"Erneut versuchen",labelButtonAbortItemProcessing:"Abbrechen",labelButtonUndoItemProcessing:"Rückgängig",labelButtonRetryItemProcessing:"Erneut versuchen",labelButtonProcessItem:"Upload",labelMaxFileSizeExceeded:"Datei ist zu groß",labelMaxFileSize:"Maximale Dateigröße: {filesize}",labelMaxTotalFileSizeExceeded:"Maximale gesamte Dateigröße überschritten",labelMaxTotalFileSize:"Maximale gesamte Dateigröße: {filesize}",labelFileTypeNotAllowed:"Dateityp ungültig",fileValidateTypeLabelExpectedTypes:"Erwartet {allButLastType} oder {lastType}",imageValidateSizeLabelFormatError:"Bildtyp nicht unterstützt",imageValidateSizeLabelImageSizeTooSmall:"Bild ist zu klein",imageValidateSizeLabelImageSizeTooBig:"Bild ist zu groß",imageValidateSizeLabelExpectedMinSize:"Mindestgröße: {minWidth} × {minHeight}",imageValidateSizeLabelExpectedMaxSize:"Maximale Größe: {maxWidth} × {maxHeight}",imageValidateSizeLabelImageResolutionTooLow:"Auflösung ist zu niedrig",imageValidateSizeLabelImageResolutionTooHigh:"Auflösung ist zu hoch",imageValidateSizeLabelExpectedMinResolution:"Mindestauflösung: {minResolution}",imageValidateSizeLabelExpectedMaxResolution:"Maximale Auflösung: {maxResolution}"};window.blockeditor=e=>({iframe:null,insert:!1,mobile:!1,sidebarOpen:!0,lastTopPos:0,cursorPos:0,currentDragItem:null,insertBeforeClasses:["after:opacity-100","after:top-0","after:h-[5px]"],insertAfterClasses:["after:opacity-100","after:bottom-0","after:h-[5px]"],init(){Object.keys(e).forEach(t=>{this[t]=e[t]}),this.iframe=document.getElementById("frame"),this.initListeners(),this.iframe.addEventListener("load",()=>{this.initListeners()})},initListeners(){let t=this.iframe.contentWindow.document;t.querySelectorAll("[drop-placeholder]").forEach(n=>{}),t.querySelectorAll("[drag-item]").forEach(n=>{n.addEventListener("click",r=>{this.sidebarOpen=!0,Livewire.dispatch("blockSelected",{uuid:r.target.closest("[drag-item]").dataset.block})},!1),n.addEventListener("dragstart",r=>{r.target.setAttribute("dragging",!0),this.currentDragItem=n}),n.addEventListener("dragover",r=>{r.preventDefault();let i=r.target.closest("[drag-item]");if(this.currentDragItem===i)return;let a=this.beforeOrAfterEl(r,i),o=this.currentDragItem!=null?this.currentDragItem.previousElementSibling:!1,u=this.currentDragItem!=null?this.currentDragItem.nextElementSibling:!1;i!==u&&a==="before"?(i.classList.remove(...this.insertAfterClasses),i.classList.add(...this.insertBeforeClasses)):i!==o&&a==="after"?(i.classList.remove(...this.insertBeforeClasses),i.classList.add(...this.insertAfterClasses)):i.classList.remove(...this.insertBeforeClasses,...this.insertAfterClasses)}),n.addEventListener("dragend",r=>{r.target.removeAttribute("dragging"),this.currentDragItem=null}),n.addEventListener("dragenter",r=>{r.target.hasAttribute("drag-item")&&r.target.setAttribute("is-target",!0)}),n.addEventListener("dragleave",r=>{r.preventDefault,r.target.hasAttribute("is-target")&&r.target.classList.remove(...this.insertAfterClasses,...this.insertBeforeClasses)}),n.addEventListener("drop",r=>{r.preventDefault;let i=t.querySelector("[dragging]"),a=document.querySelector("[inserting]");if(!r.target.closest("[drag-item]"))return;r.target.hasAttribute("drag-item")&&r.target.classList.remove(...this.insertAfterClasses,...this.insertBeforeClasses),this.lastTopPos=t.documentElement.scrollTop;let o=this.beforeOrAfterEl(r,r.target.closest("[drag-item]"));if(a!=null){this.component().call("insertBlock",a.dataset.block,r.target.closest("[drag-item]").dataset.block,o),a.removeAttribute("inserting"),a=!1;return}o==="after"?r.target.closest("[drag-item]").after(i):r.target.closest("[drag-item]").before(i);let u=Array.from(t.querySelectorAll("[drag-item]")).map(d=>d.dataset.block);this.component().call("reorder",u)})})},isBefore(t,n,r){let i=!1,a=!1,o=!1;return t.querySelectorAll("[drag-item]").forEach(u=>{if(!o&&(i=i?!0:u==n,a=a?!0:u==r,i===!1&&a===!0)){o=!0;return}}),o},beforeOrAfterEl(t,n){let r=n.getBoundingClientRect(),i=r.y,a=i+r.height/2,o=a,u=o+r.height/2,d=t.clientY>=i&&t.clientY<=a,p=t.clientY>=o&&t.clientY<=u;return d?"before":p?"after":!1},component(){return Livewire.find(frame.closest("[wire\\:id]").getAttribute("wire:id"))}});document.addEventListener("alpine:init",()=>{Ks.directive("tooltip",(e,{modifiers:t,expression:n},{cleanup:r})=>{let i=n,a=!t.includes("noarrow"),o="top",u="tooltip-"+Date.now().toString(36)+Math.random().toString(36).substr(2,5),d=["top","bottom","left","right"],p=getComputedStyle(e).position;for(let b of d)if(t.includes(b)){o=b;break}p.includes(["relative","absolute","fixed"])||(e.style.position="relative");let g=`
                <div id="${u}" x-data="{ tooltipVisible: false, tooltipText: '${i}', tooltipArrow: ${a}, tooltipPosition: '${o}' }" x-ref="tooltip" x-init="setTimeout(function(){ tooltipVisible = true; }, 1);" x-show="tooltipVisible" :class="{ 'top-0 left-1/2 -translate-x-1/2 -mt-0.5 -translate-y-full' : tooltipPosition == 'top', 'top-1/2 -translate-y-1/2 -ml-1.5 left-0 -translate-x-full' : tooltipPosition == 'left', 'bottom-0 left-1/2 -translate-x-1/2 -mb-0.5 translate-y-full' : tooltipPosition == 'bottom', 'top-1/2 -translate-y-1/2 -mr-1.5 right-0 translate-x-full' : tooltipPosition == 'right' }" class="absolute w-auto text-sm" x-cloak>
                    <div x-show="tooltipVisible" x-transition class="relative px-2 py-1 text-white bg-black rounded bg-opacity-90">
                        <p x-html="tooltipText" class="flex-shrink-0 block text-xs whitespace-nowrap"></p>
                        <div x-ref="tooltipArrow" x-show="tooltipArrow" :class="{ 'bottom-0 -translate-x-1/2 left-1/2 w-2.5 translate-y-full' : tooltipPosition == 'top', 'right-0 -translate-y-1/2 top-1/2 h-2.5 -mt-px translate-x-full' : tooltipPosition == 'left', 'top-0 -translate-x-1/2 left-1/2 w-2.5 -translate-y-full' : tooltipPosition == 'bottom', 'left-0 -translate-y-1/2 top-1/2 h-2.5 -mt-px -translate-x-full' : tooltipPosition == 'right' }" class="absolute inline-flex items-center justify-center overflow-hidden">
                            <div :class="{ 'origin-top-left -rotate-45' : tooltipPosition == 'top', 'origin-top-left rotate-45' : tooltipPosition == 'left', 'origin-bottom-left rotate-45' : tooltipPosition == 'bottom', 'origin-top-right -rotate-45' : tooltipPosition == 'right' }" class="w-1.5 h-1.5 transform bg-black bg-opacity-90"></div>
                        </div>
                    </div>
                </div>
            `;e.dataset.tooltip=u;let h=function(b){e.innerHTML+=g},_=function(b){document.getElementById(b.target.dataset.tooltip).remove()};e.addEventListener("mouseenter",h),e.addEventListener("mouseleave",_),r(()=>{e.removeEventListener("mouseenter",h),e.removeEventListener("mouseleave",_)})})});Kt(Ps);Kt(Cs);Mn(hu);window.FilePond=ud;window.Plyr=no;Alpine.plugin(Zs);Alpine.plugin(Js);Alpine.plugin(ro);Alpine.plugin(io);Alpine.plugin(eo);to.start();
